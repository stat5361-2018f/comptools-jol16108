<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Advanced R</title>
  <meta name="description" content="The book is designed primarily for R users who want to improve their programming skills and understanding of the language. It should also be useful for programmers coming to R from other languages, as it explains some of R’s quirks and shows how some parts that seem horrible do have a positive side.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Advanced R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://adv-r.hadley.nz/" />
  <meta property="og:image" content="https://adv-r.hadley.nz/cover.png" />
  <meta property="og:description" content="The book is designed primarily for R users who want to improve their programming skills and understanding of the language. It should also be useful for programmers coming to R from other languages, as it explains some of R’s quirks and shows how some parts that seem horrible do have a positive side." />
  <meta name="github-repo" content="hadley/adv-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Advanced R" />
  <meta name="twitter:site" content="@hadley" />
  <meta name="twitter:description" content="The book is designed primarily for R users who want to improve their programming skills and understanding of the language. It should also be useful for programmers coming to R from other languages, as it explains some of R’s quirks and shows how some parts that seem horrible do have a positive side." />
  <meta name="twitter:image" content="https://adv-r.hadley.nz/cover.png" />

<meta name="author" content="Hadley Wickham">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="vectors-chap.html">
<link rel="next" href="functions.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="adv-r.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Advanced R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-books"><i class="fa fa-check"></i>Other books</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="1.1" data-path="preface.html"><a href="preface.html#rlang"><i class="fa fa-check"></i><b>1.1</b> rlang</a></li>
<li class="chapter" data-level="1.2" data-path="preface.html"><a href="preface.html#foundations"><i class="fa fa-check"></i><b>1.2</b> Foundations</a></li>
<li class="chapter" data-level="1.3" data-path="preface.html"><a href="preface.html#programming-paradigms"><i class="fa fa-check"></i><b>1.3</b> Programming paradigms</a></li>
<li class="chapter" data-level="1.4" data-path="preface.html"><a href="preface.html#techniques"><i class="fa fa-check"></i><b>1.4</b> Techniques</a></li>
<li class="chapter" data-level="1.5" data-path="preface.html"><a href="preface.html#removals"><i class="fa fa-check"></i><b>1.5</b> Removals</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#who-should-read"><i class="fa fa-check"></i><b>2.1</b> Who should read this book</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#related-work"><i class="fa fa-check"></i><b>2.2</b> Related work</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#what-you-will-get"><i class="fa fa-check"></i><b>2.3</b> What you will get out of this book</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#meta-techniques"><i class="fa fa-check"></i><b>2.4</b> Meta-techniques</a></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#recommended-reading"><i class="fa fa-check"></i><b>2.5</b> Recommended reading</a></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#getting-help"><i class="fa fa-check"></i><b>2.6</b> Getting help</a></li>
<li class="chapter" data-level="2.7" data-path="introduction.html"><a href="introduction.html#intro-ack"><i class="fa fa-check"></i><b>2.7</b> Acknowledgments</a></li>
<li class="chapter" data-level="2.8" data-path="introduction.html"><a href="introduction.html#conventions"><i class="fa fa-check"></i><b>2.8</b> Conventions</a></li>
<li class="chapter" data-level="2.9" data-path="introduction.html"><a href="introduction.html#colophon"><i class="fa fa-check"></i><b>2.9</b> Colophon</a></li>
</ul></li>
<li class="part"><span><b>I Foundations</b></span></li>
<li class="chapter" data-level="" data-path="foundations-intro.html"><a href="foundations-intro.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="3" data-path="names-values.html"><a href="names-values.html"><i class="fa fa-check"></i><b>3</b> Names and values</a><ul>
<li class="chapter" data-level="3.1" data-path="names-values.html"><a href="names-values.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#quiz"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#sources"><i class="fa fa-check"></i>Sources</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="names-values.html"><a href="names-values.html#binding-basics"><i class="fa fa-check"></i><b>3.2</b> Binding basics</a><ul>
<li class="chapter" data-level="3.2.1" data-path="names-values.html"><a href="names-values.html#non-syntactic"><i class="fa fa-check"></i><b>3.2.1</b> Non-syntactic names</a></li>
<li class="chapter" data-level="3.2.2" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>3.2.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="names-values.html"><a href="names-values.html#copy-on-modify"><i class="fa fa-check"></i><b>3.3</b> Copy-on-modify</a><ul>
<li class="chapter" data-level="3.3.1" data-path="names-values.html"><a href="names-values.html#tracemem"><i class="fa fa-check"></i><b>3.3.1</b> <code>tracemem()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="names-values.html"><a href="names-values.html#function-calls"><i class="fa fa-check"></i><b>3.3.2</b> Function calls</a></li>
<li class="chapter" data-level="3.3.3" data-path="names-values.html"><a href="names-values.html#list-references"><i class="fa fa-check"></i><b>3.3.3</b> Lists</a></li>
<li class="chapter" data-level="3.3.4" data-path="names-values.html"><a href="names-values.html#df-modify"><i class="fa fa-check"></i><b>3.3.4</b> Data frames</a></li>
<li class="chapter" data-level="3.3.5" data-path="names-values.html"><a href="names-values.html#character-vectors"><i class="fa fa-check"></i><b>3.3.5</b> Character vectors</a></li>
<li class="chapter" data-level="3.3.6" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>3.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="names-values.html"><a href="names-values.html#object-size"><i class="fa fa-check"></i><b>3.4</b> Object size</a><ul>
<li class="chapter" data-level="3.4.1" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>3.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="names-values.html"><a href="names-values.html#modify-in-place"><i class="fa fa-check"></i><b>3.5</b> Modify-in-place</a><ul>
<li class="chapter" data-level="3.5.1" data-path="names-values.html"><a href="names-values.html#single-binding"><i class="fa fa-check"></i><b>3.5.1</b> Objects with a single binding</a></li>
<li class="chapter" data-level="3.5.2" data-path="names-values.html"><a href="names-values.html#env-modify"><i class="fa fa-check"></i><b>3.5.2</b> Environments</a></li>
<li class="chapter" data-level="3.5.3" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>3.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="names-values.html"><a href="names-values.html#gc"><i class="fa fa-check"></i><b>3.6</b> Unbinding and the garbage collector</a></li>
<li class="chapter" data-level="3.7" data-path="names-values.html"><a href="names-values.html#names-values-answers"><i class="fa fa-check"></i><b>3.7</b> Answers</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vectors-chap.html"><a href="vectors-chap.html"><i class="fa fa-check"></i><b>4</b> Vectors</a><ul>
<li class="chapter" data-level="4.1" data-path="vectors-chap.html"><a href="vectors-chap.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="vectors-chap.html"><a href="vectors-chap.html#quiz-1"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="vectors-chap.html"><a href="vectors-chap.html#outline-1"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="vectors-chap.html"><a href="vectors-chap.html#atomic-vectors"><i class="fa fa-check"></i><b>4.2</b> Atomic vectors</a><ul>
<li class="chapter" data-level="4.2.1" data-path="vectors-chap.html"><a href="vectors-chap.html#scalars"><i class="fa fa-check"></i><b>4.2.1</b> Scalars</a></li>
<li class="chapter" data-level="4.2.2" data-path="vectors-chap.html"><a href="vectors-chap.html#atomic-constructing"><i class="fa fa-check"></i><b>4.2.2</b> Making longer vectors with <code>c()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="vectors-chap.html"><a href="vectors-chap.html#testing-and-coercing"><i class="fa fa-check"></i><b>4.2.3</b> Testing and coercing</a></li>
<li class="chapter" data-level="4.2.4" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-4"><i class="fa fa-check"></i><b>4.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="vectors-chap.html"><a href="vectors-chap.html#attributes"><i class="fa fa-check"></i><b>4.3</b> Attributes</a><ul>
<li class="chapter" data-level="4.3.1" data-path="vectors-chap.html"><a href="vectors-chap.html#getting-and-setting"><i class="fa fa-check"></i><b>4.3.1</b> Getting and setting</a></li>
<li class="chapter" data-level="4.3.2" data-path="vectors-chap.html"><a href="vectors-chap.html#attr-names"><i class="fa fa-check"></i><b>4.3.2</b> Names</a></li>
<li class="chapter" data-level="4.3.3" data-path="vectors-chap.html"><a href="vectors-chap.html#attr-dims"><i class="fa fa-check"></i><b>4.3.3</b> Dimensions</a></li>
<li class="chapter" data-level="4.3.4" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-5"><i class="fa fa-check"></i><b>4.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="vectors-chap.html"><a href="vectors-chap.html#s3-atomic-vectors"><i class="fa fa-check"></i><b>4.4</b> S3 atomic vectors</a><ul>
<li class="chapter" data-level="4.4.1" data-path="vectors-chap.html"><a href="vectors-chap.html#factors"><i class="fa fa-check"></i><b>4.4.1</b> Factors</a></li>
<li class="chapter" data-level="4.4.2" data-path="vectors-chap.html"><a href="vectors-chap.html#dates"><i class="fa fa-check"></i><b>4.4.2</b> Dates</a></li>
<li class="chapter" data-level="4.4.3" data-path="vectors-chap.html"><a href="vectors-chap.html#date-times"><i class="fa fa-check"></i><b>4.4.3</b> Date-times</a></li>
<li class="chapter" data-level="4.4.4" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-6"><i class="fa fa-check"></i><b>4.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="vectors-chap.html"><a href="vectors-chap.html#lists"><i class="fa fa-check"></i><b>4.5</b> Lists</a><ul>
<li class="chapter" data-level="4.5.1" data-path="vectors-chap.html"><a href="vectors-chap.html#list-creating"><i class="fa fa-check"></i><b>4.5.1</b> Creating</a></li>
<li class="chapter" data-level="4.5.2" data-path="vectors-chap.html"><a href="vectors-chap.html#list-types"><i class="fa fa-check"></i><b>4.5.2</b> Testing and coercing</a></li>
<li class="chapter" data-level="4.5.3" data-path="vectors-chap.html"><a href="vectors-chap.html#list-array"><i class="fa fa-check"></i><b>4.5.3</b> Matrices and arrays</a></li>
<li class="chapter" data-level="4.5.4" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-7"><i class="fa fa-check"></i><b>4.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="vectors-chap.html"><a href="vectors-chap.html#tibble"><i class="fa fa-check"></i><b>4.6</b> Data frames and tibbles</a><ul>
<li class="chapter" data-level="4.6.1" data-path="vectors-chap.html"><a href="vectors-chap.html#df-create"><i class="fa fa-check"></i><b>4.6.1</b> Creating</a></li>
<li class="chapter" data-level="4.6.2" data-path="vectors-chap.html"><a href="vectors-chap.html#rownames"><i class="fa fa-check"></i><b>4.6.2</b> Row names</a></li>
<li class="chapter" data-level="4.6.3" data-path="vectors-chap.html"><a href="vectors-chap.html#printing"><i class="fa fa-check"></i><b>4.6.3</b> Printing</a></li>
<li class="chapter" data-level="4.6.4" data-path="vectors-chap.html"><a href="vectors-chap.html#safe-subsetting"><i class="fa fa-check"></i><b>4.6.4</b> Subsetting</a></li>
<li class="chapter" data-level="4.6.5" data-path="vectors-chap.html"><a href="vectors-chap.html#df-test-coerce"><i class="fa fa-check"></i><b>4.6.5</b> Testing and coercing</a></li>
<li class="chapter" data-level="4.6.6" data-path="vectors-chap.html"><a href="vectors-chap.html#list-columns"><i class="fa fa-check"></i><b>4.6.6</b> List columns</a></li>
<li class="chapter" data-level="4.6.7" data-path="vectors-chap.html"><a href="vectors-chap.html#matrix-and-data-frame-columns"><i class="fa fa-check"></i><b>4.6.7</b> Matrix and data frame columns</a></li>
<li class="chapter" data-level="4.6.8" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-8"><i class="fa fa-check"></i><b>4.6.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="vectors-chap.html"><a href="vectors-chap.html#null"><i class="fa fa-check"></i><b>4.7</b> <code>NULL</code></a></li>
<li class="chapter" data-level="4.8" data-path="vectors-chap.html"><a href="vectors-chap.html#data-structure-answers"><i class="fa fa-check"></i><b>4.8</b> Answers</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="subsetting.html"><a href="subsetting.html"><i class="fa fa-check"></i><b>5</b> Subsetting</a><ul>
<li class="chapter" data-level="5.1" data-path="subsetting.html"><a href="subsetting.html#introduction-3"><i class="fa fa-check"></i><b>5.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#quiz-2"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#outline-2"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="subsetting.html"><a href="subsetting.html#subset-multiple"><i class="fa fa-check"></i><b>5.2</b> Selecting multiple elements</a><ul>
<li class="chapter" data-level="5.2.1" data-path="subsetting.html"><a href="subsetting.html#atomic-vectors-1"><i class="fa fa-check"></i><b>5.2.1</b> Atomic vectors</a></li>
<li class="chapter" data-level="5.2.2" data-path="subsetting.html"><a href="subsetting.html#lists-1"><i class="fa fa-check"></i><b>5.2.2</b> Lists</a></li>
<li class="chapter" data-level="5.2.3" data-path="subsetting.html"><a href="subsetting.html#matrix-subsetting"><i class="fa fa-check"></i><b>5.2.3</b> Matrices and arrays</a></li>
<li class="chapter" data-level="5.2.4" data-path="subsetting.html"><a href="subsetting.html#df-subsetting"><i class="fa fa-check"></i><b>5.2.4</b> Data frames and tibbles</a></li>
<li class="chapter" data-level="5.2.5" data-path="subsetting.html"><a href="subsetting.html#simplify-preserve"><i class="fa fa-check"></i><b>5.2.5</b> Preserving dimensionality</a></li>
<li class="chapter" data-level="5.2.6" data-path="subsetting.html"><a href="subsetting.html#exercises-9"><i class="fa fa-check"></i><b>5.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="subsetting.html"><a href="subsetting.html#subset-single"><i class="fa fa-check"></i><b>5.3</b> Selecting a single element</a><ul>
<li class="chapter" data-level="5.3.1" data-path="subsetting.html"><a href="subsetting.html#section"><i class="fa fa-check"></i><b>5.3.1</b> <code>[[</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="subsetting.html"><a href="subsetting.html#section-1"><i class="fa fa-check"></i><b>5.3.2</b> <code>$</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="subsetting.html"><a href="subsetting.html#missingout-of-bounds-indices"><i class="fa fa-check"></i><b>5.3.3</b> Missing/out of bounds indices</a></li>
<li class="chapter" data-level="5.3.4" data-path="subsetting.html"><a href="subsetting.html#and-slot"><i class="fa fa-check"></i><b>5.3.4</b> <code>@</code> and <code>slot()</code></a></li>
<li class="chapter" data-level="5.3.5" data-path="subsetting.html"><a href="subsetting.html#exercises-10"><i class="fa fa-check"></i><b>5.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="subsetting.html"><a href="subsetting.html#subassignment"><i class="fa fa-check"></i><b>5.4</b> Subsetting and assignment</a></li>
<li class="chapter" data-level="5.5" data-path="subsetting.html"><a href="subsetting.html#applications"><i class="fa fa-check"></i><b>5.5</b> Applications</a><ul>
<li class="chapter" data-level="5.5.1" data-path="subsetting.html"><a href="subsetting.html#lookup-tables"><i class="fa fa-check"></i><b>5.5.1</b> Lookup tables (character subsetting)</a></li>
<li class="chapter" data-level="5.5.2" data-path="subsetting.html"><a href="subsetting.html#matching-merging"><i class="fa fa-check"></i><b>5.5.2</b> Matching and merging by hand (integer subsetting)</a></li>
<li class="chapter" data-level="5.5.3" data-path="subsetting.html"><a href="subsetting.html#random-samplesbootstraps-integer-subsetting"><i class="fa fa-check"></i><b>5.5.3</b> Random samples/bootstraps (integer subsetting)</a></li>
<li class="chapter" data-level="5.5.4" data-path="subsetting.html"><a href="subsetting.html#ordering-integer-subsetting"><i class="fa fa-check"></i><b>5.5.4</b> Ordering (integer subsetting)</a></li>
<li class="chapter" data-level="5.5.5" data-path="subsetting.html"><a href="subsetting.html#expanding-aggregated-counts-integer-subsetting"><i class="fa fa-check"></i><b>5.5.5</b> Expanding aggregated counts (integer subsetting)</a></li>
<li class="chapter" data-level="5.5.6" data-path="subsetting.html"><a href="subsetting.html#removing-columns-from-data-frames-character-subsetting"><i class="fa fa-check"></i><b>5.5.6</b> Removing columns from data frames (character subsetting)</a></li>
<li class="chapter" data-level="5.5.7" data-path="subsetting.html"><a href="subsetting.html#selecting-rows-based-on-a-condition-logical-subsetting"><i class="fa fa-check"></i><b>5.5.7</b> Selecting rows based on a condition (logical subsetting)</a></li>
<li class="chapter" data-level="5.5.8" data-path="subsetting.html"><a href="subsetting.html#boolean-algebra-vs.sets-logical-integer-subsetting"><i class="fa fa-check"></i><b>5.5.8</b> Boolean algebra vs. sets (logical &amp; integer subsetting)</a></li>
<li class="chapter" data-level="5.5.9" data-path="subsetting.html"><a href="subsetting.html#exercises-11"><i class="fa fa-check"></i><b>5.5.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="subsetting.html"><a href="subsetting.html#subsetting-answers"><i class="fa fa-check"></i><b>5.6</b> Answers</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>6</b> Functions</a><ul>
<li class="chapter" data-level="6.1" data-path="functions.html"><a href="functions.html#introduction-4"><i class="fa fa-check"></i><b>6.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#quiz-3"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#outline-3"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="functions.html"><a href="functions.html#function-fundamentals"><i class="fa fa-check"></i><b>6.2</b> Function fundamentals</a><ul>
<li class="chapter" data-level="6.2.1" data-path="functions.html"><a href="functions.html#first-class-functions"><i class="fa fa-check"></i><b>6.2.1</b> First-class functions</a></li>
<li class="chapter" data-level="6.2.2" data-path="functions.html"><a href="functions.html#function-components"><i class="fa fa-check"></i><b>6.2.2</b> Function components</a></li>
<li class="chapter" data-level="6.2.3" data-path="functions.html"><a href="functions.html#primitive-functions"><i class="fa fa-check"></i><b>6.2.3</b> Primitive functions</a></li>
<li class="chapter" data-level="6.2.4" data-path="functions.html"><a href="functions.html#exercises-12"><i class="fa fa-check"></i><b>6.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="functions.html"><a href="functions.html#lexical-scoping"><i class="fa fa-check"></i><b>6.3</b> Lexical scoping</a><ul>
<li class="chapter" data-level="6.3.1" data-path="functions.html"><a href="functions.html#name-masking"><i class="fa fa-check"></i><b>6.3.1</b> Name masking</a></li>
<li class="chapter" data-level="6.3.2" data-path="functions.html"><a href="functions.html#functions-vs.variables"><i class="fa fa-check"></i><b>6.3.2</b> Functions vs. variables</a></li>
<li class="chapter" data-level="6.3.3" data-path="functions.html"><a href="functions.html#fresh-start"><i class="fa fa-check"></i><b>6.3.3</b> A fresh start</a></li>
<li class="chapter" data-level="6.3.4" data-path="functions.html"><a href="functions.html#dynamic-lookup"><i class="fa fa-check"></i><b>6.3.4</b> Dynamic lookup</a></li>
<li class="chapter" data-level="6.3.5" data-path="functions.html"><a href="functions.html#exercises-13"><i class="fa fa-check"></i><b>6.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="functions.html"><a href="functions.html#lazy-evaluation"><i class="fa fa-check"></i><b>6.4</b> Lazy evaluation</a><ul>
<li class="chapter" data-level="6.4.1" data-path="functions.html"><a href="functions.html#forcing-evaluation"><i class="fa fa-check"></i><b>6.4.1</b> Forcing evaluation</a></li>
<li class="chapter" data-level="6.4.2" data-path="functions.html"><a href="functions.html#promises"><i class="fa fa-check"></i><b>6.4.2</b> Promises</a></li>
<li class="chapter" data-level="6.4.3" data-path="functions.html"><a href="functions.html#default-arguments"><i class="fa fa-check"></i><b>6.4.3</b> Default arguments</a></li>
<li class="chapter" data-level="6.4.4" data-path="functions.html"><a href="functions.html#missing-arguments"><i class="fa fa-check"></i><b>6.4.4</b> Missing arguments</a></li>
<li class="chapter" data-level="6.4.5" data-path="functions.html"><a href="functions.html#exercises-14"><i class="fa fa-check"></i><b>6.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="functions.html"><a href="functions.html#fun-dot-dot-dot"><i class="fa fa-check"></i><b>6.5</b> <code>...</code> (dot-dot-dot)</a><ul>
<li class="chapter" data-level="6.5.1" data-path="functions.html"><a href="functions.html#exercises-15"><i class="fa fa-check"></i><b>6.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="functions.html"><a href="functions.html#exiting-a-function"><i class="fa fa-check"></i><b>6.6</b> Exiting a function</a><ul>
<li class="chapter" data-level="6.6.1" data-path="functions.html"><a href="functions.html#implicit-vs.explict-returns"><i class="fa fa-check"></i><b>6.6.1</b> Implicit vs. explict returns</a></li>
<li class="chapter" data-level="6.6.2" data-path="functions.html"><a href="functions.html#invisible-values"><i class="fa fa-check"></i><b>6.6.2</b> Invisible values</a></li>
<li class="chapter" data-level="6.6.3" data-path="functions.html"><a href="functions.html#errors"><i class="fa fa-check"></i><b>6.6.3</b> Errors</a></li>
<li class="chapter" data-level="6.6.4" data-path="functions.html"><a href="functions.html#on-exit"><i class="fa fa-check"></i><b>6.6.4</b> Exit handlers</a></li>
<li class="chapter" data-level="6.6.5" data-path="functions.html"><a href="functions.html#exercises-16"><i class="fa fa-check"></i><b>6.6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="functions.html"><a href="functions.html#function-forms"><i class="fa fa-check"></i><b>6.7</b> Function forms</a><ul>
<li class="chapter" data-level="6.7.1" data-path="functions.html"><a href="functions.html#rewriting-to-prefix-form"><i class="fa fa-check"></i><b>6.7.1</b> Rewriting to prefix form</a></li>
<li class="chapter" data-level="6.7.2" data-path="functions.html"><a href="functions.html#prefix-form-prefix-form"><i class="fa fa-check"></i><b>6.7.2</b> Prefix form {prefix-form}</a></li>
<li class="chapter" data-level="6.7.3" data-path="functions.html"><a href="functions.html#infix-functions"><i class="fa fa-check"></i><b>6.7.3</b> Infix functions</a></li>
<li class="chapter" data-level="6.7.4" data-path="functions.html"><a href="functions.html#replacement-functions"><i class="fa fa-check"></i><b>6.7.4</b> Replacement functions</a></li>
<li class="chapter" data-level="6.7.5" data-path="functions.html"><a href="functions.html#special-forms"><i class="fa fa-check"></i><b>6.7.5</b> Special forms</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="functions.html"><a href="functions.html#invoking-a-function"><i class="fa fa-check"></i><b>6.8</b> Invoking a function</a><ul>
<li class="chapter" data-level="6.8.1" data-path="functions.html"><a href="functions.html#exercises-17"><i class="fa fa-check"></i><b>6.8.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="functions.html"><a href="functions.html#function-answers"><i class="fa fa-check"></i><b>6.9</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="environments.html"><a href="environments.html"><i class="fa fa-check"></i><b>7</b> Environments</a><ul>
<li class="chapter" data-level="7.1" data-path="environments.html"><a href="environments.html#introduction-5"><i class="fa fa-check"></i><b>7.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="environments.html"><a href="environments.html#quiz-4"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="environments.html"><a href="environments.html#outline-4"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="environments.html"><a href="environments.html#prerequisites-1"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="environments.html"><a href="environments.html#env-basics"><i class="fa fa-check"></i><b>7.2</b> Environment basics</a><ul>
<li class="chapter" data-level="7.2.1" data-path="environments.html"><a href="environments.html#basics"><i class="fa fa-check"></i><b>7.2.1</b> Basics</a></li>
<li class="chapter" data-level="7.2.2" data-path="environments.html"><a href="environments.html#important-environments"><i class="fa fa-check"></i><b>7.2.2</b> Important environments</a></li>
<li class="chapter" data-level="7.2.3" data-path="environments.html"><a href="environments.html#parents"><i class="fa fa-check"></i><b>7.2.3</b> Parents</a></li>
<li class="chapter" data-level="7.2.4" data-path="environments.html"><a href="environments.html#getting-and-setting-1"><i class="fa fa-check"></i><b>7.2.4</b> Getting and setting</a></li>
<li class="chapter" data-level="7.2.5" data-path="environments.html"><a href="environments.html#finalisers"><i class="fa fa-check"></i><b>7.2.5</b> Finalisers</a></li>
<li class="chapter" data-level="7.2.6" data-path="environments.html"><a href="environments.html#advanced-bindings"><i class="fa fa-check"></i><b>7.2.6</b> Advanced bindings</a></li>
<li class="chapter" data-level="7.2.7" data-path="environments.html"><a href="environments.html#exercises-18"><i class="fa fa-check"></i><b>7.2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="environments.html"><a href="environments.html#env-recursion"><i class="fa fa-check"></i><b>7.3</b> Recursing over environments</a><ul>
<li class="chapter" data-level="7.3.1" data-path="environments.html"><a href="environments.html#exercises-19"><i class="fa fa-check"></i><b>7.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="environments.html"><a href="environments.html#function-envs"><i class="fa fa-check"></i><b>7.4</b> Special environments</a><ul>
<li class="chapter" data-level="7.4.1" data-path="environments.html"><a href="environments.html#package-environments-and-the-search-path"><i class="fa fa-check"></i><b>7.4.1</b> Package environments and the search path</a></li>
<li class="chapter" data-level="7.4.2" data-path="environments.html"><a href="environments.html#the-function-environment"><i class="fa fa-check"></i><b>7.4.2</b> The function environment</a></li>
<li class="chapter" data-level="7.4.3" data-path="environments.html"><a href="environments.html#namespaces"><i class="fa fa-check"></i><b>7.4.3</b> Namespaces</a></li>
<li class="chapter" data-level="7.4.4" data-path="environments.html"><a href="environments.html#execution-environments"><i class="fa fa-check"></i><b>7.4.4</b> Execution environments</a></li>
<li class="chapter" data-level="7.4.5" data-path="environments.html"><a href="environments.html#exercises-20"><i class="fa fa-check"></i><b>7.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="environments.html"><a href="environments.html#the-call-stack"><i class="fa fa-check"></i><b>7.5</b> The call stack</a><ul>
<li class="chapter" data-level="7.5.1" data-path="environments.html"><a href="environments.html#simple-call-stacks"><i class="fa fa-check"></i><b>7.5.1</b> Simple call stacks</a></li>
<li class="chapter" data-level="7.5.2" data-path="environments.html"><a href="environments.html#lazy-evaluation-1"><i class="fa fa-check"></i><b>7.5.2</b> Lazy evaluation</a></li>
<li class="chapter" data-level="7.5.3" data-path="environments.html"><a href="environments.html#frames"><i class="fa fa-check"></i><b>7.5.3</b> Frames</a></li>
<li class="chapter" data-level="7.5.4" data-path="environments.html"><a href="environments.html#dynamic-scope"><i class="fa fa-check"></i><b>7.5.4</b> Dynamic scope</a></li>
<li class="chapter" data-level="7.5.5" data-path="environments.html"><a href="environments.html#exercises-21"><i class="fa fa-check"></i><b>7.5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="environments.html"><a href="environments.html#explicit-envs"><i class="fa fa-check"></i><b>7.6</b> As data structures</a></li>
<li class="chapter" data-level="7.7" data-path="environments.html"><a href="environments.html#section-2"><i class="fa fa-check"></i><b>7.7</b> <code>&lt;&lt;-</code></a><ul>
<li class="chapter" data-level="7.7.1" data-path="environments.html"><a href="environments.html#exercises-22"><i class="fa fa-check"></i><b>7.7.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="environments.html"><a href="environments.html#env-answers"><i class="fa fa-check"></i><b>7.8</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="conditions.html"><a href="conditions.html"><i class="fa fa-check"></i><b>8</b> Conditions</a><ul>
<li class="chapter" data-level="8.1" data-path="conditions.html"><a href="conditions.html#introduction-6"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="conditions.html"><a href="conditions.html#quiz-5"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="conditions.html"><a href="conditions.html#overview"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="8.1.1" data-path="conditions.html"><a href="conditions.html#prerequisites-2"><i class="fa fa-check"></i><b>8.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="conditions.html"><a href="conditions.html#signalling-conditions"><i class="fa fa-check"></i><b>8.2</b> Signalling conditions</a><ul>
<li class="chapter" data-level="8.2.1" data-path="conditions.html"><a href="conditions.html#errors-1"><i class="fa fa-check"></i><b>8.2.1</b> Errors</a></li>
<li class="chapter" data-level="8.2.2" data-path="conditions.html"><a href="conditions.html#warnings"><i class="fa fa-check"></i><b>8.2.2</b> Warnings</a></li>
<li class="chapter" data-level="8.2.3" data-path="conditions.html"><a href="conditions.html#messages"><i class="fa fa-check"></i><b>8.2.3</b> Messages</a></li>
<li class="chapter" data-level="8.2.4" data-path="conditions.html"><a href="conditions.html#exercises-23"><i class="fa fa-check"></i><b>8.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="conditions.html"><a href="conditions.html#ignoring-conditions"><i class="fa fa-check"></i><b>8.3</b> Ignoring conditions</a></li>
<li class="chapter" data-level="8.4" data-path="conditions.html"><a href="conditions.html#handling-conditions"><i class="fa fa-check"></i><b>8.4</b> Handling conditions</a><ul>
<li class="chapter" data-level="8.4.1" data-path="conditions.html"><a href="conditions.html#condition-objects"><i class="fa fa-check"></i><b>8.4.1</b> Condition objects</a></li>
<li class="chapter" data-level="8.4.2" data-path="conditions.html"><a href="conditions.html#exiting-handlers"><i class="fa fa-check"></i><b>8.4.2</b> Exiting handlers</a></li>
<li class="chapter" data-level="8.4.3" data-path="conditions.html"><a href="conditions.html#calling-handlers"><i class="fa fa-check"></i><b>8.4.3</b> Calling handlers</a></li>
<li class="chapter" data-level="8.4.4" data-path="conditions.html"><a href="conditions.html#call-stacks"><i class="fa fa-check"></i><b>8.4.4</b> Call stacks</a></li>
<li class="chapter" data-level="8.4.5" data-path="conditions.html"><a href="conditions.html#exercises-24"><i class="fa fa-check"></i><b>8.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="conditions.html"><a href="conditions.html#custom-conditions"><i class="fa fa-check"></i><b>8.5</b> Custom conditions</a><ul>
<li class="chapter" data-level="8.5.1" data-path="conditions.html"><a href="conditions.html#motivation"><i class="fa fa-check"></i><b>8.5.1</b> Motivation</a></li>
<li class="chapter" data-level="8.5.2" data-path="conditions.html"><a href="conditions.html#signalling"><i class="fa fa-check"></i><b>8.5.2</b> Signalling</a></li>
<li class="chapter" data-level="8.5.3" data-path="conditions.html"><a href="conditions.html#handling"><i class="fa fa-check"></i><b>8.5.3</b> Handling</a></li>
<li class="chapter" data-level="8.5.4" data-path="conditions.html"><a href="conditions.html#exercises-25"><i class="fa fa-check"></i><b>8.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="conditions.html"><a href="conditions.html#condition-applications"><i class="fa fa-check"></i><b>8.6</b> Applications</a><ul>
<li class="chapter" data-level="8.6.1" data-path="conditions.html"><a href="conditions.html#failure-value"><i class="fa fa-check"></i><b>8.6.1</b> Failure value</a></li>
<li class="chapter" data-level="8.6.2" data-path="conditions.html"><a href="conditions.html#success-and-failure-values"><i class="fa fa-check"></i><b>8.6.2</b> Success and failure values</a></li>
<li class="chapter" data-level="8.6.3" data-path="conditions.html"><a href="conditions.html#resignal"><i class="fa fa-check"></i><b>8.6.3</b> Resignal</a></li>
<li class="chapter" data-level="8.6.4" data-path="conditions.html"><a href="conditions.html#record"><i class="fa fa-check"></i><b>8.6.4</b> Record</a></li>
<li class="chapter" data-level="8.6.5" data-path="conditions.html"><a href="conditions.html#no-default-behaviour"><i class="fa fa-check"></i><b>8.6.5</b> No default behaviour</a></li>
<li class="chapter" data-level="8.6.6" data-path="conditions.html"><a href="conditions.html#exercises-26"><i class="fa fa-check"></i><b>8.6.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="conditions.html"><a href="conditions.html#conditions-answers"><i class="fa fa-check"></i><b>8.7</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="connections.html"><a href="connections.html"><i class="fa fa-check"></i><b>9</b> Connections</a><ul>
<li class="chapter" data-level="9.1" data-path="connections.html"><a href="connections.html#basics-1"><i class="fa fa-check"></i><b>9.1</b> Basics</a></li>
<li class="chapter" data-level="9.2" data-path="connections.html"><a href="connections.html#reading-and-writing-binary-data"><i class="fa fa-check"></i><b>9.2</b> Reading and writing binary data</a></li>
<li class="chapter" data-level="9.3" data-path="connections.html"><a href="connections.html#reading-and-writing-text-data"><i class="fa fa-check"></i><b>9.3</b> Reading and writing text data</a></li>
</ul></li>
<li class="part"><span><b>II Functional programming</b></span></li>
<li class="chapter" data-level="" data-path="fp.html"><a href="fp.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="10" data-path="functionals.html"><a href="functionals.html"><i class="fa fa-check"></i><b>10</b> Functionals</a><ul>
<li class="chapter" data-level="10.1" data-path="functionals.html"><a href="functionals.html#introduction-7"><i class="fa fa-check"></i><b>10.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#outline-5"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#prerequisites-3"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="functionals.html"><a href="functionals.html#map"><i class="fa fa-check"></i><b>10.2</b> My first functional: <code>map()</code></a><ul>
<li class="chapter" data-level="10.2.1" data-path="functionals.html"><a href="functionals.html#producing-atomic-vectors"><i class="fa fa-check"></i><b>10.2.1</b> Producing atomic vectors</a></li>
<li class="chapter" data-level="10.2.2" data-path="functionals.html"><a href="functionals.html#anonymous-functions-and-helpers"><i class="fa fa-check"></i><b>10.2.2</b> Anonymous functions and helpers</a></li>
<li class="chapter" data-level="10.2.3" data-path="functionals.html"><a href="functionals.html#passing-arguments"><i class="fa fa-check"></i><b>10.2.3</b> Passing arguments with <code>...</code></a></li>
<li class="chapter" data-level="10.2.4" data-path="functionals.html"><a href="functionals.html#argument-names"><i class="fa fa-check"></i><b>10.2.4</b> Argument names</a></li>
<li class="chapter" data-level="10.2.5" data-path="functionals.html"><a href="functionals.html#change-argument"><i class="fa fa-check"></i><b>10.2.5</b> Varying another argument</a></li>
<li class="chapter" data-level="10.2.6" data-path="functionals.html"><a href="functionals.html#exercises-27"><i class="fa fa-check"></i><b>10.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="functionals.html"><a href="functionals.html#functionals-loop"><i class="fa fa-check"></i><b>10.3</b> Map variants</a><ul>
<li class="chapter" data-level="10.3.1" data-path="functionals.html"><a href="functionals.html#modify"><i class="fa fa-check"></i><b>10.3.1</b> Same type of output as input: <code>modify()</code></a></li>
<li class="chapter" data-level="10.3.2" data-path="functionals.html"><a href="functionals.html#map2"><i class="fa fa-check"></i><b>10.3.2</b> Two inputs: <code>map2()</code> and friends</a></li>
<li class="chapter" data-level="10.3.3" data-path="functionals.html"><a href="functionals.html#no-outputs-walk-and-friends"><i class="fa fa-check"></i><b>10.3.3</b> No outputs: <code>walk()</code> and friends</a></li>
<li class="chapter" data-level="10.3.4" data-path="functionals.html"><a href="functionals.html#iterating-over-values-and-indices"><i class="fa fa-check"></i><b>10.3.4</b> Iterating over values and indices</a></li>
<li class="chapter" data-level="10.3.5" data-path="functionals.html"><a href="functionals.html#pmap"><i class="fa fa-check"></i><b>10.3.5</b> Any number of inputs: <code>pmap()</code> and friends</a></li>
<li class="chapter" data-level="10.3.6" data-path="functionals.html"><a href="functionals.html#exercises-28"><i class="fa fa-check"></i><b>10.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="functionals.html"><a href="functionals.html#reduce"><i class="fa fa-check"></i><b>10.4</b> Reduce</a><ul>
<li class="chapter" data-level="10.4.1" data-path="functionals.html"><a href="functionals.html#basics-2"><i class="fa fa-check"></i><b>10.4.1</b> Basics</a></li>
<li class="chapter" data-level="10.4.2" data-path="functionals.html"><a href="functionals.html#algebra"><i class="fa fa-check"></i><b>10.4.2</b> Algebra</a></li>
<li class="chapter" data-level="10.4.3" data-path="functionals.html"><a href="functionals.html#initialise"><i class="fa fa-check"></i><b>10.4.3</b> Initialise</a></li>
<li class="chapter" data-level="10.4.4" data-path="functionals.html"><a href="functionals.html#reduce2"><i class="fa fa-check"></i><b>10.4.4</b> reduce2</a></li>
<li class="chapter" data-level="10.4.5" data-path="functionals.html"><a href="functionals.html#accumulate"><i class="fa fa-check"></i><b>10.4.5</b> Accumulate</a></li>
<li class="chapter" data-level="10.4.6" data-path="functionals.html"><a href="functionals.html#map-reduce"><i class="fa fa-check"></i><b>10.4.6</b> Map-reduce</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="functionals.html"><a href="functionals.html#predicate-functionals"><i class="fa fa-check"></i><b>10.5</b> Predicate functionals</a><ul>
<li class="chapter" data-level="10.5.1" data-path="functionals.html"><a href="functionals.html#basics-3"><i class="fa fa-check"></i><b>10.5.1</b> Basics</a></li>
<li class="chapter" data-level="10.5.2" data-path="functionals.html"><a href="functionals.html#predicate-map"><i class="fa fa-check"></i><b>10.5.2</b> Map variants</a></li>
<li class="chapter" data-level="10.5.3" data-path="functionals.html"><a href="functionals.html#exercises-29"><i class="fa fa-check"></i><b>10.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="functionals.html"><a href="functionals.html#functionals-math"><i class="fa fa-check"></i><b>10.6</b> Base functionals</a><ul>
<li class="chapter" data-level="10.6.1" data-path="functionals.html"><a href="functionals.html#matrices-and-array-operations"><i class="fa fa-check"></i><b>10.6.1</b> Matrices and array operations</a></li>
<li class="chapter" data-level="10.6.2" data-path="functionals.html"><a href="functionals.html#tapply"><i class="fa fa-check"></i><b>10.6.2</b> <code>tapply()</code></a></li>
<li class="chapter" data-level="10.6.3" data-path="functionals.html"><a href="functionals.html#mathmatical"><i class="fa fa-check"></i><b>10.6.3</b> Mathmatical</a></li>
<li class="chapter" data-level="10.6.4" data-path="functionals.html"><a href="functionals.html#exercises-30"><i class="fa fa-check"></i><b>10.6.4</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="function-factories.html"><a href="function-factories.html"><i class="fa fa-check"></i><b>11</b> Function factories</a><ul>
<li class="chapter" data-level="11.1" data-path="function-factories.html"><a href="function-factories.html#introduction-8"><i class="fa fa-check"></i><b>11.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="function-factories.html"><a href="function-factories.html#outline-6"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="function-factories.html"><a href="function-factories.html#prerequisites-4"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="function-factories.html"><a href="function-factories.html#factory-fundamentals"><i class="fa fa-check"></i><b>11.2</b> Factory fundamentals</a><ul>
<li class="chapter" data-level="11.2.1" data-path="function-factories.html"><a href="function-factories.html#environments-1"><i class="fa fa-check"></i><b>11.2.1</b> Environments</a></li>
<li class="chapter" data-level="11.2.2" data-path="function-factories.html"><a href="function-factories.html#diagram-conventions"><i class="fa fa-check"></i><b>11.2.2</b> Diagram conventions</a></li>
<li class="chapter" data-level="11.2.3" data-path="function-factories.html"><a href="function-factories.html#stateful-funs"><i class="fa fa-check"></i><b>11.2.3</b> Stateful functions</a></li>
<li class="chapter" data-level="11.2.4" data-path="function-factories.html"><a href="function-factories.html#potential-pitfalls"><i class="fa fa-check"></i><b>11.2.4</b> Potential pitfalls</a></li>
<li class="chapter" data-level="11.2.5" data-path="function-factories.html"><a href="function-factories.html#exercises-31"><i class="fa fa-check"></i><b>11.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="function-factories.html"><a href="function-factories.html#graph-fact"><i class="fa fa-check"></i><b>11.3</b> Graphical factories</a><ul>
<li class="chapter" data-level="11.3.1" data-path="function-factories.html"><a href="function-factories.html#labelling"><i class="fa fa-check"></i><b>11.3.1</b> Labelling</a></li>
<li class="chapter" data-level="11.3.2" data-path="function-factories.html"><a href="function-factories.html#histogram-bins"><i class="fa fa-check"></i><b>11.3.2</b> Histogram bins</a></li>
<li class="chapter" data-level="11.3.3" data-path="function-factories.html"><a href="function-factories.html#ggsave"><i class="fa fa-check"></i><b>11.3.3</b> ggsave</a></li>
<li class="chapter" data-level="11.3.4" data-path="function-factories.html"><a href="function-factories.html#exercises-32"><i class="fa fa-check"></i><b>11.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="function-factories.html"><a href="function-factories.html#stat-fact"><i class="fa fa-check"></i><b>11.4</b> Statistical factories</a><ul>
<li class="chapter" data-level="11.4.1" data-path="function-factories.html"><a href="function-factories.html#box-cox-transformation"><i class="fa fa-check"></i><b>11.4.1</b> Box-Cox transformation</a></li>
<li class="chapter" data-level="11.4.2" data-path="function-factories.html"><a href="function-factories.html#bootstrap-generators"><i class="fa fa-check"></i><b>11.4.2</b> Bootstrap generators</a></li>
<li class="chapter" data-level="11.4.3" data-path="function-factories.html"><a href="function-factories.html#MLE"><i class="fa fa-check"></i><b>11.4.3</b> Maximum likelihood estimation</a></li>
<li class="chapter" data-level="11.4.4" data-path="function-factories.html"><a href="function-factories.html#exercises-33"><i class="fa fa-check"></i><b>11.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="function-factories.html"><a href="function-factories.html#functional-factories"><i class="fa fa-check"></i><b>11.5</b> Function factories + functionals</a><ul>
<li class="chapter" data-level="11.5.1" data-path="function-factories.html"><a href="function-factories.html#moving-a-lists-to-the-global-environment"><i class="fa fa-check"></i><b>11.5.1</b> Moving a lists to the global environment</a></li>
<li class="chapter" data-level="11.5.2" data-path="function-factories.html"><a href="function-factories.html#another-approach"><i class="fa fa-check"></i><b>11.5.2</b> Another approach</a></li>
<li class="chapter" data-level="11.5.3" data-path="function-factories.html"><a href="function-factories.html#exercises-34"><i class="fa fa-check"></i><b>11.5.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="function-operators.html"><a href="function-operators.html"><i class="fa fa-check"></i><b>12</b> Function operators</a><ul>
<li class="chapter" data-level="12.1" data-path="function-operators.html"><a href="function-operators.html#introduction-9"><i class="fa fa-check"></i><b>12.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="function-operators.html"><a href="function-operators.html#outline-7"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="function-operators.html"><a href="function-operators.html#prerequisites-5"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="function-operators.html"><a href="function-operators.html#behavioural-fos"><i class="fa fa-check"></i><b>12.2</b> Behavioural FOs</a><ul>
<li class="chapter" data-level="12.2.1" data-path="function-operators.html"><a href="function-operators.html#memoisation"><i class="fa fa-check"></i><b>12.2.1</b> Memoisation</a></li>
<li class="chapter" data-level="12.2.2" data-path="function-operators.html"><a href="function-operators.html#tee"><i class="fa fa-check"></i><b>12.2.2</b> Capturing function invocations</a></li>
<li class="chapter" data-level="12.2.3" data-path="function-operators.html"><a href="function-operators.html#laziness"><i class="fa fa-check"></i><b>12.2.3</b> Laziness</a></li>
<li class="chapter" data-level="12.2.4" data-path="function-operators.html"><a href="function-operators.html#exercises-35"><i class="fa fa-check"></i><b>12.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="function-operators.html"><a href="function-operators.html#output-fos"><i class="fa fa-check"></i><b>12.3</b> Output FOs</a><ul>
<li class="chapter" data-level="12.3.1" data-path="function-operators.html"><a href="function-operators.html#minor-modifications"><i class="fa fa-check"></i><b>12.3.1</b> Minor modifications</a></li>
<li class="chapter" data-level="12.3.2" data-path="function-operators.html"><a href="function-operators.html#changing-what-a-function-does"><i class="fa fa-check"></i><b>12.3.2</b> Changing what a function does</a></li>
<li class="chapter" data-level="12.3.3" data-path="function-operators.html"><a href="function-operators.html#exercises-36"><i class="fa fa-check"></i><b>12.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="function-operators.html"><a href="function-operators.html#input-fos"><i class="fa fa-check"></i><b>12.4</b> Input FOs</a><ul>
<li class="chapter" data-level="12.4.1" data-path="function-operators.html"><a href="function-operators.html#prefilling-function-arguments-partial-function-application"><i class="fa fa-check"></i><b>12.4.1</b> Prefilling function arguments: partial function application</a></li>
<li class="chapter" data-level="12.4.2" data-path="function-operators.html"><a href="function-operators.html#changing-input-types"><i class="fa fa-check"></i><b>12.4.2</b> Changing input types</a></li>
<li class="chapter" data-level="12.4.3" data-path="function-operators.html"><a href="function-operators.html#exercises-37"><i class="fa fa-check"></i><b>12.4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="function-operators.html"><a href="function-operators.html#combining-fos"><i class="fa fa-check"></i><b>12.5</b> Combining FOs</a><ul>
<li class="chapter" data-level="12.5.1" data-path="function-operators.html"><a href="function-operators.html#function-composition"><i class="fa fa-check"></i><b>12.5.1</b> Function composition</a></li>
<li class="chapter" data-level="12.5.2" data-path="function-operators.html"><a href="function-operators.html#logical-predicates-and-boolean-algebra"><i class="fa fa-check"></i><b>12.5.2</b> Logical predicates and boolean algebra</a></li>
<li class="chapter" data-level="12.5.3" data-path="function-operators.html"><a href="function-operators.html#exercises-38"><i class="fa fa-check"></i><b>12.5.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Object oriented programming</b></span></li>
<li class="chapter" data-level="" data-path="oo.html"><a href="oo.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="12.6" data-path="oo.html"><a href="oo.html#oop-systems"><i class="fa fa-check"></i><b>12.6</b> OOP Systems</a></li>
<li class="chapter" data-level="12.7" data-path="oo.html"><a href="oo.html#oop-in-r"><i class="fa fa-check"></i><b>12.7</b> OOP in R</a></li>
<li class="chapter" data-level="12.8" data-path="oo.html"><a href="oo.html#field-guide"><i class="fa fa-check"></i><b>12.8</b> Field guide</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="base-types.html"><a href="base-types.html"><i class="fa fa-check"></i><b>13</b> Base types</a><ul>
<li class="chapter" data-level="13.1" data-path="base-types.html"><a href="base-types.html#introduction-10"><i class="fa fa-check"></i><b>13.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="base-types.html"><a href="base-types.html#outline-8"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="base-types.html"><a href="base-types.html#base-objects-vs-oo-objects"><i class="fa fa-check"></i><b>13.2</b> Base objects vs OO objects</a></li>
<li class="chapter" data-level="13.3" data-path="base-types.html"><a href="base-types.html#base-types-2"><i class="fa fa-check"></i><b>13.3</b> Base types</a></li>
<li class="chapter" data-level="13.4" data-path="base-types.html"><a href="base-types.html#is-functions"><i class="fa fa-check"></i><b>13.4</b> The is functions</a><ul>
<li class="chapter" data-level="13.4.1" data-path="base-types.html"><a href="base-types.html#numeric-type"><i class="fa fa-check"></i><b>13.4.1</b> Numeric type</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="s3.html"><a href="s3.html"><i class="fa fa-check"></i><b>14</b> S3</a><ul>
<li class="chapter" data-level="14.1" data-path="s3.html"><a href="s3.html#introduction-11"><i class="fa fa-check"></i><b>14.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="s3.html"><a href="s3.html#outline-9"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="s3.html"><a href="s3.html#prerequisites-6"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="s3.html"><a href="s3.html#s3-basics"><i class="fa fa-check"></i><b>14.2</b> Basics</a><ul>
<li class="chapter" data-level="14.2.1" data-path="s3.html"><a href="s3.html#exercises-39"><i class="fa fa-check"></i><b>14.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="s3.html"><a href="s3.html#classes"><i class="fa fa-check"></i><b>14.3</b> Classes</a><ul>
<li class="chapter" data-level="14.3.1" data-path="s3.html"><a href="s3.html#constructors"><i class="fa fa-check"></i><b>14.3.1</b> Constructors</a></li>
<li class="chapter" data-level="14.3.2" data-path="s3.html"><a href="s3.html#validators"><i class="fa fa-check"></i><b>14.3.2</b> Validators</a></li>
<li class="chapter" data-level="14.3.3" data-path="s3.html"><a href="s3.html#helpers"><i class="fa fa-check"></i><b>14.3.3</b> Helpers</a></li>
<li class="chapter" data-level="14.3.4" data-path="s3.html"><a href="s3.html#object-styles"><i class="fa fa-check"></i><b>14.3.4</b> Object styles</a></li>
<li class="chapter" data-level="14.3.5" data-path="s3.html"><a href="s3.html#exercises-40"><i class="fa fa-check"></i><b>14.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="s3.html"><a href="s3.html#generics-and-methods"><i class="fa fa-check"></i><b>14.4</b> Generics and methods</a><ul>
<li class="chapter" data-level="14.4.1" data-path="s3.html"><a href="s3.html#coercion"><i class="fa fa-check"></i><b>14.4.1</b> Coercion</a></li>
<li class="chapter" data-level="14.4.2" data-path="s3.html"><a href="s3.html#s3-arguments"><i class="fa fa-check"></i><b>14.4.2</b> Arguments</a></li>
<li class="chapter" data-level="14.4.3" data-path="s3.html"><a href="s3.html#exercises-41"><i class="fa fa-check"></i><b>14.4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="s3.html"><a href="s3.html#method-dispatch"><i class="fa fa-check"></i><b>14.5</b> Method dispatch</a><ul>
<li class="chapter" data-level="14.5.1" data-path="s3.html"><a href="s3.html#usemethod"><i class="fa fa-check"></i><b>14.5.1</b> <code>UseMethod()</code></a></li>
<li class="chapter" data-level="14.5.2" data-path="s3.html"><a href="s3.html#nextmethod"><i class="fa fa-check"></i><b>14.5.2</b> <code>NextMethod()</code></a></li>
<li class="chapter" data-level="14.5.3" data-path="s3.html"><a href="s3.html#exercises-42"><i class="fa fa-check"></i><b>14.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="s3.html"><a href="s3.html#inheritance"><i class="fa fa-check"></i><b>14.6</b> Inheritance</a><ul>
<li class="chapter" data-level="14.6.1" data-path="s3.html"><a href="s3.html#constructors-1"><i class="fa fa-check"></i><b>14.6.1</b> Constructors</a></li>
<li class="chapter" data-level="14.6.2" data-path="s3.html"><a href="s3.html#coercion-1"><i class="fa fa-check"></i><b>14.6.2</b> Coercion</a></li>
<li class="chapter" data-level="14.6.3" data-path="s3.html"><a href="s3.html#methods"><i class="fa fa-check"></i><b>14.6.3</b> Methods</a></li>
<li class="chapter" data-level="14.6.4" data-path="s3.html"><a href="s3.html#exercises-43"><i class="fa fa-check"></i><b>14.6.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="s3.html"><a href="s3.html#dispatch-details"><i class="fa fa-check"></i><b>14.7</b> Dispatch details</a><ul>
<li class="chapter" data-level="14.7.1" data-path="s3.html"><a href="s3.html#environments-and-namespaces"><i class="fa fa-check"></i><b>14.7.1</b> Environments and namespaces</a></li>
<li class="chapter" data-level="14.7.2" data-path="s3.html"><a href="s3.html#s3-and-base-types"><i class="fa fa-check"></i><b>14.7.2</b> S3 and base types</a></li>
<li class="chapter" data-level="14.7.3" data-path="s3.html"><a href="s3.html#internal-generics"><i class="fa fa-check"></i><b>14.7.3</b> Internal generics</a></li>
<li class="chapter" data-level="14.7.4" data-path="s3.html"><a href="s3.html#group-generics"><i class="fa fa-check"></i><b>14.7.4</b> Group generics</a></li>
<li class="chapter" data-level="14.7.5" data-path="s3.html"><a href="s3.html#double-dispatch"><i class="fa fa-check"></i><b>14.7.5</b> Double dispatch</a></li>
<li class="chapter" data-level="14.7.6" data-path="s3.html"><a href="s3.html#exercises-44"><i class="fa fa-check"></i><b>14.7.6</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="s4.html"><a href="s4.html"><i class="fa fa-check"></i><b>15</b> S4</a><ul>
<li class="chapter" data-level="15.1" data-path="s4.html"><a href="s4.html#introduction-12"><i class="fa fa-check"></i><b>15.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="s4.html"><a href="s4.html#outline-10"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="s4.html"><a href="s4.html#prerequisites-7"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="s4.html"><a href="s4.html#classes-1"><i class="fa fa-check"></i><b>15.2</b> Classes</a><ul>
<li class="chapter" data-level="15.2.1" data-path="s4.html"><a href="s4.html#slots"><i class="fa fa-check"></i><b>15.2.1</b> Slots</a></li>
<li class="chapter" data-level="15.2.2" data-path="s4.html"><a href="s4.html#helper"><i class="fa fa-check"></i><b>15.2.2</b> Helper</a></li>
<li class="chapter" data-level="15.2.3" data-path="s4.html"><a href="s4.html#introspection"><i class="fa fa-check"></i><b>15.2.3</b> Introspection</a></li>
<li class="chapter" data-level="15.2.4" data-path="s4.html"><a href="s4.html#exercises-45"><i class="fa fa-check"></i><b>15.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="s4.html"><a href="s4.html#generics-and-methods-1"><i class="fa fa-check"></i><b>15.3</b> Generics and methods</a><ul>
<li class="chapter" data-level="15.3.1" data-path="s4.html"><a href="s4.html#show-method"><i class="fa fa-check"></i><b>15.3.1</b> Show method</a></li>
<li class="chapter" data-level="15.3.2" data-path="s4.html"><a href="s4.html#accessor-methods"><i class="fa fa-check"></i><b>15.3.2</b> Accessor methods</a></li>
<li class="chapter" data-level="15.3.3" data-path="s4.html"><a href="s4.html#coercion-methods"><i class="fa fa-check"></i><b>15.3.3</b> Coercion methods</a></li>
<li class="chapter" data-level="15.3.4" data-path="s4.html"><a href="s4.html#introspection-1"><i class="fa fa-check"></i><b>15.3.4</b> Introspection</a></li>
<li class="chapter" data-level="15.3.5" data-path="s4.html"><a href="s4.html#exercises-46"><i class="fa fa-check"></i><b>15.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="s4.html"><a href="s4.html#method-dispatch-1"><i class="fa fa-check"></i><b>15.4</b> Method dispatch</a><ul>
<li class="chapter" data-level="15.4.1" data-path="s4.html"><a href="s4.html#single-dispatch"><i class="fa fa-check"></i><b>15.4.1</b> Single dispatch</a></li>
<li class="chapter" data-level="15.4.2" data-path="s4.html"><a href="s4.html#multiple-inheritance"><i class="fa fa-check"></i><b>15.4.2</b> Multiple inheritance</a></li>
<li class="chapter" data-level="15.4.3" data-path="s4.html"><a href="s4.html#multiple-dispatch"><i class="fa fa-check"></i><b>15.4.3</b> Multiple dispatch</a></li>
<li class="chapter" data-level="15.4.4" data-path="s4.html"><a href="s4.html#multiple-dispatch-and-multiple-inheritance"><i class="fa fa-check"></i><b>15.4.4</b> Multiple dispatch and multiple inheritance</a></li>
<li class="chapter" data-level="15.4.5" data-path="s4.html"><a href="s4.html#exercises-47"><i class="fa fa-check"></i><b>15.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="s4.html"><a href="s4.html#s4-and-existing-code"><i class="fa fa-check"></i><b>15.5</b> S4 and existing code</a><ul>
<li class="chapter" data-level="15.5.1" data-path="s4.html"><a href="s4.html#classes-2"><i class="fa fa-check"></i><b>15.5.1</b> Classes</a></li>
<li class="chapter" data-level="15.5.2" data-path="s4.html"><a href="s4.html#generics"><i class="fa fa-check"></i><b>15.5.2</b> Generics</a></li>
<li class="chapter" data-level="15.5.3" data-path="s4.html"><a href="s4.html#exercises-48"><i class="fa fa-check"></i><b>15.5.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="R6.html"><a href="R6.html"><i class="fa fa-check"></i><b>16</b> R6</a><ul>
<li class="chapter" data-level="16.1" data-path="R6.html"><a href="R6.html#introduction-13"><i class="fa fa-check"></i><b>16.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="R6.html"><a href="R6.html#outline-11"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="R6.html"><a href="R6.html#prequisites"><i class="fa fa-check"></i>Prequisites</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="R6.html"><a href="R6.html#classes-and-methods"><i class="fa fa-check"></i><b>16.2</b> Classes and methods</a><ul>
<li class="chapter" data-level="16.2.1" data-path="R6.html"><a href="R6.html#method-chaining"><i class="fa fa-check"></i><b>16.2.1</b> Method chaining</a></li>
<li class="chapter" data-level="16.2.2" data-path="R6.html"><a href="R6.html#important-methods"><i class="fa fa-check"></i><b>16.2.2</b> Important methods</a></li>
<li class="chapter" data-level="16.2.3" data-path="R6.html"><a href="R6.html#adding-methods-after-creation"><i class="fa fa-check"></i><b>16.2.3</b> Adding methods after creation</a></li>
<li class="chapter" data-level="16.2.4" data-path="R6.html"><a href="R6.html#inheritance-1"><i class="fa fa-check"></i><b>16.2.4</b> Inheritance</a></li>
<li class="chapter" data-level="16.2.5" data-path="R6.html"><a href="R6.html#introspection-2"><i class="fa fa-check"></i><b>16.2.5</b> Introspection</a></li>
<li class="chapter" data-level="16.2.6" data-path="R6.html"><a href="R6.html#exercises-49"><i class="fa fa-check"></i><b>16.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="R6.html"><a href="R6.html#controlling-access"><i class="fa fa-check"></i><b>16.3</b> Controlling access</a><ul>
<li class="chapter" data-level="16.3.1" data-path="R6.html"><a href="R6.html#privacy"><i class="fa fa-check"></i><b>16.3.1</b> Privacy</a></li>
<li class="chapter" data-level="16.3.2" data-path="R6.html"><a href="R6.html#active-fields"><i class="fa fa-check"></i><b>16.3.2</b> Active fields</a></li>
<li class="chapter" data-level="16.3.3" data-path="R6.html"><a href="R6.html#exercises-50"><i class="fa fa-check"></i><b>16.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="R6.html"><a href="R6.html#reference-semantics"><i class="fa fa-check"></i><b>16.4</b> Reference semantics</a><ul>
<li class="chapter" data-level="16.4.1" data-path="R6.html"><a href="R6.html#reasoning"><i class="fa fa-check"></i><b>16.4.1</b> Reasoning</a></li>
<li class="chapter" data-level="16.4.2" data-path="R6.html"><a href="R6.html#finalizer"><i class="fa fa-check"></i><b>16.4.2</b> Finalizer</a></li>
<li class="chapter" data-level="16.4.3" data-path="R6.html"><a href="R6.html#r6-fields"><i class="fa fa-check"></i><b>16.4.3</b> R6 fields</a></li>
<li class="chapter" data-level="16.4.4" data-path="R6.html"><a href="R6.html#exercises-51"><i class="fa fa-check"></i><b>16.4.4</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html"><i class="fa fa-check"></i><b>17</b> Trade-offs</a><ul>
<li class="chapter" data-level="17.1" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#introduction-14"><i class="fa fa-check"></i><b>17.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#outline-12"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#s3-s4"><i class="fa fa-check"></i><b>17.2</b> S4 vs S3</a></li>
<li class="chapter" data-level="17.3" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#s3-r6"><i class="fa fa-check"></i><b>17.3</b> R6 vs S3</a><ul>
<li class="chapter" data-level="17.3.1" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#namespacing"><i class="fa fa-check"></i><b>17.3.1</b> Namespacing</a></li>
<li class="chapter" data-level="17.3.2" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#threading-state"><i class="fa fa-check"></i><b>17.3.2</b> Threading state</a></li>
<li class="chapter" data-level="17.3.3" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#tradeoffs-pipe"><i class="fa fa-check"></i><b>17.3.3</b> Method chaining</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Metaprogramming</b></span></li>
<li class="chapter" data-level="" data-path="meta.html"><a href="meta.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="17.3.4" data-path="meta.html"><a href="meta.html#trading-precision-for-concision"><i class="fa fa-check"></i><b>17.3.4</b> Trading precision for concision</a></li>
<li class="chapter" data-level="17.4" data-path="meta.html"><a href="meta.html#domain-specific-languages"><i class="fa fa-check"></i><b>17.4</b> Domain specific languages</a></li>
<li class="chapter" data-level="17.5" data-path="meta.html"><a href="meta.html#overview-1"><i class="fa fa-check"></i><b>17.5</b> Overview</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="expressions.html"><a href="expressions.html"><i class="fa fa-check"></i><b>18</b> Expressions</a><ul>
<li class="chapter" data-level="18.1" data-path="expressions.html"><a href="expressions.html#introduction-15"><i class="fa fa-check"></i><b>18.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="expressions.html"><a href="expressions.html#outline-13"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="expressions.html"><a href="expressions.html#prerequisites-8"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="expressions.html"><a href="expressions.html#abstract-syntax-trees"><i class="fa fa-check"></i><b>18.2</b> Abstract syntax trees</a><ul>
<li class="chapter" data-level="18.2.1" data-path="expressions.html"><a href="expressions.html#infix-vs.prefix-calls"><i class="fa fa-check"></i><b>18.2.1</b> Infix vs. prefix calls</a></li>
<li class="chapter" data-level="18.2.2" data-path="expressions.html"><a href="expressions.html#special-forms-1"><i class="fa fa-check"></i><b>18.2.2</b> Special forms</a></li>
<li class="chapter" data-level="18.2.3" data-path="expressions.html"><a href="expressions.html#function-factories-1"><i class="fa fa-check"></i><b>18.2.3</b> Function factories</a></li>
<li class="chapter" data-level="18.2.4" data-path="expressions.html"><a href="expressions.html#argument-names-1"><i class="fa fa-check"></i><b>18.2.4</b> Argument names</a></li>
<li class="chapter" data-level="18.2.5" data-path="expressions.html"><a href="expressions.html#exercises-52"><i class="fa fa-check"></i><b>18.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="expressions.html"><a href="expressions.html#rs-grammar"><i class="fa fa-check"></i><b>18.3</b> R’s grammar</a><ul>
<li class="chapter" data-level="18.3.1" data-path="expressions.html"><a href="expressions.html#operator-precedence"><i class="fa fa-check"></i><b>18.3.1</b> Operator precedence</a></li>
<li class="chapter" data-level="18.3.2" data-path="expressions.html"><a href="expressions.html#associativity"><i class="fa fa-check"></i><b>18.3.2</b> Associativity</a></li>
<li class="chapter" data-level="18.3.3" data-path="expressions.html"><a href="expressions.html#whitespace"><i class="fa fa-check"></i><b>18.3.3</b> Whitespace</a></li>
<li class="chapter" data-level="18.3.4" data-path="expressions.html"><a href="expressions.html#exercises-53"><i class="fa fa-check"></i><b>18.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="expressions.html"><a href="expressions.html#data-structures"><i class="fa fa-check"></i><b>18.4</b> Data structures</a><ul>
<li class="chapter" data-level="18.4.1" data-path="expressions.html"><a href="expressions.html#naming-conventions"><i class="fa fa-check"></i><b>18.4.1</b> Naming conventions</a></li>
<li class="chapter" data-level="18.4.2" data-path="expressions.html"><a href="expressions.html#constants"><i class="fa fa-check"></i><b>18.4.2</b> Constants</a></li>
<li class="chapter" data-level="18.4.3" data-path="expressions.html"><a href="expressions.html#symbols"><i class="fa fa-check"></i><b>18.4.3</b> Symbols</a></li>
<li class="chapter" data-level="18.4.4" data-path="expressions.html"><a href="expressions.html#calls"><i class="fa fa-check"></i><b>18.4.4</b> Calls</a></li>
<li class="chapter" data-level="18.4.5" data-path="expressions.html"><a href="expressions.html#pairlists"><i class="fa fa-check"></i><b>18.4.5</b> Pairlists</a></li>
<li class="chapter" data-level="18.4.6" data-path="expressions.html"><a href="expressions.html#expression-objects"><i class="fa fa-check"></i><b>18.4.6</b> Expression objects</a></li>
<li class="chapter" data-level="18.4.7" data-path="expressions.html"><a href="expressions.html#exercises-54"><i class="fa fa-check"></i><b>18.4.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="expressions.html"><a href="expressions.html#parsing-and-deparsing"><i class="fa fa-check"></i><b>18.5</b> Parsing and deparsing</a><ul>
<li class="chapter" data-level="18.5.1" data-path="expressions.html"><a href="expressions.html#exercises-55"><i class="fa fa-check"></i><b>18.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="expressions.html"><a href="expressions.html#ast-funs"><i class="fa fa-check"></i><b>18.6</b> Case study: Walking the AST with recursive functions</a><ul>
<li class="chapter" data-level="18.6.1" data-path="expressions.html"><a href="expressions.html#finding-f-and-t"><i class="fa fa-check"></i><b>18.6.1</b> Finding F and T</a></li>
<li class="chapter" data-level="18.6.2" data-path="expressions.html"><a href="expressions.html#finding-all-variables-created-by-assignment"><i class="fa fa-check"></i><b>18.6.2</b> Finding all variables created by assignment</a></li>
<li class="chapter" data-level="18.6.3" data-path="expressions.html"><a href="expressions.html#exercises-56"><i class="fa fa-check"></i><b>18.6.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="quasiquotation.html"><a href="quasiquotation.html"><i class="fa fa-check"></i><b>19</b> Quasiquotation</a><ul>
<li class="chapter" data-level="19.1" data-path="quasiquotation.html"><a href="quasiquotation.html#introduction-16"><i class="fa fa-check"></i><b>19.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="quasiquotation.html"><a href="quasiquotation.html#outline-14"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="quasiquotation.html"><a href="quasiquotation.html#prerequisites-9"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="quasiquotation.html"><a href="quasiquotation.html#motivation-1"><i class="fa fa-check"></i><b>19.2</b> Motivation</a><ul>
<li class="chapter" data-level="19.2.1" data-path="quasiquotation.html"><a href="quasiquotation.html#vocabulary"><i class="fa fa-check"></i><b>19.2.1</b> Vocabulary</a></li>
<li class="chapter" data-level="19.2.2" data-path="quasiquotation.html"><a href="quasiquotation.html#theory"><i class="fa fa-check"></i><b>19.2.2</b> Theory</a></li>
<li class="chapter" data-level="19.2.3" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-57"><i class="fa fa-check"></i><b>19.2.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="quasiquotation.html"><a href="quasiquotation.html#quotation"><i class="fa fa-check"></i><b>19.3</b> Quotation</a><ul>
<li class="chapter" data-level="19.3.1" data-path="quasiquotation.html"><a href="quasiquotation.html#with-rlang"><i class="fa fa-check"></i><b>19.3.1</b> With rlang</a></li>
<li class="chapter" data-level="19.3.2" data-path="quasiquotation.html"><a href="quasiquotation.html#with-base-r"><i class="fa fa-check"></i><b>19.3.2</b> With base R</a></li>
<li class="chapter" data-level="19.3.3" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-58"><i class="fa fa-check"></i><b>19.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="quasiquotation.html"><a href="quasiquotation.html#eval-basics"><i class="fa fa-check"></i><b>19.4</b> Evaluation</a></li>
<li class="chapter" data-level="19.5" data-path="quasiquotation.html"><a href="quasiquotation.html#unquotation"><i class="fa fa-check"></i><b>19.5</b> Unquotation</a><ul>
<li class="chapter" data-level="19.5.1" data-path="quasiquotation.html"><a href="quasiquotation.html#with-rlang-1"><i class="fa fa-check"></i><b>19.5.1</b> With rlang</a></li>
<li class="chapter" data-level="19.5.2" data-path="quasiquotation.html"><a href="quasiquotation.html#the-polite-fiction-of"><i class="fa fa-check"></i><b>19.5.2</b> The polite fiction of <code>!!</code></a></li>
<li class="chapter" data-level="19.5.3" data-path="quasiquotation.html"><a href="quasiquotation.html#unquote-base"><i class="fa fa-check"></i><b>19.5.3</b> With base R</a></li>
<li class="chapter" data-level="19.5.4" data-path="quasiquotation.html"><a href="quasiquotation.html#non-standard-asts"><i class="fa fa-check"></i><b>19.5.4</b> Non-standard ASTs</a></li>
<li class="chapter" data-level="19.5.5" data-path="quasiquotation.html"><a href="quasiquotation.html#missing-arguments-1"><i class="fa fa-check"></i><b>19.5.5</b> Missing arguments</a></li>
<li class="chapter" data-level="19.5.6" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-59"><i class="fa fa-check"></i><b>19.5.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="quasiquotation.html"><a href="quasiquotation.html#quasi-case-studies"><i class="fa fa-check"></i><b>19.6</b> Case studies</a><ul>
<li class="chapter" data-level="19.6.1" data-path="quasiquotation.html"><a href="quasiquotation.html#map-reduce-to-generate-code"><i class="fa fa-check"></i><b>19.6.1</b> Map-reduce to generate code</a></li>
<li class="chapter" data-level="19.6.2" data-path="quasiquotation.html"><a href="quasiquotation.html#partition"><i class="fa fa-check"></i><b>19.6.2</b> Partition</a></li>
<li class="chapter" data-level="19.6.3" data-path="quasiquotation.html"><a href="quasiquotation.html#slicing-an-array"><i class="fa fa-check"></i><b>19.6.3</b> Slicing an array</a></li>
<li class="chapter" data-level="19.6.4" data-path="quasiquotation.html"><a href="quasiquotation.html#quasi-function"><i class="fa fa-check"></i><b>19.6.4</b> Creating functions</a></li>
<li class="chapter" data-level="19.6.5" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-60"><i class="fa fa-check"></i><b>19.6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="quasiquotation.html"><a href="quasiquotation.html#dot-dot-dot-..."><i class="fa fa-check"></i><b>19.7</b> Dot-dot-dot (<code>...</code>)</a><ul>
<li class="chapter" data-level="19.7.1" data-path="quasiquotation.html"><a href="quasiquotation.html#do.call"><i class="fa fa-check"></i><b>19.7.1</b> <code>do.call()</code></a></li>
<li class="chapter" data-level="19.7.2" data-path="quasiquotation.html"><a href="quasiquotation.html#the-tidyverse-approach"><i class="fa fa-check"></i><b>19.7.2</b> The tidyverse approach</a></li>
<li class="chapter" data-level="19.7.3" data-path="quasiquotation.html"><a href="quasiquotation.html#list2"><i class="fa fa-check"></i><b>19.7.3</b> <code>list2()</code></a></li>
<li class="chapter" data-level="19.7.4" data-path="quasiquotation.html"><a href="quasiquotation.html#application-invoke-and-lang"><i class="fa fa-check"></i><b>19.7.4</b> Application: <code>invoke()</code> and <code>lang()</code></a></li>
<li class="chapter" data-level="19.7.5" data-path="quasiquotation.html"><a href="quasiquotation.html#other-approaches"><i class="fa fa-check"></i><b>19.7.5</b> Other approaches</a></li>
<li class="chapter" data-level="19.7.6" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-61"><i class="fa fa-check"></i><b>19.7.6</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="evaluation.html"><a href="evaluation.html"><i class="fa fa-check"></i><b>20</b> Evaluation</a><ul>
<li class="chapter" data-level="20.1" data-path="evaluation.html"><a href="evaluation.html#introduction-17"><i class="fa fa-check"></i><b>20.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="evaluation.html"><a href="evaluation.html#outline-15"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="evaluation.html"><a href="evaluation.html#prerequisites-10"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="evaluation.html"><a href="evaluation.html#evaluation-basics"><i class="fa fa-check"></i><b>20.2</b> Evaluation basics</a><ul>
<li class="chapter" data-level="20.2.1" data-path="evaluation.html"><a href="evaluation.html#application-local"><i class="fa fa-check"></i><b>20.2.1</b> Application: <code>local()</code></a></li>
<li class="chapter" data-level="20.2.2" data-path="evaluation.html"><a href="evaluation.html#application-source"><i class="fa fa-check"></i><b>20.2.2</b> Application: <code>source()</code></a></li>
<li class="chapter" data-level="20.2.3" data-path="evaluation.html"><a href="evaluation.html#gotcha-function"><i class="fa fa-check"></i><b>20.2.3</b> Gotcha: <code>function()</code></a></li>
<li class="chapter" data-level="20.2.4" data-path="evaluation.html"><a href="evaluation.html#eval-frame"><i class="fa fa-check"></i><b>20.2.4</b> Advanced: environments vs. frames</a></li>
<li class="chapter" data-level="20.2.5" data-path="evaluation.html"><a href="evaluation.html#base-r"><i class="fa fa-check"></i><b>20.2.5</b> Base R</a></li>
<li class="chapter" data-level="20.2.6" data-path="evaluation.html"><a href="evaluation.html#exercises-62"><i class="fa fa-check"></i><b>20.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="evaluation.html"><a href="evaluation.html#quosures"><i class="fa fa-check"></i><b>20.3</b> Quosures</a><ul>
<li class="chapter" data-level="20.3.1" data-path="evaluation.html"><a href="evaluation.html#motivation-2"><i class="fa fa-check"></i><b>20.3.1</b> Motivation</a></li>
<li class="chapter" data-level="20.3.2" data-path="evaluation.html"><a href="evaluation.html#creating-and-manipulating"><i class="fa fa-check"></i><b>20.3.2</b> Creating and manipulating</a></li>
<li class="chapter" data-level="20.3.3" data-path="evaluation.html"><a href="evaluation.html#evaluating"><i class="fa fa-check"></i><b>20.3.3</b> Evaluating</a></li>
<li class="chapter" data-level="20.3.4" data-path="evaluation.html"><a href="evaluation.html#implementation"><i class="fa fa-check"></i><b>20.3.4</b> Implementation</a></li>
<li class="chapter" data-level="20.3.5" data-path="evaluation.html"><a href="evaluation.html#when-not-to-use-quosures"><i class="fa fa-check"></i><b>20.3.5</b> When not to use quosures</a></li>
<li class="chapter" data-level="20.3.6" data-path="evaluation.html"><a href="evaluation.html#exercises-63"><i class="fa fa-check"></i><b>20.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="evaluation.html"><a href="evaluation.html#tidy-evaluation"><i class="fa fa-check"></i><b>20.4</b> Tidy evaluation</a><ul>
<li class="chapter" data-level="20.4.1" data-path="evaluation.html"><a href="evaluation.html#data-masks"><i class="fa fa-check"></i><b>20.4.1</b> Data masks</a></li>
<li class="chapter" data-level="20.4.2" data-path="evaluation.html"><a href="evaluation.html#subset"><i class="fa fa-check"></i><b>20.4.2</b> Application: <code>subset()</code></a></li>
<li class="chapter" data-level="20.4.3" data-path="evaluation.html"><a href="evaluation.html#application-arrange"><i class="fa fa-check"></i><b>20.4.3</b> Application: <code>arrange()</code></a></li>
<li class="chapter" data-level="20.4.4" data-path="evaluation.html"><a href="evaluation.html#ambiguity-and-pronouns"><i class="fa fa-check"></i><b>20.4.4</b> Ambiguity and pronouns</a></li>
<li class="chapter" data-level="20.4.5" data-path="evaluation.html"><a href="evaluation.html#base-subset"><i class="fa fa-check"></i><b>20.4.5</b> Base <code>subset()</code></a></li>
<li class="chapter" data-level="20.4.6" data-path="evaluation.html"><a href="evaluation.html#tidy-eval-performance"><i class="fa fa-check"></i><b>20.4.6</b> Performance</a></li>
<li class="chapter" data-level="20.4.7" data-path="evaluation.html"><a href="evaluation.html#exercises-64"><i class="fa fa-check"></i><b>20.4.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="evaluation.html"><a href="evaluation.html#wrapping-quoting-functions"><i class="fa fa-check"></i><b>20.5</b> Wrapping quoting functions</a><ul>
<li class="chapter" data-level="20.5.1" data-path="evaluation.html"><a href="evaluation.html#tidy-evaluation-1"><i class="fa fa-check"></i><b>20.5.1</b> Tidy evaluation</a></li>
<li class="chapter" data-level="20.5.2" data-path="evaluation.html"><a href="evaluation.html#base-r-1"><i class="fa fa-check"></i><b>20.5.2</b> Base R</a></li>
<li class="chapter" data-level="20.5.3" data-path="evaluation.html"><a href="evaluation.html#the-evaluation-environment"><i class="fa fa-check"></i><b>20.5.3</b> The evaluation environment</a></li>
<li class="chapter" data-level="20.5.4" data-path="evaluation.html"><a href="evaluation.html#making-formulas"><i class="fa fa-check"></i><b>20.5.4</b> Making formulas</a></li>
<li class="chapter" data-level="20.5.5" data-path="evaluation.html"><a href="evaluation.html#exercises-65"><i class="fa fa-check"></i><b>20.5.5</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="translation.html"><a href="translation.html"><i class="fa fa-check"></i><b>21</b> Translating R code</a><ul>
<li class="chapter" data-level="21.1" data-path="translation.html"><a href="translation.html#introduction-18"><i class="fa fa-check"></i><b>21.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="translation.html"><a href="translation.html#outline-16"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="translation.html"><a href="translation.html#prequisites-1"><i class="fa fa-check"></i>Prequisites</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="translation.html"><a href="translation.html#html"><i class="fa fa-check"></i><b>21.2</b> HTML</a><ul>
<li class="chapter" data-level="21.2.1" data-path="translation.html"><a href="translation.html#goal"><i class="fa fa-check"></i><b>21.2.1</b> Goal</a></li>
<li class="chapter" data-level="21.2.2" data-path="translation.html"><a href="translation.html#escaping"><i class="fa fa-check"></i><b>21.2.2</b> Escaping</a></li>
<li class="chapter" data-level="21.2.3" data-path="translation.html"><a href="translation.html#basic-tag-functions"><i class="fa fa-check"></i><b>21.2.3</b> Basic tag functions</a></li>
<li class="chapter" data-level="21.2.4" data-path="translation.html"><a href="translation.html#tag-functions"><i class="fa fa-check"></i><b>21.2.4</b> Tag functions</a></li>
<li class="chapter" data-level="21.2.5" data-path="translation.html"><a href="translation.html#processing-all-tags"><i class="fa fa-check"></i><b>21.2.5</b> Processing all tags</a></li>
<li class="chapter" data-level="21.2.6" data-path="translation.html"><a href="translation.html#exercises-66"><i class="fa fa-check"></i><b>21.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="translation.html"><a href="translation.html#latex"><i class="fa fa-check"></i><b>21.3</b> LaTeX</a><ul>
<li class="chapter" data-level="21.3.1" data-path="translation.html"><a href="translation.html#latex-mathematics"><i class="fa fa-check"></i><b>21.3.1</b> LaTeX mathematics</a></li>
<li class="chapter" data-level="21.3.2" data-path="translation.html"><a href="translation.html#goal-1"><i class="fa fa-check"></i><b>21.3.2</b> Goal</a></li>
<li class="chapter" data-level="21.3.3" data-path="translation.html"><a href="translation.html#to_math"><i class="fa fa-check"></i><b>21.3.3</b> <code>to_math</code></a></li>
<li class="chapter" data-level="21.3.4" data-path="translation.html"><a href="translation.html#known-symbols"><i class="fa fa-check"></i><b>21.3.4</b> Known symbols</a></li>
<li class="chapter" data-level="21.3.5" data-path="translation.html"><a href="translation.html#unknown-symbols"><i class="fa fa-check"></i><b>21.3.5</b> Unknown symbols</a></li>
<li class="chapter" data-level="21.3.6" data-path="translation.html"><a href="translation.html#known-functions"><i class="fa fa-check"></i><b>21.3.6</b> Known functions</a></li>
<li class="chapter" data-level="21.3.7" data-path="translation.html"><a href="translation.html#unknown-functions"><i class="fa fa-check"></i><b>21.3.7</b> Unknown functions</a></li>
<li class="chapter" data-level="21.3.8" data-path="translation.html"><a href="translation.html#exercises-67"><i class="fa fa-check"></i><b>21.3.8</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Techniques</b></span></li>
<li class="chapter" data-level="22" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>22</b> Debugging</a><ul>
<li class="chapter" data-level="22.1" data-path="debugging.html"><a href="debugging.html#introduction-19"><i class="fa fa-check"></i><b>22.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="debugging.html"><a href="debugging.html#outline-17"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="debugging.html"><a href="debugging.html#debugging-techniques"><i class="fa fa-check"></i><b>22.2</b> Techniques</a></li>
<li class="chapter" data-level="22.3" data-path="debugging.html"><a href="debugging.html#debugging-tools"><i class="fa fa-check"></i><b>22.3</b> Tools</a><ul>
<li class="chapter" data-level="22.3.1" data-path="debugging.html"><a href="debugging.html#determining-the-sequence-of-calls"><i class="fa fa-check"></i><b>22.3.1</b> Determining the sequence of calls</a></li>
<li class="chapter" data-level="22.3.2" data-path="debugging.html"><a href="debugging.html#browsing-on-error"><i class="fa fa-check"></i><b>22.3.2</b> Browsing on error</a></li>
<li class="chapter" data-level="22.3.3" data-path="debugging.html"><a href="debugging.html#browsing-arbitrary-code"><i class="fa fa-check"></i><b>22.3.3</b> Browsing arbitrary code</a></li>
<li class="chapter" data-level="22.3.4" data-path="debugging.html"><a href="debugging.html#the-call-stack-traceback-where-and-recover"><i class="fa fa-check"></i><b>22.3.4</b> The call stack: <code>traceback()</code>, <code>where</code>, and <code>recover()</code></a></li>
<li class="chapter" data-level="22.3.5" data-path="debugging.html"><a href="debugging.html#other-types-of-failure"><i class="fa fa-check"></i><b>22.3.5</b> Other types of failure</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>23</b> Performance</a><ul>
<li class="chapter" data-level="23.1" data-path="performance.html"><a href="performance.html#why-is-r-slow"><i class="fa fa-check"></i><b>23.1</b> Why is R slow?</a></li>
<li class="chapter" data-level="23.2" data-path="performance.html"><a href="performance.html#microbenchmarking"><i class="fa fa-check"></i><b>23.2</b> Microbenchmarking</a><ul>
<li class="chapter" data-level="23.2.1" data-path="performance.html"><a href="performance.html#exercises-68"><i class="fa fa-check"></i><b>23.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23.3" data-path="performance.html"><a href="performance.html#language-performance"><i class="fa fa-check"></i><b>23.3</b> Language performance</a><ul>
<li class="chapter" data-level="23.3.1" data-path="performance.html"><a href="performance.html#extreme-dynamism"><i class="fa fa-check"></i><b>23.3.1</b> Extreme dynamism</a></li>
<li class="chapter" data-level="23.3.2" data-path="performance.html"><a href="performance.html#name-lookup-with-mutable-environments"><i class="fa fa-check"></i><b>23.3.2</b> Name lookup with mutable environments</a></li>
<li class="chapter" data-level="23.3.3" data-path="performance.html"><a href="performance.html#lazy-evaluation-overhead"><i class="fa fa-check"></i><b>23.3.3</b> Lazy evaluation overhead</a></li>
<li class="chapter" data-level="23.3.4" data-path="performance.html"><a href="performance.html#exercises-69"><i class="fa fa-check"></i><b>23.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23.4" data-path="performance.html"><a href="performance.html#implementation-performance"><i class="fa fa-check"></i><b>23.4</b> Implementation performance</a><ul>
<li class="chapter" data-level="23.4.1" data-path="performance.html"><a href="performance.html#extracting-a-single-value-from-a-data-frame"><i class="fa fa-check"></i><b>23.4.1</b> Extracting a single value from a data frame</a></li>
<li class="chapter" data-level="23.4.2" data-path="performance.html"><a href="performance.html#ifelse-pmin-and-pmax"><i class="fa fa-check"></i><b>23.4.2</b> <code>ifelse()</code>, <code>pmin()</code>, and <code>pmax()</code></a></li>
<li class="chapter" data-level="23.4.3" data-path="performance.html"><a href="performance.html#exercises-70"><i class="fa fa-check"></i><b>23.4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23.5" data-path="performance.html"><a href="performance.html#faster-r"><i class="fa fa-check"></i><b>23.5</b> Alternative R implementations</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="profiling.html"><a href="profiling.html"><i class="fa fa-check"></i><b>24</b> Optimising code</a><ul>
<li class="chapter" data-level="24.1" data-path="profiling.html"><a href="profiling.html#introduction-20"><i class="fa fa-check"></i><b>24.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="profiling.html"><a href="profiling.html#outline-18"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="profiling.html"><a href="profiling.html#prerequisites-11"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="profiling.html"><a href="profiling.html#measure-perf"><i class="fa fa-check"></i><b>24.2</b> Measuring performance</a><ul>
<li class="chapter" data-level="24.2.1" data-path="profiling.html"><a href="profiling.html#limitations"><i class="fa fa-check"></i><b>24.2.1</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="profiling.html"><a href="profiling.html#memory-profiling"><i class="fa fa-check"></i><b>24.3</b> Memory profiling with lineprof</a><ul>
<li class="chapter" data-level="24.3.1" data-path="profiling.html"><a href="profiling.html#exercises-71"><i class="fa fa-check"></i><b>24.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="profiling.html"><a href="profiling.html#improve-perf"><i class="fa fa-check"></i><b>24.4</b> Improving performance</a></li>
<li class="chapter" data-level="24.5" data-path="profiling.html"><a href="profiling.html#code-organisation"><i class="fa fa-check"></i><b>24.5</b> Code organisation</a></li>
<li class="chapter" data-level="24.6" data-path="profiling.html"><a href="profiling.html#already-solved"><i class="fa fa-check"></i><b>24.6</b> Has someone already solved the problem?</a><ul>
<li class="chapter" data-level="24.6.1" data-path="profiling.html"><a href="profiling.html#exercises-72"><i class="fa fa-check"></i><b>24.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.7" data-path="profiling.html"><a href="profiling.html#be-lazy"><i class="fa fa-check"></i><b>24.7</b> Do as little as possible</a><ul>
<li class="chapter" data-level="24.7.1" data-path="profiling.html"><a href="profiling.html#exercises-73"><i class="fa fa-check"></i><b>24.7.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.8" data-path="profiling.html"><a href="profiling.html#vectorise"><i class="fa fa-check"></i><b>24.8</b> Vectorise</a><ul>
<li class="chapter" data-level="24.8.1" data-path="profiling.html"><a href="profiling.html#exercises-74"><i class="fa fa-check"></i><b>24.8.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.9" data-path="profiling.html"><a href="profiling.html#avoid-copies"><i class="fa fa-check"></i><b>24.9</b> Avoid copies</a></li>
<li class="chapter" data-level="24.10" data-path="profiling.html"><a href="profiling.html#byte-code"><i class="fa fa-check"></i><b>24.10</b> Byte code compilation</a></li>
<li class="chapter" data-level="24.11" data-path="profiling.html"><a href="profiling.html#t-test"><i class="fa fa-check"></i><b>24.11</b> Case study: t-test</a></li>
<li class="chapter" data-level="24.12" data-path="profiling.html"><a href="profiling.html#parallelise"><i class="fa fa-check"></i><b>24.12</b> Parallelise</a></li>
<li class="chapter" data-level="24.13" data-path="profiling.html"><a href="profiling.html#more-techniques"><i class="fa fa-check"></i><b>24.13</b> Other techniques</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="rcpp.html"><a href="rcpp.html"><i class="fa fa-check"></i><b>25</b> Rewriting R code in C++</a><ul>
<li class="chapter" data-level="25.1" data-path="rcpp.html"><a href="rcpp.html#introduction-21"><i class="fa fa-check"></i><b>25.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="rcpp.html"><a href="rcpp.html#outline-19"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="rcpp.html"><a href="rcpp.html#prerequistes"><i class="fa fa-check"></i>Prerequistes</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro"><i class="fa fa-check"></i><b>25.2</b> Getting started with C++</a><ul>
<li class="chapter" data-level="25.2.1" data-path="rcpp.html"><a href="rcpp.html#no-inputs-scalar-output"><i class="fa fa-check"></i><b>25.2.1</b> No inputs, scalar output</a></li>
<li class="chapter" data-level="25.2.2" data-path="rcpp.html"><a href="rcpp.html#scalar-input-scalar-output"><i class="fa fa-check"></i><b>25.2.2</b> Scalar input, scalar output</a></li>
<li class="chapter" data-level="25.2.3" data-path="rcpp.html"><a href="rcpp.html#vector-input-scalar-output"><i class="fa fa-check"></i><b>25.2.3</b> Vector input, scalar output</a></li>
<li class="chapter" data-level="25.2.4" data-path="rcpp.html"><a href="rcpp.html#vector-input-vector-output"><i class="fa fa-check"></i><b>25.2.4</b> Vector input, vector output</a></li>
<li class="chapter" data-level="25.2.5" data-path="rcpp.html"><a href="rcpp.html#matrix-input-vector-output"><i class="fa fa-check"></i><b>25.2.5</b> Matrix input, vector output</a></li>
<li class="chapter" data-level="25.2.6" data-path="rcpp.html"><a href="rcpp.html#sourceCpp"><i class="fa fa-check"></i><b>25.2.6</b> Using sourceCpp</a></li>
<li class="chapter" data-level="25.2.7" data-path="rcpp.html"><a href="rcpp.html#exercises-75"><i class="fa fa-check"></i><b>25.2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="rcpp.html"><a href="rcpp.html#rcpp-classes"><i class="fa fa-check"></i><b>25.3</b> Attributes and other classes</a><ul>
<li class="chapter" data-level="25.3.1" data-path="rcpp.html"><a href="rcpp.html#lists-and-data-frames"><i class="fa fa-check"></i><b>25.3.1</b> Lists and data frames</a></li>
<li class="chapter" data-level="25.3.2" data-path="rcpp.html"><a href="rcpp.html#functions-rcpp"><i class="fa fa-check"></i><b>25.3.2</b> Functions</a></li>
<li class="chapter" data-level="25.3.3" data-path="rcpp.html"><a href="rcpp.html#other-types"><i class="fa fa-check"></i><b>25.3.3</b> Other types</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="rcpp.html"><a href="rcpp.html#rcpp-na"><i class="fa fa-check"></i><b>25.4</b> Missing values</a><ul>
<li class="chapter" data-level="25.4.1" data-path="rcpp.html"><a href="rcpp.html#scalars-1"><i class="fa fa-check"></i><b>25.4.1</b> Scalars</a></li>
<li class="chapter" data-level="25.4.2" data-path="rcpp.html"><a href="rcpp.html#strings"><i class="fa fa-check"></i><b>25.4.2</b> Strings</a></li>
<li class="chapter" data-level="25.4.3" data-path="rcpp.html"><a href="rcpp.html#boolean"><i class="fa fa-check"></i><b>25.4.3</b> Boolean</a></li>
<li class="chapter" data-level="25.4.4" data-path="rcpp.html"><a href="rcpp.html#vectors-rcpp"><i class="fa fa-check"></i><b>25.4.4</b> Vectors</a></li>
<li class="chapter" data-level="25.4.5" data-path="rcpp.html"><a href="rcpp.html#exercises-76"><i class="fa fa-check"></i><b>25.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="rcpp.html"><a href="rcpp.html#rcpp-sugar"><i class="fa fa-check"></i><b>25.5</b> Rcpp sugar</a><ul>
<li class="chapter" data-level="25.5.1" data-path="rcpp.html"><a href="rcpp.html#arithmetic-and-logical-operators"><i class="fa fa-check"></i><b>25.5.1</b> Arithmetic and logical operators</a></li>
<li class="chapter" data-level="25.5.2" data-path="rcpp.html"><a href="rcpp.html#logical-summary-functions"><i class="fa fa-check"></i><b>25.5.2</b> Logical summary functions</a></li>
<li class="chapter" data-level="25.5.3" data-path="rcpp.html"><a href="rcpp.html#vector-views"><i class="fa fa-check"></i><b>25.5.3</b> Vector views</a></li>
<li class="chapter" data-level="25.5.4" data-path="rcpp.html"><a href="rcpp.html#other-useful-functions"><i class="fa fa-check"></i><b>25.5.4</b> Other useful functions</a></li>
</ul></li>
<li class="chapter" data-level="25.6" data-path="rcpp.html"><a href="rcpp.html#stl"><i class="fa fa-check"></i><b>25.6</b> The STL</a><ul>
<li class="chapter" data-level="25.6.1" data-path="rcpp.html"><a href="rcpp.html#using-iterators"><i class="fa fa-check"></i><b>25.6.1</b> Using iterators</a></li>
<li class="chapter" data-level="25.6.2" data-path="rcpp.html"><a href="rcpp.html#algorithms"><i class="fa fa-check"></i><b>25.6.2</b> Algorithms</a></li>
<li class="chapter" data-level="25.6.3" data-path="rcpp.html"><a href="rcpp.html#data-structures-rcpp"><i class="fa fa-check"></i><b>25.6.3</b> Data structures</a></li>
<li class="chapter" data-level="25.6.4" data-path="rcpp.html"><a href="rcpp.html#vectors-stl"><i class="fa fa-check"></i><b>25.6.4</b> Vectors</a></li>
<li class="chapter" data-level="25.6.5" data-path="rcpp.html"><a href="rcpp.html#sets"><i class="fa fa-check"></i><b>25.6.5</b> Sets</a></li>
<li class="chapter" data-level="25.6.6" data-path="rcpp.html"><a href="rcpp.html#map-1"><i class="fa fa-check"></i><b>25.6.6</b> Map</a></li>
<li class="chapter" data-level="25.6.7" data-path="rcpp.html"><a href="rcpp.html#exercises-77"><i class="fa fa-check"></i><b>25.6.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.7" data-path="rcpp.html"><a href="rcpp.html#rcpp-case-studies"><i class="fa fa-check"></i><b>25.7</b> Case studies</a><ul>
<li class="chapter" data-level="25.7.1" data-path="rcpp.html"><a href="rcpp.html#gibbs-sampler"><i class="fa fa-check"></i><b>25.7.1</b> Gibbs sampler</a></li>
<li class="chapter" data-level="25.7.2" data-path="rcpp.html"><a href="rcpp.html#r-vectorisation-vs.c-vectorisation"><i class="fa fa-check"></i><b>25.7.2</b> R vectorisation vs. C++ vectorisation</a></li>
</ul></li>
<li class="chapter" data-level="25.8" data-path="rcpp.html"><a href="rcpp.html#rcpp-package"><i class="fa fa-check"></i><b>25.8</b> Using Rcpp in a package</a></li>
<li class="chapter" data-level="25.9" data-path="rcpp.html"><a href="rcpp.html#rcpp-more"><i class="fa fa-check"></i><b>25.9</b> Learning more</a></li>
<li class="chapter" data-level="25.10" data-path="rcpp.html"><a href="rcpp.html#acknowledgments"><i class="fa fa-check"></i><b>25.10</b> Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="subsetting" class="section level1">
<h1><span class="header-section-number">5</span> Subsetting</h1>
<div id="introduction-3" class="section level2">
<h2><span class="header-section-number">5.1</span> Introduction</h2>
<p></p>
<p>R’s subsetting operators are powerful and fast. Mastery of subsetting allows you to succinctly express complex operations in a way that few other languages can match. Subsetting is easy to learn but hard to master because you need to internalise a number of interrelated concepts:</p>
<ul>
<li><p>The six types of thing that you can subset with.</p></li>
<li><p>The three subsetting operators, <code>[[</code>, <code>[</code>, and <code>$</code>.</p></li>
<li><p>How the subsetting operators interact with vector types (e.g.,
atomic vectors, lists, factors, matrices, and data frames).</p></li>
<li><p>The use of subsetting together with assignment.</p></li>
</ul>
<p>This chapter helps you master subsetting by starting with the simplest type of subsetting: subsetting an atomic vector with <code>[</code>. It then gradually extends your knowledge, first to more complicated data types (like arrays and lists), and then to the other subsetting operators, <code>[[</code> and <code>$</code>. You’ll then learn how subsetting and assignment can be combined to modify parts of an object, and, finally, you’ll see a large number of useful applications.</p>
<p>Subsetting is a natural complement to <code>str()</code>. <code>str()</code> shows you the structure of any object, and subsetting allows you to pull out the pieces that you’re interested in. For large, complex objects, I also highly recommend the interactive RStudio Viewer, which you can activate with <code>View(my_object)</code>.</p>
<div id="quiz-2" class="section level3 unnumbered">
<h3>Quiz</h3>
<p>Take this short quiz to determine if you need to read this chapter. If the answers quickly come to mind, you can comfortably skip this chapter. Check your answers in Section <a href="subsetting.html#subsetting-answers">5.6</a>.</p>
<ol style="list-style-type: decimal">
<li><p>What is the result of subsetting a vector with positive integers,
negative integers, a logical vector, or a character vector?</p></li>
<li><p>What’s the difference between <code>[</code>, <code>[[</code>, and <code>$</code> when applied to a list?</p></li>
<li><p>When should you use <code>drop = FALSE</code>?</p></li>
<li><p>If <code>x</code> is a matrix, what does <code>x[] &lt;- 0</code> do? How is it different to
<code>x &lt;- 0</code>?</p></li>
<li><p>How can you use a named vector to relabel categorical variables?</p></li>
</ol>
</div>
<div id="outline-2" class="section level3 unnumbered">
<h3>Outline</h3>
<ul>
<li><p>Section <a href="subsetting.html#subset-multiple">5.2</a> starts by teaching you about <code>[</code>. You’ll start
by learning the six types of data that you can use to subset atomic vectors.
You’ll then learn how those six data types act when used to subset lists,
matrices, and data frames.</p></li>
<li><p>Section <a href="subsetting.html#subset-single">5.3</a> expands your knowledge of
subsetting operators to include <code>[[</code> and <code>$</code>, focussing on the important
principles of simplifying vs. preserving.</p></li>
<li><p>In Section <a href="subsetting.html#subassignment">5.4</a> you’ll learn the
art of subassignment, combining subsetting and assignment to modify parts
of an object.</p></li>
<li><p>Section <a href="subsetting.html#applications">5.5</a> leads you through eight important, but
not obvious, applications of subsetting to solve problems that you
often encounter in a data analysis.</p></li>
</ul>
</div>
</div>
<div id="subset-multiple" class="section level2">
<h2><span class="header-section-number">5.2</span> Selecting multiple elements</h2>
<p>It’s easiest to learn how subsetting works for atomic vectors, and then how it generalises to higher dimensions and other more complicated objects. We’ll start with <code>[</code>, the most commonly used operator which allows you to extract any number of elements. Section <a href="subsetting.html#subset-single">5.3</a> will cover <code>[[</code> and <code>$</code>, used to extra a single element from a data structure.</p>
<div id="atomic-vectors-1" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Atomic vectors</h3>
<p>

</p>
<p>Let’s explore the different types of subsetting with a simple vector, <code>x</code>.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">2.1</span>, <span class="fl">4.2</span>, <span class="fl">3.3</span>, <span class="fl">5.4</span>)</a></code></pre></div>
<p>Note that the number after the decimal point gives the original position in the vector.</p>
<p>There are six things that you can use to subset a vector:</p>
<ul>
<li><p><strong>Positive integers</strong> return elements at the specified positions:
</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1">x[<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb105-2" data-line-number="2"><span class="co">#&gt; [1] 3.3 2.1</span></a>
<a class="sourceLine" id="cb105-3" data-line-number="3">x[<span class="kw">order</span>(x)]</a>
<a class="sourceLine" id="cb105-4" data-line-number="4"><span class="co">#&gt; [1] 2.1 3.3 4.2 5.4</span></a>
<a class="sourceLine" id="cb105-5" data-line-number="5"></a>
<a class="sourceLine" id="cb105-6" data-line-number="6"><span class="co"># Duplicated indices yield duplicated values</span></a>
<a class="sourceLine" id="cb105-7" data-line-number="7">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb105-8" data-line-number="8"><span class="co">#&gt; [1] 2.1 2.1</span></a>
<a class="sourceLine" id="cb105-9" data-line-number="9"></a>
<a class="sourceLine" id="cb105-10" data-line-number="10"><span class="co"># Real numbers are silently truncated to integers</span></a>
<a class="sourceLine" id="cb105-11" data-line-number="11">x[<span class="kw">c</span>(<span class="fl">2.1</span>, <span class="fl">2.9</span>)]</a>
<a class="sourceLine" id="cb105-12" data-line-number="12"><span class="co">#&gt; [1] 4.2 4.2</span></a></code></pre></div></li>
<li><p><strong>Negative integers</strong> omit elements at the specified positions:
</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1">x[<span class="op">-</span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb106-2" data-line-number="2"><span class="co">#&gt; [1] 4.2 5.4</span></a></code></pre></div>
<p>You can’t mix positive and negative integers in a single subset:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1">x[<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">2</span>)]</a>
<a class="sourceLine" id="cb107-2" data-line-number="2"><span class="co">#&gt; Error in x[c(-1, 2)]:</span></a>
<a class="sourceLine" id="cb107-3" data-line-number="3"><span class="co">#&gt;   only 0&#39;s may be mixed with negative subscripts</span></a></code></pre></div></li>
<li><p><strong>Logical vectors</strong> select elements where the corresponding logical
value is <code>TRUE</code>. This is probably the most useful type of subsetting
because you can write an expression that creates the logical vector:
</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1">x[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>)]</a>
<a class="sourceLine" id="cb108-2" data-line-number="2"><span class="co">#&gt; [1] 2.1 4.2</span></a>
<a class="sourceLine" id="cb108-3" data-line-number="3">x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb108-4" data-line-number="4"><span class="co">#&gt; [1] 4.2 3.3 5.4</span></a></code></pre></div>
<p>If the logical vector is shorter than the vector being subsetted, it
will be silently <strong>recycled</strong> to be the same length.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1">x[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)]</a>
<a class="sourceLine" id="cb109-2" data-line-number="2"><span class="co">#&gt; [1] 2.1 3.3</span></a>
<a class="sourceLine" id="cb109-3" data-line-number="3"><span class="co"># Equivalent to</span></a>
<a class="sourceLine" id="cb109-4" data-line-number="4">x[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)]</a>
<a class="sourceLine" id="cb109-5" data-line-number="5"><span class="co">#&gt; [1] 2.1 3.3</span></a></code></pre></div>
<p>A missing value in the index always yields a missing value in the output:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1">x[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">NA</span>, <span class="ot">FALSE</span>)]</a>
<a class="sourceLine" id="cb110-2" data-line-number="2"><span class="co">#&gt; [1] 2.1 4.2  NA</span></a></code></pre></div></li>
<li><p><strong>Nothing</strong> returns the original vector. This is not useful for 1d vectors,
as you’ll see shortly, is very useful for matrices, data frames, and arrays.
It can also be useful in conjunction with assignment.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1">x[]</a>
<a class="sourceLine" id="cb111-2" data-line-number="2"><span class="co">#&gt; [1] 2.1 4.2 3.3 5.4</span></a></code></pre></div></li>
<li><p><strong>Zero</strong> returns a zero-length vector. This is not something you
usually do on purpose, but it can be helpful for generating test data.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1">x[<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb112-2" data-line-number="2"><span class="co">#&gt; numeric(0)</span></a></code></pre></div></li>
<li><p>If the vector is named, you can also use <strong>character vectors</strong> to return<br />
elements with matching names.
</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1">(y &lt;-<span class="st"> </span><span class="kw">setNames</span>(x, letters[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]))</a>
<a class="sourceLine" id="cb113-2" data-line-number="2"><span class="co">#&gt;   a   b   c   d </span></a>
<a class="sourceLine" id="cb113-3" data-line-number="3"><span class="co">#&gt; 2.1 4.2 3.3 5.4</span></a>
<a class="sourceLine" id="cb113-4" data-line-number="4">y[<span class="kw">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;a&quot;</span>)]</a>
<a class="sourceLine" id="cb113-5" data-line-number="5"><span class="co">#&gt;   d   c   a </span></a>
<a class="sourceLine" id="cb113-6" data-line-number="6"><span class="co">#&gt; 5.4 3.3 2.1</span></a>
<a class="sourceLine" id="cb113-7" data-line-number="7"></a>
<a class="sourceLine" id="cb113-8" data-line-number="8"><span class="co"># Like integer indices, you can repeat indices</span></a>
<a class="sourceLine" id="cb113-9" data-line-number="9">y[<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;a&quot;</span>)]</a>
<a class="sourceLine" id="cb113-10" data-line-number="10"><span class="co">#&gt;   a   a   a </span></a>
<a class="sourceLine" id="cb113-11" data-line-number="11"><span class="co">#&gt; 2.1 2.1 2.1</span></a>
<a class="sourceLine" id="cb113-12" data-line-number="12"></a>
<a class="sourceLine" id="cb113-13" data-line-number="13"><span class="co"># When subsetting with [, names are always matched exactly</span></a>
<a class="sourceLine" id="cb113-14" data-line-number="14">z &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">abc =</span> <span class="dv">1</span>, <span class="dt">def =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb113-15" data-line-number="15">z[<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;d&quot;</span>)]</a>
<a class="sourceLine" id="cb113-16" data-line-number="16"><span class="co">#&gt; &lt;NA&gt; &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb113-17" data-line-number="17"><span class="co">#&gt;   NA   NA</span></a></code></pre></div></li>
</ul>
</div>
<div id="lists-1" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Lists</h3>
<p>
</p>
<p>Subsetting a list works in the same way as subsetting an atomic vector. Using <code>[</code> will always return a list; <code>[[</code> and <code>$</code>, as described in Section <a href="subsetting.html#subset-single">5.3</a>, let you pull out the components of the list.</p>
</div>
<div id="matrix-subsetting" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Matrices and arrays</h3>
<p>
</p>
<p>You can subset higher-dimensional structures in three ways:</p>
<ul>
<li>With multiple vectors.</li>
<li>With a single vector.</li>
<li>With a matrix.</li>
</ul>
<p>The most common way of subsetting matrices (2d) and arrays (&gt;2d) is a simple generalisation of 1d subsetting: you supply a 1d index for each dimension, separated by a comma. Blank subsetting is now useful because it lets you keep all rows or all columns.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb114-2" data-line-number="2"><span class="kw">colnames</span>(a) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)</a>
<a class="sourceLine" id="cb114-3" data-line-number="3">a[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ]</a>
<a class="sourceLine" id="cb114-4" data-line-number="4"><span class="co">#&gt;      A B C</span></a>
<a class="sourceLine" id="cb114-5" data-line-number="5"><span class="co">#&gt; [1,] 1 4 7</span></a>
<a class="sourceLine" id="cb114-6" data-line-number="6"><span class="co">#&gt; [2,] 2 5 8</span></a>
<a class="sourceLine" id="cb114-7" data-line-number="7">a[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>), <span class="kw">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>)]</a>
<a class="sourceLine" id="cb114-8" data-line-number="8"><span class="co">#&gt;      B A</span></a>
<a class="sourceLine" id="cb114-9" data-line-number="9"><span class="co">#&gt; [1,] 4 1</span></a>
<a class="sourceLine" id="cb114-10" data-line-number="10"><span class="co">#&gt; [2,] 6 3</span></a>
<a class="sourceLine" id="cb114-11" data-line-number="11">a[<span class="dv">0</span>, <span class="dv">-2</span>]</a>
<a class="sourceLine" id="cb114-12" data-line-number="12"><span class="co">#&gt;      A C</span></a></code></pre></div>
<p>By default, <code>[</code> will simplify the results to the lowest possible dimensionality. You’ll learn how to avoid this in Section <a href="subsetting.html#simplify-preserve">5.2.5</a>.</p>
<p>Because matrices and arrays are just vectors with special attributes, you can subset them with a single vector, as if they were a 1d vector. Arrays in R are stored in column-major order:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1">vals &lt;-<span class="st"> </span><span class="kw">outer</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">FUN =</span> <span class="st">&quot;paste&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>)</a>
<a class="sourceLine" id="cb115-2" data-line-number="2">vals</a>
<a class="sourceLine" id="cb115-3" data-line-number="3"><span class="co">#&gt;      [,1]  [,2]  [,3]  [,4]  [,5] </span></a>
<a class="sourceLine" id="cb115-4" data-line-number="4"><span class="co">#&gt; [1,] &quot;1,1&quot; &quot;1,2&quot; &quot;1,3&quot; &quot;1,4&quot; &quot;1,5&quot;</span></a>
<a class="sourceLine" id="cb115-5" data-line-number="5"><span class="co">#&gt; [2,] &quot;2,1&quot; &quot;2,2&quot; &quot;2,3&quot; &quot;2,4&quot; &quot;2,5&quot;</span></a>
<a class="sourceLine" id="cb115-6" data-line-number="6"><span class="co">#&gt; [3,] &quot;3,1&quot; &quot;3,2&quot; &quot;3,3&quot; &quot;3,4&quot; &quot;3,5&quot;</span></a>
<a class="sourceLine" id="cb115-7" data-line-number="7"><span class="co">#&gt; [4,] &quot;4,1&quot; &quot;4,2&quot; &quot;4,3&quot; &quot;4,4&quot; &quot;4,5&quot;</span></a>
<a class="sourceLine" id="cb115-8" data-line-number="8"><span class="co">#&gt; [5,] &quot;5,1&quot; &quot;5,2&quot; &quot;5,3&quot; &quot;5,4&quot; &quot;5,5&quot;</span></a>
<a class="sourceLine" id="cb115-9" data-line-number="9"></a>
<a class="sourceLine" id="cb115-10" data-line-number="10">vals[<span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">15</span>)]</a>
<a class="sourceLine" id="cb115-11" data-line-number="11"><span class="co">#&gt; [1] &quot;4,1&quot; &quot;5,3&quot;</span></a></code></pre></div>
<p>You can also subset higher-dimensional data structures with an integer matrix (or, if named, a character matrix). Each row in the matrix specifies the location of one value, where each column corresponds to a dimension in the array being subsetted. This means that you use a 2 column matrix to subset a matrix, a 3 column matrix to subset a 3d array, and so on. The result is a vector of values:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1">select &lt;-<span class="st"> </span><span class="kw">rbind</span>(</a>
<a class="sourceLine" id="cb116-2" data-line-number="2">  <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb116-3" data-line-number="3">  <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb116-4" data-line-number="4">  <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb116-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb116-6" data-line-number="6">vals[select]</a>
<a class="sourceLine" id="cb116-7" data-line-number="7"><span class="co">#&gt; [1] &quot;1,1&quot; &quot;3,1&quot; &quot;2,4&quot;</span></a></code></pre></div>
</div>
<div id="df-subsetting" class="section level3">
<h3><span class="header-section-number">5.2.4</span> Data frames and tibbles</h3>
<p>
</p>
<p>Data frames possess the characteristics of both lists and matrices: if you subset with a single vector, they behave like lists; if you subset with two vectors, they behave like matrices.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">z =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb117-2" data-line-number="2"></a>
<a class="sourceLine" id="cb117-3" data-line-number="3">df[df<span class="op">$</span>x <span class="op">==</span><span class="st"> </span><span class="dv">2</span>, ]</a>
<a class="sourceLine" id="cb117-4" data-line-number="4"><span class="co">#&gt;   x y z</span></a>
<a class="sourceLine" id="cb117-5" data-line-number="5"><span class="co">#&gt; 2 2 2 b</span></a>
<a class="sourceLine" id="cb117-6" data-line-number="6">df[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), ]</a>
<a class="sourceLine" id="cb117-7" data-line-number="7"><span class="co">#&gt;   x y z</span></a>
<a class="sourceLine" id="cb117-8" data-line-number="8"><span class="co">#&gt; 1 1 3 a</span></a>
<a class="sourceLine" id="cb117-9" data-line-number="9"><span class="co">#&gt; 3 3 1 c</span></a>
<a class="sourceLine" id="cb117-10" data-line-number="10"></a>
<a class="sourceLine" id="cb117-11" data-line-number="11"><span class="co"># There are two ways to select columns from a data frame</span></a>
<a class="sourceLine" id="cb117-12" data-line-number="12"><span class="co"># Like a list, which</span></a>
<a class="sourceLine" id="cb117-13" data-line-number="13">df[<span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;z&quot;</span>)]</a>
<a class="sourceLine" id="cb117-14" data-line-number="14"><span class="co">#&gt;   x z</span></a>
<a class="sourceLine" id="cb117-15" data-line-number="15"><span class="co">#&gt; 1 1 a</span></a>
<a class="sourceLine" id="cb117-16" data-line-number="16"><span class="co">#&gt; 2 2 b</span></a>
<a class="sourceLine" id="cb117-17" data-line-number="17"><span class="co">#&gt; 3 3 c</span></a>
<a class="sourceLine" id="cb117-18" data-line-number="18"><span class="co"># Like a matrix</span></a>
<a class="sourceLine" id="cb117-19" data-line-number="19">df[, <span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;z&quot;</span>)]</a>
<a class="sourceLine" id="cb117-20" data-line-number="20"><span class="co">#&gt;   x z</span></a>
<a class="sourceLine" id="cb117-21" data-line-number="21"><span class="co">#&gt; 1 1 a</span></a>
<a class="sourceLine" id="cb117-22" data-line-number="22"><span class="co">#&gt; 2 2 b</span></a>
<a class="sourceLine" id="cb117-23" data-line-number="23"><span class="co">#&gt; 3 3 c</span></a>
<a class="sourceLine" id="cb117-24" data-line-number="24"></a>
<a class="sourceLine" id="cb117-25" data-line-number="25"><span class="co"># There&#39;s an important difference if you select a single </span></a>
<a class="sourceLine" id="cb117-26" data-line-number="26"><span class="co"># column: matrix subsetting simplifies by default, list </span></a>
<a class="sourceLine" id="cb117-27" data-line-number="27"><span class="co"># subsetting does not.</span></a>
<a class="sourceLine" id="cb117-28" data-line-number="28"><span class="kw">str</span>(df[<span class="st">&quot;x&quot;</span>])</a>
<a class="sourceLine" id="cb117-29" data-line-number="29"><span class="co">#&gt; &#39;data.frame&#39;:    3 obs. of  1 variable:</span></a>
<a class="sourceLine" id="cb117-30" data-line-number="30"><span class="co">#&gt;  $ x: int  1 2 3</span></a>
<a class="sourceLine" id="cb117-31" data-line-number="31"><span class="kw">str</span>(df[, <span class="st">&quot;x&quot;</span>])</a>
<a class="sourceLine" id="cb117-32" data-line-number="32"><span class="co">#&gt;  int [1:3] 1 2 3</span></a></code></pre></div>
<p>Subsetting a tibble with <code>[</code> always returns a tibble:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" data-line-number="1">df &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">z =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb118-2" data-line-number="2"></a>
<a class="sourceLine" id="cb118-3" data-line-number="3"><span class="kw">str</span>(df[<span class="st">&quot;x&quot;</span>])</a>
<a class="sourceLine" id="cb118-4" data-line-number="4"><span class="co">#&gt; Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    3 obs. of  1 variable:</span></a>
<a class="sourceLine" id="cb118-5" data-line-number="5"><span class="co">#&gt;  $ x: int  1 2 3</span></a>
<a class="sourceLine" id="cb118-6" data-line-number="6"><span class="kw">str</span>(df[, <span class="st">&quot;x&quot;</span>])</a>
<a class="sourceLine" id="cb118-7" data-line-number="7"><span class="co">#&gt; Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    3 obs. of  1 variable:</span></a>
<a class="sourceLine" id="cb118-8" data-line-number="8"><span class="co">#&gt;  $ x: int  1 2 3</span></a></code></pre></div>
</div>
<div id="simplify-preserve" class="section level3">
<h3><span class="header-section-number">5.2.5</span> Preserving dimensionality</h3>

<p>
</p>
<p>By default, any subsetting 2d data structures with a single number, single name, or a logical vector containing a single <code>TRUE</code> will simplify the returned output, i.e. it will return an object with lower dimensionality. To preserve the original dimensionality, you must use <code>drop = FALSE</code></p>
<ul>
<li><p>For matrices and arrays, any dimensions with length 1 will be dropped:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">nrow =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb119-2" data-line-number="2"><span class="kw">str</span>(a[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb119-3" data-line-number="3"><span class="co">#&gt;  int [1:2] 1 3</span></a>
<a class="sourceLine" id="cb119-4" data-line-number="4"></a>
<a class="sourceLine" id="cb119-5" data-line-number="5"><span class="kw">str</span>(a[<span class="dv">1</span>, , <span class="dt">drop =</span> <span class="ot">FALSE</span>])</a>
<a class="sourceLine" id="cb119-6" data-line-number="6"><span class="co">#&gt;  int [1, 1:2] 1 3</span></a></code></pre></div></li>
<li><p>Data frames with a single column will return just that column:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">b =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb120-2" data-line-number="2"><span class="kw">str</span>(df[, <span class="st">&quot;a&quot;</span>])</a>
<a class="sourceLine" id="cb120-3" data-line-number="3"><span class="co">#&gt;  int [1:2] 1 2</span></a>
<a class="sourceLine" id="cb120-4" data-line-number="4"></a>
<a class="sourceLine" id="cb120-5" data-line-number="5"><span class="kw">str</span>(df[, <span class="st">&quot;a&quot;</span>, <span class="dt">drop =</span> <span class="ot">FALSE</span>])</a>
<a class="sourceLine" id="cb120-6" data-line-number="6"><span class="co">#&gt; &#39;data.frame&#39;:    2 obs. of  1 variable:</span></a>
<a class="sourceLine" id="cb120-7" data-line-number="7"><span class="co">#&gt;  $ a: int  1 2</span></a></code></pre></div></li>
<li><p>Tibbles default to <code>drop = FALSE</code>, and <code>[</code> will never return a single
vector.</p></li>
</ul>
<p>The default <code>drop = TRUE</code> behaviour is a common source of bugs in functions: you check your code with a data frame or matrix with multiple columns, and it works. Six months later you (or someone else) uses it with a single column data frame and it fails with a mystifying error. When writing functions, get in the habit of always using <code>drop = FALSE</code> when subsetting a 2d object.</p>
<p>Factor subsetting also has a <code>drop</code> argument, but the meaning is rather different. It controls whether or not levels are preserved (not the dimensionality), and it defaults to <code>FALSE</code> (levels are preserved, not simplified by default). If you find you are using <code>drop = TRUE</code> a lot it’s often a sign that you should be using a character vector instead of a factor.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" data-line-number="1">z &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>))</a>
<a class="sourceLine" id="cb121-2" data-line-number="2">z[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb121-3" data-line-number="3"><span class="co">#&gt; [1] a</span></a>
<a class="sourceLine" id="cb121-4" data-line-number="4"><span class="co">#&gt; Levels: a b</span></a>
<a class="sourceLine" id="cb121-5" data-line-number="5">z[<span class="dv">1</span>, drop =<span class="st"> </span><span class="ot">TRUE</span>]</a>
<a class="sourceLine" id="cb121-6" data-line-number="6"><span class="co">#&gt; [1] a</span></a>
<a class="sourceLine" id="cb121-7" data-line-number="7"><span class="co">#&gt; Levels: a</span></a></code></pre></div>
</div>
<div id="exercises-9" class="section level3">
<h3><span class="header-section-number">5.2.6</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Fix each of the following common data frame subsetting errors:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" data-line-number="1">mtcars[mtcars<span class="op">$</span>cyl =<span class="st"> </span><span class="dv">4</span>, ]</a>
<a class="sourceLine" id="cb122-2" data-line-number="2">mtcars[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, ]</a>
<a class="sourceLine" id="cb122-3" data-line-number="3">mtcars[mtcars<span class="op">$</span>cyl <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span>]</a>
<a class="sourceLine" id="cb122-4" data-line-number="4">mtcars[mtcars<span class="op">$</span>cyl <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">|</span><span class="st"> </span><span class="dv">6</span>, ]</a></code></pre></div></li>
<li><p>Why does the following code yield five missing values? (Hint: why is
it different from <code>x[NA_real_]</code>?)</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb123-2" data-line-number="2">x[<span class="ot">NA</span>]</a>
<a class="sourceLine" id="cb123-3" data-line-number="3"><span class="co">#&gt; [1] NA NA NA NA NA</span></a></code></pre></div></li>
<li><p>What does <code>upper.tri()</code> return? How does subsetting a matrix with it
work? Do we need any additional subsetting rules to describe its behaviour?</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">outer</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">FUN =</span> <span class="st">&quot;*&quot;</span>)</a>
<a class="sourceLine" id="cb124-2" data-line-number="2">x[<span class="kw">upper.tri</span>(x)]</a></code></pre></div></li>
<li><p>Why does <code>mtcars[1:20]</code> return an error? How does it differ from the
similar <code>mtcars[1:20, ]</code>?</p></li>
<li><p>Implement your own function that extracts the diagonal entries from a
matrix (it should behave like <code>diag(x)</code> where <code>x</code> is a matrix).</p></li>
<li><p>What does <code>df[is.na(df)] &lt;- 0</code> do? How does it work?</p></li>
</ol>
</div>
</div>
<div id="subset-single" class="section level2">
<h2><span class="header-section-number">5.3</span> Selecting a single element</h2>
<p>
</p>
<p>There are two other subsetting operators: <code>[[</code> and <code>$</code>. <code>[[</code> is used for extracting single items, and <code>x$y</code> is a useful shorthand for <code>x[[&quot;y&quot;]]</code>.</p>
<div id="section" class="section level3">
<h3><span class="header-section-number">5.3.1</span> <code>[[</code></h3>

<p><code>[[</code> is most important working with lists because subsetting a list with <code>[</code> always returns a smaller list. To help make this easier to understand we can use a metaphor:</p>
<blockquote>
<p>“If list <code>x</code> is a train carrying objects, then <code>x[[5]]</code> is
the object in car 5; <code>x[4:6]</code> is a train of cars 4-6.”</p>
<p>— @RLangTip, <a href="https://twitter.com/RLangTip/status/268375867468681216" class="uri">https://twitter.com/RLangTip/status/268375867468681216</a></p>
</blockquote>
<p>Let’s make a simple list and draw it as a train:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="st">&quot;a&quot;</span>, <span class="dv">4</span><span class="op">:</span><span class="dv">6</span>)</a></code></pre></div>
<p><img src="diagrams/subsetting/train.png" style="display: block; margin: auto;" /></p>
<p>When extracting a single element, you have two options: you can create a smaller train, or you can extract the contents of a carriage. This is the difference between <code>[</code> and <code>[[</code>:</p>
<p><img src="diagrams/subsetting/train-single.png" style="display: block; margin: auto;" /></p>
<p>When extracting multiple elements (or zero!), you have to make a smaller train:</p>
<p><img src="diagrams/subsetting/train-multiple.png" style="display: block; margin: auto;" /></p>
<p>Because it can return only a single item, you must use <code>[[</code> with either a single positive integer or a string. If you use a vector with <code>[[</code>, it will subset recursively:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" data-line-number="1">b &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="kw">list</span>(<span class="dt">b =</span> <span class="kw">list</span>(<span class="dt">c =</span> <span class="kw">list</span>(<span class="dt">d =</span> <span class="dv">1</span>))))</a>
<a class="sourceLine" id="cb126-2" data-line-number="2">b[[<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)]]</a>
<a class="sourceLine" id="cb126-3" data-line-number="3"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb126-4" data-line-number="4"></a>
<a class="sourceLine" id="cb126-5" data-line-number="5"><span class="co"># Equivalent to</span></a>
<a class="sourceLine" id="cb126-6" data-line-number="6">b[[<span class="st">&quot;a&quot;</span>]][[<span class="st">&quot;b&quot;</span>]][[<span class="st">&quot;c&quot;</span>]][[<span class="st">&quot;d&quot;</span>]]</a>
<a class="sourceLine" id="cb126-7" data-line-number="7"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
<p><code>[[</code> is crucial for working with lists, but I recommend using it whenever you want your code to clearly express that it’s working with a single item. That frequently arises in for loops, e.g., instead of writing:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" data-line-number="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="kw">length</span>(x)) {</a>
<a class="sourceLine" id="cb127-2" data-line-number="2">  out[i] &lt;-<span class="st"> </span><span class="kw">fun</span>(x[i], out[i <span class="op">-</span><span class="st"> </span><span class="dv">1</span>])</a>
<a class="sourceLine" id="cb127-3" data-line-number="3">}</a></code></pre></div>
<p>It’s better to write:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="kw">length</span>(x)) {</a>
<a class="sourceLine" id="cb128-2" data-line-number="2">  out[[i]] &lt;-<span class="st"> </span><span class="kw">fun</span>(x[[i]], out[[i <span class="op">-</span><span class="st"> </span><span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb128-3" data-line-number="3">}</a></code></pre></div>
<p>That reinforces to the reader that you expect to get and set individual values.</p>
</div>
<div id="section-1" class="section level3">
<h3><span class="header-section-number">5.3.2</span> <code>$</code></h3>

<p><code>$</code> is a shorthand operator: <code>x$y</code> is roughly equivalent to <code>x[[&quot;y&quot;]]</code>. It’s often used to access variables in a data frame, as in <code>mtcars$cyl</code> or <code>diamonds$carat</code>. One common mistake with <code>$</code> is to use it when you have the name of a column stored in a variable:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" data-line-number="1">var &lt;-<span class="st"> &quot;cyl&quot;</span></a>
<a class="sourceLine" id="cb129-2" data-line-number="2"><span class="co"># Doesn&#39;t work - mtcars$var translated to mtcars[[&quot;var&quot;]]</span></a>
<a class="sourceLine" id="cb129-3" data-line-number="3">mtcars<span class="op">$</span>var</a>
<a class="sourceLine" id="cb129-4" data-line-number="4"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb129-5" data-line-number="5"></a>
<a class="sourceLine" id="cb129-6" data-line-number="6"><span class="co"># Instead use [[</span></a>
<a class="sourceLine" id="cb129-7" data-line-number="7">mtcars[[var]]</a>
<a class="sourceLine" id="cb129-8" data-line-number="8"><span class="co">#&gt;  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4</span></a></code></pre></div>
<p>There’s one important difference between <code>$</code> and <code>[[</code>. <code>$</code> does partial matching:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">abc =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb130-2" data-line-number="2">x<span class="op">$</span>a</a>
<a class="sourceLine" id="cb130-3" data-line-number="3"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb130-4" data-line-number="4">x[[<span class="st">&quot;a&quot;</span>]]</a>
<a class="sourceLine" id="cb130-5" data-line-number="5"><span class="co">#&gt; NULL</span></a></code></pre></div>
<p>To help avoid this behaviour I highly recommend setting the global option <code>warnPartialMatchDollar</code> to <code>TRUE</code>:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="kw">options</span>(<span class="dt">warnPartialMatchDollar =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb131-2" data-line-number="2">x<span class="op">$</span>a</a>
<a class="sourceLine" id="cb131-3" data-line-number="3"><span class="co">#&gt; Warning in x$a: partial match of &#39;a&#39; to &#39;abc&#39;</span></a>
<a class="sourceLine" id="cb131-4" data-line-number="4"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
<p>(For data frames, you can also avoid this problem by using tibbles instead: they never do partial matching.)</p>
</div>
<div id="missingout-of-bounds-indices" class="section level3">
<h3><span class="header-section-number">5.3.3</span> Missing/out of bounds indices</h3>
<p>
</p>
<p>It’s useful to understand what happens with <code>[</code> and <code>[[</code> when you use an “invalid” index. The following tables summarise what happen when you subset a logical vector, list, and <code>NULL</code> with an out-of-bounds value (OOB), a missing value (i.e <code>NA_integer_</code>), and a zero-length object (like <code>NULL</code> or <code>logical()</code>) with <code>[</code> and <code>[[</code>. Each cell shows the result of subsetting the data structure named in the row by the type of index described in the column. I’ve only shown the results for logical vectors, but other atomic vectors behave similarly, returning elements of the same type.</p>
<table>
<thead>
<tr class="header">
<th><code>row[col]</code></th>
<th>Zero-length</th>
<th>OOB</th>
<th>Missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
</tr>
<tr class="even">
<td>Logical</td>
<td><code>logical(0)</code></td>
<td><code>NA</code></td>
<td><code>NA</code></td>
</tr>
<tr class="odd">
<td>List</td>
<td><code>list()</code></td>
<td><code>list(NULL)</code></td>
<td><code>list(NULL)</code></td>
</tr>
</tbody>
</table>
<p>With <code>[</code>, it doesn’t matter whether the OOB index is a position or a name, but it does for <code>[[</code>:</p>
<table>
<thead>
<tr class="header">
<th><code>row[[col]]</code></th>
<th>Zero-length</th>
<th>OOB (int)</th>
<th>OOB (chr)</th>
<th>Missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
</tr>
<tr class="even">
<td>Atomic</td>
<td>Error</td>
<td>Error</td>
<td>Error</td>
<td>Error</td>
</tr>
<tr class="odd">
<td>List</td>
<td>Error</td>
<td>Error</td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
</tr>
</tbody>
</table>
<p>If the input vector is named, then the names of OOB, missing, or <code>NULL</code> components will be <code>&quot;&lt;NA&gt;&quot;</code>.</p>
<p>The inconsistency of the <code>[[</code> table above lead to the development of <code>purrr::pluck()</code> and <code>purrr::chuck()</code>. <code>pluck()</code> always returns <code>NULL</code> (or the value of the <code>.default</code> argument) when the element is missing; <code>chuck()</code> always throws an error:</p>
<table>
<thead>
<tr class="header">
<th><code>pluck(row, col)</code></th>
<th>Zero-length</th>
<th>OOB (int)</th>
<th>OOB (chr)</th>
<th>Missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
</tr>
<tr class="even">
<td>Atomic</td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
</tr>
<tr class="odd">
<td>List</td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
<td><code>NULL</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th><code>chuck(row, col)</code></th>
<th>Zero-length</th>
<th>OOB (int)</th>
<th>OOB (chr)</th>
<th>Missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>NULL</code></td>
<td>Error</td>
<td>Error</td>
<td>Error</td>
<td>Error</td>
</tr>
<tr class="even">
<td>Atomic</td>
<td>Error</td>
<td>Error</td>
<td>Error</td>
<td>Error</td>
</tr>
<tr class="odd">
<td>List</td>
<td>Error</td>
<td>Error</td>
<td>Error</td>
<td>Error</td>
</tr>
</tbody>
</table>
<p>The behaviour of <code>pluck()</code> makes it well suited for indexing into deeply nested data structures where the component you want does not exist always exist (as is common when working with JSON data from web APIs). <code>pluck()</code> also allows you to mingle integer and character indexes, and to provide an alternative default value if the item does not exist:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb132-2" data-line-number="2">  <span class="dt">a =</span> <span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb132-3" data-line-number="3">  <span class="dt">b =</span> <span class="kw">list</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb132-4" data-line-number="4">)</a>
<a class="sourceLine" id="cb132-5" data-line-number="5"></a>
<a class="sourceLine" id="cb132-6" data-line-number="6">purrr<span class="op">::</span><span class="kw">pluck</span>(x, <span class="st">&quot;a&quot;</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb132-7" data-line-number="7"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb132-8" data-line-number="8"></a>
<a class="sourceLine" id="cb132-9" data-line-number="9">purrr<span class="op">::</span><span class="kw">pluck</span>(x, <span class="st">&quot;c&quot;</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb132-10" data-line-number="10"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb132-11" data-line-number="11"></a>
<a class="sourceLine" id="cb132-12" data-line-number="12">purrr<span class="op">::</span><span class="kw">pluck</span>(x, <span class="st">&quot;c&quot;</span>, <span class="dv">1</span>, <span class="dt">.default =</span> <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb132-13" data-line-number="13"><span class="co">#&gt; [1] NA</span></a></code></pre></div>
</div>
<div id="and-slot" class="section level3">
<h3><span class="header-section-number">5.3.4</span> <code>@</code> and <code>slot()</code></h3>
<p>
</p>
<p>There are also two additional subsetting operators that are needed for S4 objects: <code>@</code> (equivalent to <code>$</code>), and <code>slot()</code> (equivalent to <code>[[</code>). <code>@</code> is more restrictive than <code>$</code> in that it will return an error if the slot does not exist. These are described in more detail in <a href="s4.html#s4">S4</a>.</p>
</div>
<div id="exercises-10" class="section level3">
<h3><span class="header-section-number">5.3.5</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Brainstorm as manys way as possible to extract the third value from the
<code>cyl</code> variable in the <code>mtcars</code> dataset.</p></li>
<li><p>Given a linear model, e.g., <code>mod &lt;- lm(mpg ~ wt, data = mtcars)</code>, extract
the residual degrees of freedom. Extract the R squared from the model
summary (<code>summary(mod)</code>)</p></li>
</ol>
<!-- FIXME: more examples -->
</div>
</div>
<div id="subassignment" class="section level2">
<h2><span class="header-section-number">5.4</span> Subsetting and assignment</h2>
<p>
</p>
<p>All subsetting operators can be combined with assignment to modify selected values of the input vector.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb133-2" data-line-number="2">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)] &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb133-3" data-line-number="3">x</a>
<a class="sourceLine" id="cb133-4" data-line-number="4"><span class="co">#&gt; [1] 2 3 3 4 5</span></a>
<a class="sourceLine" id="cb133-5" data-line-number="5"></a>
<a class="sourceLine" id="cb133-6" data-line-number="6"><span class="co"># The length of the LHS needs to match the RHS</span></a>
<a class="sourceLine" id="cb133-7" data-line-number="7">x[<span class="op">-</span><span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb133-8" data-line-number="8">x</a>
<a class="sourceLine" id="cb133-9" data-line-number="9"><span class="co">#&gt; [1] 2 4 3 2 1</span></a>
<a class="sourceLine" id="cb133-10" data-line-number="10"></a>
<a class="sourceLine" id="cb133-11" data-line-number="11"><span class="co"># Duplicated indices go unchecked and may be problematic</span></a>
<a class="sourceLine" id="cb133-12" data-line-number="12">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)] &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb133-13" data-line-number="13">x</a>
<a class="sourceLine" id="cb133-14" data-line-number="14"><span class="co">#&gt; [1] 3 4 3 2 1</span></a>
<a class="sourceLine" id="cb133-15" data-line-number="15"></a>
<a class="sourceLine" id="cb133-16" data-line-number="16"><span class="co"># You can&#39;t combine integer indices with NA</span></a>
<a class="sourceLine" id="cb133-17" data-line-number="17">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>)] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb133-18" data-line-number="18"><span class="co">#&gt; Error in x[c(1, NA)] &lt;- c(1, 2):</span></a>
<a class="sourceLine" id="cb133-19" data-line-number="19"><span class="co">#&gt;   NAs are not allowed in subscripted assignments</span></a>
<a class="sourceLine" id="cb133-20" data-line-number="20"></a>
<a class="sourceLine" id="cb133-21" data-line-number="21"><span class="co"># But you can combine logical indices with NA</span></a>
<a class="sourceLine" id="cb133-22" data-line-number="22"><span class="co"># (where they&#39;re treated as false).</span></a>
<a class="sourceLine" id="cb133-23" data-line-number="23">x[<span class="kw">c</span>(T, F, <span class="ot">NA</span>)] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb133-24" data-line-number="24">x</a>
<a class="sourceLine" id="cb133-25" data-line-number="25"><span class="co">#&gt; [1] 1 4 3 1 1</span></a>
<a class="sourceLine" id="cb133-26" data-line-number="26"></a>
<a class="sourceLine" id="cb133-27" data-line-number="27"><span class="co"># This is mostly useful when conditionally modifying vectors</span></a>
<a class="sourceLine" id="cb133-28" data-line-number="28">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb133-29" data-line-number="29">df<span class="op">$</span>a[df<span class="op">$</span>a <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb133-30" data-line-number="30">df<span class="op">$</span>a</a>
<a class="sourceLine" id="cb133-31" data-line-number="31"><span class="co">#&gt; [1]  0 10 NA</span></a></code></pre></div>
<p>Subsetting with nothing can be useful in conjunction with assignment because it will preserve the structure of the original object. Compare the following two expressions. In the first, <code>mtcars</code> will remain as a data frame. In the second, <code>mtcars</code> will become a list.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1">mtcars[] &lt;-<span class="st"> </span><span class="kw">lapply</span>(mtcars, as.integer)</a>
<a class="sourceLine" id="cb134-2" data-line-number="2">mtcars &lt;-<span class="st"> </span><span class="kw">lapply</span>(mtcars, as.integer)</a></code></pre></div>
<p>With lists, you can use <code>[[</code> + assignment + <code>NULL</code> to remove components from a list. To add a literal <code>NULL</code> to a list, use <code>[</code> and <code>list(NULL)</code>: </p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb135-2" data-line-number="2">x[[<span class="st">&quot;b&quot;</span>]] &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb135-3" data-line-number="3"><span class="kw">str</span>(x)</a>
<a class="sourceLine" id="cb135-4" data-line-number="4"><span class="co">#&gt; List of 1</span></a>
<a class="sourceLine" id="cb135-5" data-line-number="5"><span class="co">#&gt;  $ a: num 1</span></a>
<a class="sourceLine" id="cb135-6" data-line-number="6"></a>
<a class="sourceLine" id="cb135-7" data-line-number="7">y &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb135-8" data-line-number="8">y[<span class="st">&quot;b&quot;</span>] &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb135-9" data-line-number="9"><span class="kw">str</span>(y)</a>
<a class="sourceLine" id="cb135-10" data-line-number="10"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb135-11" data-line-number="11"><span class="co">#&gt;  $ a: num 1</span></a>
<a class="sourceLine" id="cb135-12" data-line-number="12"><span class="co">#&gt;  $ b: NULL</span></a></code></pre></div>
</div>
<div id="applications" class="section level2">
<h2><span class="header-section-number">5.5</span> Applications</h2>
<p>The basic principles described above give rise to a wide variety of useful applications. Some of the most important are described below. Many of these basic techniques are wrapped up into more concise functions (e.g., <code>subset()</code>, <code>merge()</code>, <code>dplyr::arrange()</code>), but it is useful to understand how they are implemented with basic subsetting. This will allow you to adapt to new situations not handled by existing functions.</p>
<div id="lookup-tables" class="section level3">
<h3><span class="header-section-number">5.5.1</span> Lookup tables (character subsetting)</h3>
<p></p>
<p>Character matching provides a powerful way to make lookup tables. Say you want to convert abbreviations:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;u&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>)</a>
<a class="sourceLine" id="cb136-2" data-line-number="2">lookup &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">m =</span> <span class="st">&quot;Male&quot;</span>, <span class="dt">f =</span> <span class="st">&quot;Female&quot;</span>, <span class="dt">u =</span> <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb136-3" data-line-number="3">lookup[x]</a>
<a class="sourceLine" id="cb136-4" data-line-number="4"><span class="co">#&gt;        m        f        u        f        f        m        m </span></a>
<a class="sourceLine" id="cb136-5" data-line-number="5"><span class="co">#&gt;   &quot;Male&quot; &quot;Female&quot;       NA &quot;Female&quot; &quot;Female&quot;   &quot;Male&quot;   &quot;Male&quot;</span></a>
<a class="sourceLine" id="cb136-6" data-line-number="6"></a>
<a class="sourceLine" id="cb136-7" data-line-number="7"><span class="kw">unname</span>(lookup[x])</a>
<a class="sourceLine" id="cb136-8" data-line-number="8"><span class="co">#&gt; [1] &quot;Male&quot;   &quot;Female&quot; NA       &quot;Female&quot; &quot;Female&quot; &quot;Male&quot;   &quot;Male&quot;</span></a></code></pre></div>
<p>If you don’t want names in the result, use <code>unname()</code> to remove them.</p>
</div>
<div id="matching-merging" class="section level3">
<h3><span class="header-section-number">5.5.2</span> Matching and merging by hand (integer subsetting)</h3>
<p>
</p>
<p>You may have a more complicated lookup table which has multiple columns of information. Suppose we have a vector of integer grades, and a table that describes their properties:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" data-line-number="1">grades &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb137-2" data-line-number="2"></a>
<a class="sourceLine" id="cb137-3" data-line-number="3">info &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb137-4" data-line-number="4">  <span class="dt">grade =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb137-5" data-line-number="5">  <span class="dt">desc =</span> <span class="kw">c</span>(<span class="st">&quot;Excellent&quot;</span>, <span class="st">&quot;Good&quot;</span>, <span class="st">&quot;Poor&quot;</span>),</a>
<a class="sourceLine" id="cb137-6" data-line-number="6">  <span class="dt">fail =</span> <span class="kw">c</span>(F, F, T)</a>
<a class="sourceLine" id="cb137-7" data-line-number="7">)</a></code></pre></div>
<p>We want to duplicate the info table so that we have a row for each value in <code>grades</code>. An elegant way to do this is by combining <code>match()</code> and integer subsetting:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1">id &lt;-<span class="st"> </span><span class="kw">match</span>(grades, info<span class="op">$</span>grade)</a>
<a class="sourceLine" id="cb138-2" data-line-number="2">info[id, ]</a>
<a class="sourceLine" id="cb138-3" data-line-number="3"><span class="co">#&gt;     grade      desc  fail</span></a>
<a class="sourceLine" id="cb138-4" data-line-number="4"><span class="co">#&gt; 3       1      Poor  TRUE</span></a>
<a class="sourceLine" id="cb138-5" data-line-number="5"><span class="co">#&gt; 2       2      Good FALSE</span></a>
<a class="sourceLine" id="cb138-6" data-line-number="6"><span class="co">#&gt; 2.1     2      Good FALSE</span></a>
<a class="sourceLine" id="cb138-7" data-line-number="7"><span class="co">#&gt; 1       3 Excellent FALSE</span></a>
<a class="sourceLine" id="cb138-8" data-line-number="8"><span class="co">#&gt; 3.1     1      Poor  TRUE</span></a></code></pre></div>
<p>If you have multiple columns to match on, you’ll need to first collapse them to a single column (with e.g. <code>interaction()</code>), but typically you are better off switching to a function design specifically for joining multiple tables like <code>merge()</code>, or <code>dplyr::left_join()</code>.</p>
</div>
<div id="random-samplesbootstraps-integer-subsetting" class="section level3">
<h3><span class="header-section-number">5.5.3</span> Random samples/bootstraps (integer subsetting)</h3>

<p>
</p>
<p>You can use integer indices to perform random sampling or bootstrapping of a vector or data frame. <code>sample()</code> generates a vector of indices, then subsetting accesses the values:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">y =</span> <span class="dv">5</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">z =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</a>
<a class="sourceLine" id="cb139-2" data-line-number="2"></a>
<a class="sourceLine" id="cb139-3" data-line-number="3"><span class="co"># Randomly reorder</span></a>
<a class="sourceLine" id="cb139-4" data-line-number="4">df[<span class="kw">sample</span>(<span class="kw">nrow</span>(df)), ]</a>
<a class="sourceLine" id="cb139-5" data-line-number="5"><span class="co">#&gt;   x y z</span></a>
<a class="sourceLine" id="cb139-6" data-line-number="6"><span class="co">#&gt; 1 1 5 a</span></a>
<a class="sourceLine" id="cb139-7" data-line-number="7"><span class="co">#&gt; 4 1 2 d</span></a>
<a class="sourceLine" id="cb139-8" data-line-number="8"><span class="co">#&gt; 2 2 4 b</span></a>
<a class="sourceLine" id="cb139-9" data-line-number="9"><span class="co">#&gt; 5 2 1 e</span></a>
<a class="sourceLine" id="cb139-10" data-line-number="10"><span class="co">#&gt; 3 3 3 c</span></a>
<a class="sourceLine" id="cb139-11" data-line-number="11"></a>
<a class="sourceLine" id="cb139-12" data-line-number="12"><span class="co"># Select 3 random rows</span></a>
<a class="sourceLine" id="cb139-13" data-line-number="13">df[<span class="kw">sample</span>(<span class="kw">nrow</span>(df), <span class="dv">3</span>), ]</a>
<a class="sourceLine" id="cb139-14" data-line-number="14"><span class="co">#&gt;   x y z</span></a>
<a class="sourceLine" id="cb139-15" data-line-number="15"><span class="co">#&gt; 3 3 3 c</span></a>
<a class="sourceLine" id="cb139-16" data-line-number="16"><span class="co">#&gt; 2 2 4 b</span></a>
<a class="sourceLine" id="cb139-17" data-line-number="17"><span class="co">#&gt; 1 1 5 a</span></a>
<a class="sourceLine" id="cb139-18" data-line-number="18"></a>
<a class="sourceLine" id="cb139-19" data-line-number="19"><span class="co"># Select 6 bootstrap replicates</span></a>
<a class="sourceLine" id="cb139-20" data-line-number="20">df[<span class="kw">sample</span>(<span class="kw">nrow</span>(df), <span class="dv">6</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), ]</a>
<a class="sourceLine" id="cb139-21" data-line-number="21"><span class="co">#&gt;     x y z</span></a>
<a class="sourceLine" id="cb139-22" data-line-number="22"><span class="co">#&gt; 4   1 2 d</span></a>
<a class="sourceLine" id="cb139-23" data-line-number="23"><span class="co">#&gt; 4.1 1 2 d</span></a>
<a class="sourceLine" id="cb139-24" data-line-number="24"><span class="co">#&gt; 5   2 1 e</span></a>
<a class="sourceLine" id="cb139-25" data-line-number="25"><span class="co">#&gt; 1   1 5 a</span></a>
<a class="sourceLine" id="cb139-26" data-line-number="26"><span class="co">#&gt; 1.1 1 5 a</span></a>
<a class="sourceLine" id="cb139-27" data-line-number="27"><span class="co">#&gt; 2   2 4 b</span></a></code></pre></div>
<p>The arguments of <code>sample()</code> control the number of samples to extract, and whether sampling is performed with or without replacement.</p>
</div>
<div id="ordering-integer-subsetting" class="section level3">
<h3><span class="header-section-number">5.5.4</span> Ordering (integer subsetting)</h3>
<p><code>order()</code> takes a vector as input and returns an integer vector describing how the subsetted vector should be ordered:  </p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;a&quot;</span>)</a>
<a class="sourceLine" id="cb140-2" data-line-number="2"><span class="kw">order</span>(x)</a>
<a class="sourceLine" id="cb140-3" data-line-number="3"><span class="co">#&gt; [1] 3 1 2</span></a>
<a class="sourceLine" id="cb140-4" data-line-number="4">x[<span class="kw">order</span>(x)]</a>
<a class="sourceLine" id="cb140-5" data-line-number="5"><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a></code></pre></div>
<p>To break ties, you can supply additional variables to <code>order()</code>, and you can change from ascending to descending order using <code>decreasing = TRUE</code>. By default, any missing values will be put at the end of the vector; however, you can remove them with <code>na.last = NA</code> or put at the front with <code>na.last = FALSE</code>.</p>
<p>For two or more dimensions, <code>order()</code> and integer subsetting makes it easy to order either the rows or columns of an object:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" data-line-number="1"><span class="co"># Randomly reorder df</span></a>
<a class="sourceLine" id="cb141-2" data-line-number="2">df2 &lt;-<span class="st"> </span>df[<span class="kw">sample</span>(<span class="kw">nrow</span>(df)), <span class="dv">3</span><span class="op">:</span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb141-3" data-line-number="3">df2</a>
<a class="sourceLine" id="cb141-4" data-line-number="4"><span class="co">#&gt;   z y x</span></a>
<a class="sourceLine" id="cb141-5" data-line-number="5"><span class="co">#&gt; 3 c 3 3</span></a>
<a class="sourceLine" id="cb141-6" data-line-number="6"><span class="co">#&gt; 1 a 5 1</span></a>
<a class="sourceLine" id="cb141-7" data-line-number="7"><span class="co">#&gt; 2 b 4 2</span></a>
<a class="sourceLine" id="cb141-8" data-line-number="8"><span class="co">#&gt; 4 d 2 1</span></a>
<a class="sourceLine" id="cb141-9" data-line-number="9"><span class="co">#&gt; 5 e 1 2</span></a>
<a class="sourceLine" id="cb141-10" data-line-number="10"></a>
<a class="sourceLine" id="cb141-11" data-line-number="11">df2[<span class="kw">order</span>(df2<span class="op">$</span>x), ]</a>
<a class="sourceLine" id="cb141-12" data-line-number="12"><span class="co">#&gt;   z y x</span></a>
<a class="sourceLine" id="cb141-13" data-line-number="13"><span class="co">#&gt; 1 a 5 1</span></a>
<a class="sourceLine" id="cb141-14" data-line-number="14"><span class="co">#&gt; 4 d 2 1</span></a>
<a class="sourceLine" id="cb141-15" data-line-number="15"><span class="co">#&gt; 2 b 4 2</span></a>
<a class="sourceLine" id="cb141-16" data-line-number="16"><span class="co">#&gt; 5 e 1 2</span></a>
<a class="sourceLine" id="cb141-17" data-line-number="17"><span class="co">#&gt; 3 c 3 3</span></a>
<a class="sourceLine" id="cb141-18" data-line-number="18">df2[, <span class="kw">order</span>(<span class="kw">names</span>(df2))]</a>
<a class="sourceLine" id="cb141-19" data-line-number="19"><span class="co">#&gt;   x y z</span></a>
<a class="sourceLine" id="cb141-20" data-line-number="20"><span class="co">#&gt; 3 3 3 c</span></a>
<a class="sourceLine" id="cb141-21" data-line-number="21"><span class="co">#&gt; 1 1 5 a</span></a>
<a class="sourceLine" id="cb141-22" data-line-number="22"><span class="co">#&gt; 2 2 4 b</span></a>
<a class="sourceLine" id="cb141-23" data-line-number="23"><span class="co">#&gt; 4 1 2 d</span></a>
<a class="sourceLine" id="cb141-24" data-line-number="24"><span class="co">#&gt; 5 2 1 e</span></a></code></pre></div>
<p>You can sort vectors directly with <code>sort()</code>, or use <code>dplyr::arrange()</code> or similar to sort a data frame.</p>
</div>
<div id="expanding-aggregated-counts-integer-subsetting" class="section level3">
<h3><span class="header-section-number">5.5.5</span> Expanding aggregated counts (integer subsetting)</h3>
<p>Sometimes you get a data frame where identical rows have been collapsed into one and a count column has been added. <code>rep()</code> and integer subsetting make it easy to uncollapse the data by subsetting with a repeated row index:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>), <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">6</span>), <span class="dt">n =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb142-2" data-line-number="2"><span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(df), df<span class="op">$</span>n)</a>
<a class="sourceLine" id="cb142-3" data-line-number="3"><span class="co">#&gt; [1] 1 1 1 2 2 2 2 2 3</span></a>
<a class="sourceLine" id="cb142-4" data-line-number="4"></a>
<a class="sourceLine" id="cb142-5" data-line-number="5">df[<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(df), df<span class="op">$</span>n), ]</a>
<a class="sourceLine" id="cb142-6" data-line-number="6"><span class="co">#&gt;     x  y n</span></a>
<a class="sourceLine" id="cb142-7" data-line-number="7"><span class="co">#&gt; 1   2  9 3</span></a>
<a class="sourceLine" id="cb142-8" data-line-number="8"><span class="co">#&gt; 1.1 2  9 3</span></a>
<a class="sourceLine" id="cb142-9" data-line-number="9"><span class="co">#&gt; 1.2 2  9 3</span></a>
<a class="sourceLine" id="cb142-10" data-line-number="10"><span class="co">#&gt; 2   4 11 5</span></a>
<a class="sourceLine" id="cb142-11" data-line-number="11"><span class="co">#&gt; 2.1 4 11 5</span></a>
<a class="sourceLine" id="cb142-12" data-line-number="12"><span class="co">#&gt; 2.2 4 11 5</span></a>
<a class="sourceLine" id="cb142-13" data-line-number="13"><span class="co">#&gt; 2.3 4 11 5</span></a>
<a class="sourceLine" id="cb142-14" data-line-number="14"><span class="co">#&gt; 2.4 4 11 5</span></a>
<a class="sourceLine" id="cb142-15" data-line-number="15"><span class="co">#&gt; 3   1  6 1</span></a></code></pre></div>
</div>
<div id="removing-columns-from-data-frames-character-subsetting" class="section level3">
<h3><span class="header-section-number">5.5.6</span> Removing columns from data frames (character subsetting)</h3>
<p></p>
<p>There are two ways to remove columns from a data frame. You can set individual columns to <code>NULL</code>:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">z =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb143-2" data-line-number="2">df<span class="op">$</span>z &lt;-<span class="st"> </span><span class="ot">NULL</span></a></code></pre></div>
<p>Or you can subset to return only the columns you want:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">z =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb144-2" data-line-number="2">df[<span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>)]</a>
<a class="sourceLine" id="cb144-3" data-line-number="3"><span class="co">#&gt;   x y</span></a>
<a class="sourceLine" id="cb144-4" data-line-number="4"><span class="co">#&gt; 1 1 3</span></a>
<a class="sourceLine" id="cb144-5" data-line-number="5"><span class="co">#&gt; 2 2 2</span></a>
<a class="sourceLine" id="cb144-6" data-line-number="6"><span class="co">#&gt; 3 3 1</span></a></code></pre></div>
<p>If you only know the columns you don’t want, use set operations to work out which colums to keep:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" data-line-number="1">df[<span class="kw">setdiff</span>(<span class="kw">names</span>(df), <span class="st">&quot;z&quot;</span>)]</a>
<a class="sourceLine" id="cb145-2" data-line-number="2"><span class="co">#&gt;   x y</span></a>
<a class="sourceLine" id="cb145-3" data-line-number="3"><span class="co">#&gt; 1 1 3</span></a>
<a class="sourceLine" id="cb145-4" data-line-number="4"><span class="co">#&gt; 2 2 2</span></a>
<a class="sourceLine" id="cb145-5" data-line-number="5"><span class="co">#&gt; 3 3 1</span></a></code></pre></div>
</div>
<div id="selecting-rows-based-on-a-condition-logical-subsetting" class="section level3">
<h3><span class="header-section-number">5.5.7</span> Selecting rows based on a condition (logical subsetting)</h3>
<p>
</p>
<p>Because it allows you to easily combine conditions from multiple columns, logical subsetting is probably the most commonly used technique for extracting rows out of a data frame.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1">mtcars[mtcars<span class="op">$</span>gear <span class="op">==</span><span class="st"> </span><span class="dv">5</span>, ]</a>
<a class="sourceLine" id="cb146-2" data-line-number="2"><span class="co">#&gt;     mpg cyl  disp  hp drat   wt qsec vs am gear carb</span></a>
<a class="sourceLine" id="cb146-3" data-line-number="3"><span class="co">#&gt; 27 26.0   4 120.3  91 4.43 2.14 16.7  0  1    5    2</span></a>
<a class="sourceLine" id="cb146-4" data-line-number="4"><span class="co">#&gt; 28 30.4   4  95.1 113 3.77 1.51 16.9  1  1    5    2</span></a>
<a class="sourceLine" id="cb146-5" data-line-number="5"><span class="co">#&gt; 29 15.8   8 351.0 264 4.22 3.17 14.5  0  1    5    4</span></a>
<a class="sourceLine" id="cb146-6" data-line-number="6"><span class="co">#&gt; 30 19.7   6 145.0 175 3.62 2.77 15.5  0  1    5    6</span></a>
<a class="sourceLine" id="cb146-7" data-line-number="7"><span class="co">#&gt; 31 15.0   8 301.0 335 3.54 3.57 14.6  0  1    5    8</span></a>
<a class="sourceLine" id="cb146-8" data-line-number="8"></a>
<a class="sourceLine" id="cb146-9" data-line-number="9">mtcars[mtcars<span class="op">$</span>gear <span class="op">==</span><span class="st"> </span><span class="dv">5</span> <span class="op">&amp;</span><span class="st"> </span>mtcars<span class="op">$</span>cyl <span class="op">==</span><span class="st"> </span><span class="dv">4</span>, ]</a>
<a class="sourceLine" id="cb146-10" data-line-number="10"><span class="co">#&gt;     mpg cyl  disp  hp drat   wt qsec vs am gear carb</span></a>
<a class="sourceLine" id="cb146-11" data-line-number="11"><span class="co">#&gt; 27 26.0   4 120.3  91 4.43 2.14 16.7  0  1    5    2</span></a>
<a class="sourceLine" id="cb146-12" data-line-number="12"><span class="co">#&gt; 28 30.4   4  95.1 113 3.77 1.51 16.9  1  1    5    2</span></a></code></pre></div>
<p>Remember to use the vector boolean operators <code>&amp;</code> and <code>|</code>, not the short-circuiting scalar operators <code>&amp;&amp;</code> and <code>||</code> which are more useful inside if statements. Don’t forget <a href="http://en.wikipedia.org/wiki/De_Morgan&#39;s_laws">De Morgan’s laws</a>, which can be useful to simplify negations:</p>
<ul>
<li><code>!(X &amp; Y)</code> is the same as <code>!X | !Y</code></li>
<li><code>!(X | Y)</code> is the same as <code>!X &amp; !Y</code></li>
</ul>
<p>For example, <code>!(X &amp; !(Y | Z))</code> simplifies to <code>!X | !!(Y|Z)</code>, and then to <code>!X | Y | Z</code>.</p>
</div>
<div id="boolean-algebra-vs.sets-logical-integer-subsetting" class="section level3">
<h3><span class="header-section-number">5.5.8</span> Boolean algebra vs. sets (logical &amp; integer subsetting)</h3>
<p>

</p>
<p>It’s useful to be aware of the natural equivalence between set operations (integer subsetting) and boolean algebra (logical subsetting). Using set operations is more effective when:</p>
<ul>
<li><p>You want to find the first (or last) <code>TRUE</code>.</p></li>
<li><p>You have very few <code>TRUE</code>s and very many <code>FALSE</code>s; a set representation
may be faster and require less storage.</p></li>
</ul>
<p><code>which()</code> allows you to convert a boolean representation to an integer representation. There’s no reverse operation in base R but we can easily create one:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">10</span>) <span class="op">&lt;</span><span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb147-2" data-line-number="2"><span class="kw">which</span>(x)</a>
<a class="sourceLine" id="cb147-3" data-line-number="3"><span class="co">#&gt; [1] 2 5 8</span></a>
<a class="sourceLine" id="cb147-4" data-line-number="4"></a>
<a class="sourceLine" id="cb147-5" data-line-number="5">unwhich &lt;-<span class="st"> </span><span class="cf">function</span>(x, n) {</a>
<a class="sourceLine" id="cb147-6" data-line-number="6">  out &lt;-<span class="st"> </span><span class="kw">rep_len</span>(<span class="ot">FALSE</span>, n)</a>
<a class="sourceLine" id="cb147-7" data-line-number="7">  out[x] &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb147-8" data-line-number="8">  out</a>
<a class="sourceLine" id="cb147-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb147-10" data-line-number="10"><span class="kw">unwhich</span>(<span class="kw">which</span>(x), <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb147-11" data-line-number="11"><span class="co">#&gt;  [1] FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE</span></a></code></pre></div>
<p>Let’s create two logical vectors and their integer equivalents and then explore the relationship between boolean and set operations.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" data-line-number="1">(x1 &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb148-2" data-line-number="2"><span class="co">#&gt;  [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE</span></a>
<a class="sourceLine" id="cb148-3" data-line-number="3">(x2 &lt;-<span class="st"> </span><span class="kw">which</span>(x1))</a>
<a class="sourceLine" id="cb148-4" data-line-number="4"><span class="co">#&gt; [1]  2  4  6  8 10</span></a>
<a class="sourceLine" id="cb148-5" data-line-number="5">(y1 &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="op">%%</span><span class="st"> </span><span class="dv">5</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb148-6" data-line-number="6"><span class="co">#&gt;  [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE</span></a>
<a class="sourceLine" id="cb148-7" data-line-number="7">(y2 &lt;-<span class="st"> </span><span class="kw">which</span>(y1))</a>
<a class="sourceLine" id="cb148-8" data-line-number="8"><span class="co">#&gt; [1]  5 10</span></a>
<a class="sourceLine" id="cb148-9" data-line-number="9"></a>
<a class="sourceLine" id="cb148-10" data-line-number="10"><span class="co"># X &amp; Y &lt;-&gt; intersect(x, y)</span></a>
<a class="sourceLine" id="cb148-11" data-line-number="11">x1 <span class="op">&amp;</span><span class="st"> </span>y1</a>
<a class="sourceLine" id="cb148-12" data-line-number="12"><span class="co">#&gt;  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span></a>
<a class="sourceLine" id="cb148-13" data-line-number="13"><span class="kw">intersect</span>(x2, y2)</a>
<a class="sourceLine" id="cb148-14" data-line-number="14"><span class="co">#&gt; [1] 10</span></a>
<a class="sourceLine" id="cb148-15" data-line-number="15"></a>
<a class="sourceLine" id="cb148-16" data-line-number="16"><span class="co"># X | Y &lt;-&gt; union(x, y)</span></a>
<a class="sourceLine" id="cb148-17" data-line-number="17">x1 <span class="op">|</span><span class="st"> </span>y1</a>
<a class="sourceLine" id="cb148-18" data-line-number="18"><span class="co">#&gt;  [1] FALSE  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE</span></a>
<a class="sourceLine" id="cb148-19" data-line-number="19"><span class="kw">union</span>(x2, y2)</a>
<a class="sourceLine" id="cb148-20" data-line-number="20"><span class="co">#&gt; [1]  2  4  6  8 10  5</span></a>
<a class="sourceLine" id="cb148-21" data-line-number="21"></a>
<a class="sourceLine" id="cb148-22" data-line-number="22"><span class="co"># X &amp; !Y &lt;-&gt; setdiff(x, y)</span></a>
<a class="sourceLine" id="cb148-23" data-line-number="23">x1 <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>y1</a>
<a class="sourceLine" id="cb148-24" data-line-number="24"><span class="co">#&gt;  [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE</span></a>
<a class="sourceLine" id="cb148-25" data-line-number="25"><span class="kw">setdiff</span>(x2, y2)</a>
<a class="sourceLine" id="cb148-26" data-line-number="26"><span class="co">#&gt; [1] 2 4 6 8</span></a>
<a class="sourceLine" id="cb148-27" data-line-number="27"></a>
<a class="sourceLine" id="cb148-28" data-line-number="28"><span class="co"># xor(X, Y) &lt;-&gt; setdiff(union(x, y), intersect(x, y))</span></a>
<a class="sourceLine" id="cb148-29" data-line-number="29"><span class="kw">xor</span>(x1, y1)</a>
<a class="sourceLine" id="cb148-30" data-line-number="30"><span class="co">#&gt;  [1] FALSE  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE FALSE FALSE</span></a>
<a class="sourceLine" id="cb148-31" data-line-number="31"><span class="kw">setdiff</span>(<span class="kw">union</span>(x2, y2), <span class="kw">intersect</span>(x2, y2))</a>
<a class="sourceLine" id="cb148-32" data-line-number="32"><span class="co">#&gt; [1] 2 4 6 8 5</span></a></code></pre></div>
<p>When first learning subsetting, a common mistake is to use <code>x[which(y)]</code> instead of <code>x[y]</code>. Here the <code>which()</code> achieves nothing: it switches from logical to integer subsetting but the result will be exactly the same. In more general cases, there are two important differences.</p>
<ul>
<li><p>When the logical vector contains <code>NA</code>, logical subsetting replaces these
values by <code>NA</code> while <code>which()</code> drops these values. It’s not uncommon to use
<code>which()</code> for this side-effect, but that’s</p></li>
<li><p><code>x[-which(y)]</code> is <strong>not</strong> equivalent to <code>x[!y]</code>: if <code>y</code> is all FALSE,
<code>which(y)</code> will be <code>integer(0)</code> and <code>-integer(0)</code> is still <code>integer(0)</code>, so
you’ll get no values, instead of all values.</p></li>
</ul>
<p>In general, avoid switching from logical to integer subsetting unless you want, for example, the first or last <code>TRUE</code> value.</p>
</div>
<div id="exercises-11" class="section level3">
<h3><span class="header-section-number">5.5.9</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>How would you randomly permute the columns of a data frame? (This is an
important technique in random forests.) Can you simultaneously permute
the rows and columns in one step?</p></li>
<li><p>How would you select a random sample of <code>m</code> rows from a data frame?
What if the sample had to be contiguous (i.e., with an initial row, a
final row, and every row in between)?</p></li>
<li><p>How could you put the columns in a data frame in alphabetical order?</p></li>
</ol>
</div>
</div>
<div id="subsetting-answers" class="section level2">
<h2><span class="header-section-number">5.6</span> Answers</h2>
<ol style="list-style-type: decimal">
<li><p>Positive integers select elements at specific positions, negative integers
drop elements; logical vectors keep elements at positions corresponding to
<code>TRUE</code>; character vectors select elements with matching names.</p></li>
<li><p><code>[</code> selects sub-lists. It always returns a list; if you use it with a
single positive integer, it returns a list of length one. <code>[[</code> selects
an element within a list. <code>$</code> is a convenient shorthand: <code>x$y</code> is
equivalent to <code>x[[&quot;y&quot;]]</code>.</p></li>
<li><p>Use <code>drop = FALSE</code> if you are subsetting a matrix, array, or data frame
and you want to preserve the original dimensions. You should almost
always use it when subsetting inside a function.</p></li>
<li><p>If <code>x</code> is a matrix, <code>x[] &lt;- 0</code> will replace every element with 0,
keeping the same number of rows and columns. <code>x &lt;- 0</code> completely
replaces the matrix with the value 0.</p></li>
<li><p>A named character vector can act as a simple lookup table:
<code>c(x = 1, y = 2, z = 3)[c(&quot;y&quot;, &quot;z&quot;, &quot;x&quot;)]</code></p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vectors-chap.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/hadley/adv-r/edit/master/Subsetting.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
