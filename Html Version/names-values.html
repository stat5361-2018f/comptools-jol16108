<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Advanced R</title>
  <meta name="description" content="The book is designed primarily for R users who want to improve their programming skills and understanding of the language. It should also be useful for programmers coming to R from other languages, as it explains some of R’s quirks and shows how some parts that seem horrible do have a positive side.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Advanced R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://adv-r.hadley.nz/" />
  <meta property="og:image" content="https://adv-r.hadley.nz/cover.png" />
  <meta property="og:description" content="The book is designed primarily for R users who want to improve their programming skills and understanding of the language. It should also be useful for programmers coming to R from other languages, as it explains some of R’s quirks and shows how some parts that seem horrible do have a positive side." />
  <meta name="github-repo" content="hadley/adv-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Advanced R" />
  <meta name="twitter:site" content="@hadley" />
  <meta name="twitter:description" content="The book is designed primarily for R users who want to improve their programming skills and understanding of the language. It should also be useful for programmers coming to R from other languages, as it explains some of R’s quirks and shows how some parts that seem horrible do have a positive side." />
  <meta name="twitter:image" content="https://adv-r.hadley.nz/cover.png" />

<meta name="author" content="Hadley Wickham">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="foundations-intro.html">
<link rel="next" href="vectors-chap.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="adv-r.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Advanced R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-books"><i class="fa fa-check"></i>Other books</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="1.1" data-path="preface.html"><a href="preface.html#rlang"><i class="fa fa-check"></i><b>1.1</b> rlang</a></li>
<li class="chapter" data-level="1.2" data-path="preface.html"><a href="preface.html#foundations"><i class="fa fa-check"></i><b>1.2</b> Foundations</a></li>
<li class="chapter" data-level="1.3" data-path="preface.html"><a href="preface.html#programming-paradigms"><i class="fa fa-check"></i><b>1.3</b> Programming paradigms</a></li>
<li class="chapter" data-level="1.4" data-path="preface.html"><a href="preface.html#techniques"><i class="fa fa-check"></i><b>1.4</b> Techniques</a></li>
<li class="chapter" data-level="1.5" data-path="preface.html"><a href="preface.html#removals"><i class="fa fa-check"></i><b>1.5</b> Removals</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#who-should-read"><i class="fa fa-check"></i><b>2.1</b> Who should read this book</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#related-work"><i class="fa fa-check"></i><b>2.2</b> Related work</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#what-you-will-get"><i class="fa fa-check"></i><b>2.3</b> What you will get out of this book</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#meta-techniques"><i class="fa fa-check"></i><b>2.4</b> Meta-techniques</a></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#recommended-reading"><i class="fa fa-check"></i><b>2.5</b> Recommended reading</a></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#getting-help"><i class="fa fa-check"></i><b>2.6</b> Getting help</a></li>
<li class="chapter" data-level="2.7" data-path="introduction.html"><a href="introduction.html#intro-ack"><i class="fa fa-check"></i><b>2.7</b> Acknowledgments</a></li>
<li class="chapter" data-level="2.8" data-path="introduction.html"><a href="introduction.html#conventions"><i class="fa fa-check"></i><b>2.8</b> Conventions</a></li>
<li class="chapter" data-level="2.9" data-path="introduction.html"><a href="introduction.html#colophon"><i class="fa fa-check"></i><b>2.9</b> Colophon</a></li>
</ul></li>
<li class="part"><span><b>I Foundations</b></span></li>
<li class="chapter" data-level="" data-path="foundations-intro.html"><a href="foundations-intro.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="3" data-path="names-values.html"><a href="names-values.html"><i class="fa fa-check"></i><b>3</b> Names and values</a><ul>
<li class="chapter" data-level="3.1" data-path="names-values.html"><a href="names-values.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#quiz"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#sources"><i class="fa fa-check"></i>Sources</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="names-values.html"><a href="names-values.html#binding-basics"><i class="fa fa-check"></i><b>3.2</b> Binding basics</a><ul>
<li class="chapter" data-level="3.2.1" data-path="names-values.html"><a href="names-values.html#non-syntactic"><i class="fa fa-check"></i><b>3.2.1</b> Non-syntactic names</a></li>
<li class="chapter" data-level="3.2.2" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>3.2.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="names-values.html"><a href="names-values.html#copy-on-modify"><i class="fa fa-check"></i><b>3.3</b> Copy-on-modify</a><ul>
<li class="chapter" data-level="3.3.1" data-path="names-values.html"><a href="names-values.html#tracemem"><i class="fa fa-check"></i><b>3.3.1</b> <code>tracemem()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="names-values.html"><a href="names-values.html#function-calls"><i class="fa fa-check"></i><b>3.3.2</b> Function calls</a></li>
<li class="chapter" data-level="3.3.3" data-path="names-values.html"><a href="names-values.html#list-references"><i class="fa fa-check"></i><b>3.3.3</b> Lists</a></li>
<li class="chapter" data-level="3.3.4" data-path="names-values.html"><a href="names-values.html#df-modify"><i class="fa fa-check"></i><b>3.3.4</b> Data frames</a></li>
<li class="chapter" data-level="3.3.5" data-path="names-values.html"><a href="names-values.html#character-vectors"><i class="fa fa-check"></i><b>3.3.5</b> Character vectors</a></li>
<li class="chapter" data-level="3.3.6" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>3.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="names-values.html"><a href="names-values.html#object-size"><i class="fa fa-check"></i><b>3.4</b> Object size</a><ul>
<li class="chapter" data-level="3.4.1" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>3.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="names-values.html"><a href="names-values.html#modify-in-place"><i class="fa fa-check"></i><b>3.5</b> Modify-in-place</a><ul>
<li class="chapter" data-level="3.5.1" data-path="names-values.html"><a href="names-values.html#single-binding"><i class="fa fa-check"></i><b>3.5.1</b> Objects with a single binding</a></li>
<li class="chapter" data-level="3.5.2" data-path="names-values.html"><a href="names-values.html#env-modify"><i class="fa fa-check"></i><b>3.5.2</b> Environments</a></li>
<li class="chapter" data-level="3.5.3" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>3.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="names-values.html"><a href="names-values.html#gc"><i class="fa fa-check"></i><b>3.6</b> Unbinding and the garbage collector</a></li>
<li class="chapter" data-level="3.7" data-path="names-values.html"><a href="names-values.html#names-values-answers"><i class="fa fa-check"></i><b>3.7</b> Answers</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vectors-chap.html"><a href="vectors-chap.html"><i class="fa fa-check"></i><b>4</b> Vectors</a><ul>
<li class="chapter" data-level="4.1" data-path="vectors-chap.html"><a href="vectors-chap.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="vectors-chap.html"><a href="vectors-chap.html#quiz-1"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="vectors-chap.html"><a href="vectors-chap.html#outline-1"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="vectors-chap.html"><a href="vectors-chap.html#atomic-vectors"><i class="fa fa-check"></i><b>4.2</b> Atomic vectors</a><ul>
<li class="chapter" data-level="4.2.1" data-path="vectors-chap.html"><a href="vectors-chap.html#scalars"><i class="fa fa-check"></i><b>4.2.1</b> Scalars</a></li>
<li class="chapter" data-level="4.2.2" data-path="vectors-chap.html"><a href="vectors-chap.html#atomic-constructing"><i class="fa fa-check"></i><b>4.2.2</b> Making longer vectors with <code>c()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="vectors-chap.html"><a href="vectors-chap.html#testing-and-coercing"><i class="fa fa-check"></i><b>4.2.3</b> Testing and coercing</a></li>
<li class="chapter" data-level="4.2.4" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-4"><i class="fa fa-check"></i><b>4.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="vectors-chap.html"><a href="vectors-chap.html#attributes"><i class="fa fa-check"></i><b>4.3</b> Attributes</a><ul>
<li class="chapter" data-level="4.3.1" data-path="vectors-chap.html"><a href="vectors-chap.html#getting-and-setting"><i class="fa fa-check"></i><b>4.3.1</b> Getting and setting</a></li>
<li class="chapter" data-level="4.3.2" data-path="vectors-chap.html"><a href="vectors-chap.html#attr-names"><i class="fa fa-check"></i><b>4.3.2</b> Names</a></li>
<li class="chapter" data-level="4.3.3" data-path="vectors-chap.html"><a href="vectors-chap.html#attr-dims"><i class="fa fa-check"></i><b>4.3.3</b> Dimensions</a></li>
<li class="chapter" data-level="4.3.4" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-5"><i class="fa fa-check"></i><b>4.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="vectors-chap.html"><a href="vectors-chap.html#s3-atomic-vectors"><i class="fa fa-check"></i><b>4.4</b> S3 atomic vectors</a><ul>
<li class="chapter" data-level="4.4.1" data-path="vectors-chap.html"><a href="vectors-chap.html#factors"><i class="fa fa-check"></i><b>4.4.1</b> Factors</a></li>
<li class="chapter" data-level="4.4.2" data-path="vectors-chap.html"><a href="vectors-chap.html#dates"><i class="fa fa-check"></i><b>4.4.2</b> Dates</a></li>
<li class="chapter" data-level="4.4.3" data-path="vectors-chap.html"><a href="vectors-chap.html#date-times"><i class="fa fa-check"></i><b>4.4.3</b> Date-times</a></li>
<li class="chapter" data-level="4.4.4" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-6"><i class="fa fa-check"></i><b>4.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="vectors-chap.html"><a href="vectors-chap.html#lists"><i class="fa fa-check"></i><b>4.5</b> Lists</a><ul>
<li class="chapter" data-level="4.5.1" data-path="vectors-chap.html"><a href="vectors-chap.html#list-creating"><i class="fa fa-check"></i><b>4.5.1</b> Creating</a></li>
<li class="chapter" data-level="4.5.2" data-path="vectors-chap.html"><a href="vectors-chap.html#list-types"><i class="fa fa-check"></i><b>4.5.2</b> Testing and coercing</a></li>
<li class="chapter" data-level="4.5.3" data-path="vectors-chap.html"><a href="vectors-chap.html#list-array"><i class="fa fa-check"></i><b>4.5.3</b> Matrices and arrays</a></li>
<li class="chapter" data-level="4.5.4" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-7"><i class="fa fa-check"></i><b>4.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="vectors-chap.html"><a href="vectors-chap.html#tibble"><i class="fa fa-check"></i><b>4.6</b> Data frames and tibbles</a><ul>
<li class="chapter" data-level="4.6.1" data-path="vectors-chap.html"><a href="vectors-chap.html#df-create"><i class="fa fa-check"></i><b>4.6.1</b> Creating</a></li>
<li class="chapter" data-level="4.6.2" data-path="vectors-chap.html"><a href="vectors-chap.html#rownames"><i class="fa fa-check"></i><b>4.6.2</b> Row names</a></li>
<li class="chapter" data-level="4.6.3" data-path="vectors-chap.html"><a href="vectors-chap.html#printing"><i class="fa fa-check"></i><b>4.6.3</b> Printing</a></li>
<li class="chapter" data-level="4.6.4" data-path="vectors-chap.html"><a href="vectors-chap.html#safe-subsetting"><i class="fa fa-check"></i><b>4.6.4</b> Subsetting</a></li>
<li class="chapter" data-level="4.6.5" data-path="vectors-chap.html"><a href="vectors-chap.html#df-test-coerce"><i class="fa fa-check"></i><b>4.6.5</b> Testing and coercing</a></li>
<li class="chapter" data-level="4.6.6" data-path="vectors-chap.html"><a href="vectors-chap.html#list-columns"><i class="fa fa-check"></i><b>4.6.6</b> List columns</a></li>
<li class="chapter" data-level="4.6.7" data-path="vectors-chap.html"><a href="vectors-chap.html#matrix-and-data-frame-columns"><i class="fa fa-check"></i><b>4.6.7</b> Matrix and data frame columns</a></li>
<li class="chapter" data-level="4.6.8" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-8"><i class="fa fa-check"></i><b>4.6.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="vectors-chap.html"><a href="vectors-chap.html#null"><i class="fa fa-check"></i><b>4.7</b> <code>NULL</code></a></li>
<li class="chapter" data-level="4.8" data-path="vectors-chap.html"><a href="vectors-chap.html#data-structure-answers"><i class="fa fa-check"></i><b>4.8</b> Answers</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="subsetting.html"><a href="subsetting.html"><i class="fa fa-check"></i><b>5</b> Subsetting</a><ul>
<li class="chapter" data-level="5.1" data-path="subsetting.html"><a href="subsetting.html#introduction-3"><i class="fa fa-check"></i><b>5.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#quiz-2"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#outline-2"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="subsetting.html"><a href="subsetting.html#subset-multiple"><i class="fa fa-check"></i><b>5.2</b> Selecting multiple elements</a><ul>
<li class="chapter" data-level="5.2.1" data-path="subsetting.html"><a href="subsetting.html#atomic-vectors-1"><i class="fa fa-check"></i><b>5.2.1</b> Atomic vectors</a></li>
<li class="chapter" data-level="5.2.2" data-path="subsetting.html"><a href="subsetting.html#lists-1"><i class="fa fa-check"></i><b>5.2.2</b> Lists</a></li>
<li class="chapter" data-level="5.2.3" data-path="subsetting.html"><a href="subsetting.html#matrix-subsetting"><i class="fa fa-check"></i><b>5.2.3</b> Matrices and arrays</a></li>
<li class="chapter" data-level="5.2.4" data-path="subsetting.html"><a href="subsetting.html#df-subsetting"><i class="fa fa-check"></i><b>5.2.4</b> Data frames and tibbles</a></li>
<li class="chapter" data-level="5.2.5" data-path="subsetting.html"><a href="subsetting.html#simplify-preserve"><i class="fa fa-check"></i><b>5.2.5</b> Preserving dimensionality</a></li>
<li class="chapter" data-level="5.2.6" data-path="subsetting.html"><a href="subsetting.html#exercises-9"><i class="fa fa-check"></i><b>5.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="subsetting.html"><a href="subsetting.html#subset-single"><i class="fa fa-check"></i><b>5.3</b> Selecting a single element</a><ul>
<li class="chapter" data-level="5.3.1" data-path="subsetting.html"><a href="subsetting.html#section"><i class="fa fa-check"></i><b>5.3.1</b> <code>[[</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="subsetting.html"><a href="subsetting.html#section-1"><i class="fa fa-check"></i><b>5.3.2</b> <code>$</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="subsetting.html"><a href="subsetting.html#missingout-of-bounds-indices"><i class="fa fa-check"></i><b>5.3.3</b> Missing/out of bounds indices</a></li>
<li class="chapter" data-level="5.3.4" data-path="subsetting.html"><a href="subsetting.html#and-slot"><i class="fa fa-check"></i><b>5.3.4</b> <code>@</code> and <code>slot()</code></a></li>
<li class="chapter" data-level="5.3.5" data-path="subsetting.html"><a href="subsetting.html#exercises-10"><i class="fa fa-check"></i><b>5.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="subsetting.html"><a href="subsetting.html#subassignment"><i class="fa fa-check"></i><b>5.4</b> Subsetting and assignment</a></li>
<li class="chapter" data-level="5.5" data-path="subsetting.html"><a href="subsetting.html#applications"><i class="fa fa-check"></i><b>5.5</b> Applications</a><ul>
<li class="chapter" data-level="5.5.1" data-path="subsetting.html"><a href="subsetting.html#lookup-tables"><i class="fa fa-check"></i><b>5.5.1</b> Lookup tables (character subsetting)</a></li>
<li class="chapter" data-level="5.5.2" data-path="subsetting.html"><a href="subsetting.html#matching-merging"><i class="fa fa-check"></i><b>5.5.2</b> Matching and merging by hand (integer subsetting)</a></li>
<li class="chapter" data-level="5.5.3" data-path="subsetting.html"><a href="subsetting.html#random-samplesbootstraps-integer-subsetting"><i class="fa fa-check"></i><b>5.5.3</b> Random samples/bootstraps (integer subsetting)</a></li>
<li class="chapter" data-level="5.5.4" data-path="subsetting.html"><a href="subsetting.html#ordering-integer-subsetting"><i class="fa fa-check"></i><b>5.5.4</b> Ordering (integer subsetting)</a></li>
<li class="chapter" data-level="5.5.5" data-path="subsetting.html"><a href="subsetting.html#expanding-aggregated-counts-integer-subsetting"><i class="fa fa-check"></i><b>5.5.5</b> Expanding aggregated counts (integer subsetting)</a></li>
<li class="chapter" data-level="5.5.6" data-path="subsetting.html"><a href="subsetting.html#removing-columns-from-data-frames-character-subsetting"><i class="fa fa-check"></i><b>5.5.6</b> Removing columns from data frames (character subsetting)</a></li>
<li class="chapter" data-level="5.5.7" data-path="subsetting.html"><a href="subsetting.html#selecting-rows-based-on-a-condition-logical-subsetting"><i class="fa fa-check"></i><b>5.5.7</b> Selecting rows based on a condition (logical subsetting)</a></li>
<li class="chapter" data-level="5.5.8" data-path="subsetting.html"><a href="subsetting.html#boolean-algebra-vs.sets-logical-integer-subsetting"><i class="fa fa-check"></i><b>5.5.8</b> Boolean algebra vs. sets (logical &amp; integer subsetting)</a></li>
<li class="chapter" data-level="5.5.9" data-path="subsetting.html"><a href="subsetting.html#exercises-11"><i class="fa fa-check"></i><b>5.5.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="subsetting.html"><a href="subsetting.html#subsetting-answers"><i class="fa fa-check"></i><b>5.6</b> Answers</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>6</b> Functions</a><ul>
<li class="chapter" data-level="6.1" data-path="functions.html"><a href="functions.html#introduction-4"><i class="fa fa-check"></i><b>6.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#quiz-3"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#outline-3"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="functions.html"><a href="functions.html#function-fundamentals"><i class="fa fa-check"></i><b>6.2</b> Function fundamentals</a><ul>
<li class="chapter" data-level="6.2.1" data-path="functions.html"><a href="functions.html#first-class-functions"><i class="fa fa-check"></i><b>6.2.1</b> First-class functions</a></li>
<li class="chapter" data-level="6.2.2" data-path="functions.html"><a href="functions.html#function-components"><i class="fa fa-check"></i><b>6.2.2</b> Function components</a></li>
<li class="chapter" data-level="6.2.3" data-path="functions.html"><a href="functions.html#primitive-functions"><i class="fa fa-check"></i><b>6.2.3</b> Primitive functions</a></li>
<li class="chapter" data-level="6.2.4" data-path="functions.html"><a href="functions.html#exercises-12"><i class="fa fa-check"></i><b>6.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="functions.html"><a href="functions.html#lexical-scoping"><i class="fa fa-check"></i><b>6.3</b> Lexical scoping</a><ul>
<li class="chapter" data-level="6.3.1" data-path="functions.html"><a href="functions.html#name-masking"><i class="fa fa-check"></i><b>6.3.1</b> Name masking</a></li>
<li class="chapter" data-level="6.3.2" data-path="functions.html"><a href="functions.html#functions-vs.variables"><i class="fa fa-check"></i><b>6.3.2</b> Functions vs. variables</a></li>
<li class="chapter" data-level="6.3.3" data-path="functions.html"><a href="functions.html#fresh-start"><i class="fa fa-check"></i><b>6.3.3</b> A fresh start</a></li>
<li class="chapter" data-level="6.3.4" data-path="functions.html"><a href="functions.html#dynamic-lookup"><i class="fa fa-check"></i><b>6.3.4</b> Dynamic lookup</a></li>
<li class="chapter" data-level="6.3.5" data-path="functions.html"><a href="functions.html#exercises-13"><i class="fa fa-check"></i><b>6.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="functions.html"><a href="functions.html#lazy-evaluation"><i class="fa fa-check"></i><b>6.4</b> Lazy evaluation</a><ul>
<li class="chapter" data-level="6.4.1" data-path="functions.html"><a href="functions.html#forcing-evaluation"><i class="fa fa-check"></i><b>6.4.1</b> Forcing evaluation</a></li>
<li class="chapter" data-level="6.4.2" data-path="functions.html"><a href="functions.html#promises"><i class="fa fa-check"></i><b>6.4.2</b> Promises</a></li>
<li class="chapter" data-level="6.4.3" data-path="functions.html"><a href="functions.html#default-arguments"><i class="fa fa-check"></i><b>6.4.3</b> Default arguments</a></li>
<li class="chapter" data-level="6.4.4" data-path="functions.html"><a href="functions.html#missing-arguments"><i class="fa fa-check"></i><b>6.4.4</b> Missing arguments</a></li>
<li class="chapter" data-level="6.4.5" data-path="functions.html"><a href="functions.html#exercises-14"><i class="fa fa-check"></i><b>6.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="functions.html"><a href="functions.html#fun-dot-dot-dot"><i class="fa fa-check"></i><b>6.5</b> <code>...</code> (dot-dot-dot)</a><ul>
<li class="chapter" data-level="6.5.1" data-path="functions.html"><a href="functions.html#exercises-15"><i class="fa fa-check"></i><b>6.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="functions.html"><a href="functions.html#exiting-a-function"><i class="fa fa-check"></i><b>6.6</b> Exiting a function</a><ul>
<li class="chapter" data-level="6.6.1" data-path="functions.html"><a href="functions.html#implicit-vs.explict-returns"><i class="fa fa-check"></i><b>6.6.1</b> Implicit vs. explict returns</a></li>
<li class="chapter" data-level="6.6.2" data-path="functions.html"><a href="functions.html#invisible-values"><i class="fa fa-check"></i><b>6.6.2</b> Invisible values</a></li>
<li class="chapter" data-level="6.6.3" data-path="functions.html"><a href="functions.html#errors"><i class="fa fa-check"></i><b>6.6.3</b> Errors</a></li>
<li class="chapter" data-level="6.6.4" data-path="functions.html"><a href="functions.html#on-exit"><i class="fa fa-check"></i><b>6.6.4</b> Exit handlers</a></li>
<li class="chapter" data-level="6.6.5" data-path="functions.html"><a href="functions.html#exercises-16"><i class="fa fa-check"></i><b>6.6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="functions.html"><a href="functions.html#function-forms"><i class="fa fa-check"></i><b>6.7</b> Function forms</a><ul>
<li class="chapter" data-level="6.7.1" data-path="functions.html"><a href="functions.html#rewriting-to-prefix-form"><i class="fa fa-check"></i><b>6.7.1</b> Rewriting to prefix form</a></li>
<li class="chapter" data-level="6.7.2" data-path="functions.html"><a href="functions.html#prefix-form-prefix-form"><i class="fa fa-check"></i><b>6.7.2</b> Prefix form {prefix-form}</a></li>
<li class="chapter" data-level="6.7.3" data-path="functions.html"><a href="functions.html#infix-functions"><i class="fa fa-check"></i><b>6.7.3</b> Infix functions</a></li>
<li class="chapter" data-level="6.7.4" data-path="functions.html"><a href="functions.html#replacement-functions"><i class="fa fa-check"></i><b>6.7.4</b> Replacement functions</a></li>
<li class="chapter" data-level="6.7.5" data-path="functions.html"><a href="functions.html#special-forms"><i class="fa fa-check"></i><b>6.7.5</b> Special forms</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="functions.html"><a href="functions.html#invoking-a-function"><i class="fa fa-check"></i><b>6.8</b> Invoking a function</a><ul>
<li class="chapter" data-level="6.8.1" data-path="functions.html"><a href="functions.html#exercises-17"><i class="fa fa-check"></i><b>6.8.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="functions.html"><a href="functions.html#function-answers"><i class="fa fa-check"></i><b>6.9</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="environments.html"><a href="environments.html"><i class="fa fa-check"></i><b>7</b> Environments</a><ul>
<li class="chapter" data-level="7.1" data-path="environments.html"><a href="environments.html#introduction-5"><i class="fa fa-check"></i><b>7.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="environments.html"><a href="environments.html#quiz-4"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="environments.html"><a href="environments.html#outline-4"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="environments.html"><a href="environments.html#prerequisites-1"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="environments.html"><a href="environments.html#env-basics"><i class="fa fa-check"></i><b>7.2</b> Environment basics</a><ul>
<li class="chapter" data-level="7.2.1" data-path="environments.html"><a href="environments.html#basics"><i class="fa fa-check"></i><b>7.2.1</b> Basics</a></li>
<li class="chapter" data-level="7.2.2" data-path="environments.html"><a href="environments.html#important-environments"><i class="fa fa-check"></i><b>7.2.2</b> Important environments</a></li>
<li class="chapter" data-level="7.2.3" data-path="environments.html"><a href="environments.html#parents"><i class="fa fa-check"></i><b>7.2.3</b> Parents</a></li>
<li class="chapter" data-level="7.2.4" data-path="environments.html"><a href="environments.html#getting-and-setting-1"><i class="fa fa-check"></i><b>7.2.4</b> Getting and setting</a></li>
<li class="chapter" data-level="7.2.5" data-path="environments.html"><a href="environments.html#finalisers"><i class="fa fa-check"></i><b>7.2.5</b> Finalisers</a></li>
<li class="chapter" data-level="7.2.6" data-path="environments.html"><a href="environments.html#advanced-bindings"><i class="fa fa-check"></i><b>7.2.6</b> Advanced bindings</a></li>
<li class="chapter" data-level="7.2.7" data-path="environments.html"><a href="environments.html#exercises-18"><i class="fa fa-check"></i><b>7.2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="environments.html"><a href="environments.html#env-recursion"><i class="fa fa-check"></i><b>7.3</b> Recursing over environments</a><ul>
<li class="chapter" data-level="7.3.1" data-path="environments.html"><a href="environments.html#exercises-19"><i class="fa fa-check"></i><b>7.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="environments.html"><a href="environments.html#function-envs"><i class="fa fa-check"></i><b>7.4</b> Special environments</a><ul>
<li class="chapter" data-level="7.4.1" data-path="environments.html"><a href="environments.html#package-environments-and-the-search-path"><i class="fa fa-check"></i><b>7.4.1</b> Package environments and the search path</a></li>
<li class="chapter" data-level="7.4.2" data-path="environments.html"><a href="environments.html#the-function-environment"><i class="fa fa-check"></i><b>7.4.2</b> The function environment</a></li>
<li class="chapter" data-level="7.4.3" data-path="environments.html"><a href="environments.html#namespaces"><i class="fa fa-check"></i><b>7.4.3</b> Namespaces</a></li>
<li class="chapter" data-level="7.4.4" data-path="environments.html"><a href="environments.html#execution-environments"><i class="fa fa-check"></i><b>7.4.4</b> Execution environments</a></li>
<li class="chapter" data-level="7.4.5" data-path="environments.html"><a href="environments.html#exercises-20"><i class="fa fa-check"></i><b>7.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="environments.html"><a href="environments.html#the-call-stack"><i class="fa fa-check"></i><b>7.5</b> The call stack</a><ul>
<li class="chapter" data-level="7.5.1" data-path="environments.html"><a href="environments.html#simple-call-stacks"><i class="fa fa-check"></i><b>7.5.1</b> Simple call stacks</a></li>
<li class="chapter" data-level="7.5.2" data-path="environments.html"><a href="environments.html#lazy-evaluation-1"><i class="fa fa-check"></i><b>7.5.2</b> Lazy evaluation</a></li>
<li class="chapter" data-level="7.5.3" data-path="environments.html"><a href="environments.html#frames"><i class="fa fa-check"></i><b>7.5.3</b> Frames</a></li>
<li class="chapter" data-level="7.5.4" data-path="environments.html"><a href="environments.html#dynamic-scope"><i class="fa fa-check"></i><b>7.5.4</b> Dynamic scope</a></li>
<li class="chapter" data-level="7.5.5" data-path="environments.html"><a href="environments.html#exercises-21"><i class="fa fa-check"></i><b>7.5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="environments.html"><a href="environments.html#explicit-envs"><i class="fa fa-check"></i><b>7.6</b> As data structures</a></li>
<li class="chapter" data-level="7.7" data-path="environments.html"><a href="environments.html#section-2"><i class="fa fa-check"></i><b>7.7</b> <code>&lt;&lt;-</code></a><ul>
<li class="chapter" data-level="7.7.1" data-path="environments.html"><a href="environments.html#exercises-22"><i class="fa fa-check"></i><b>7.7.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="environments.html"><a href="environments.html#env-answers"><i class="fa fa-check"></i><b>7.8</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="conditions.html"><a href="conditions.html"><i class="fa fa-check"></i><b>8</b> Conditions</a><ul>
<li class="chapter" data-level="8.1" data-path="conditions.html"><a href="conditions.html#introduction-6"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="conditions.html"><a href="conditions.html#quiz-5"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="conditions.html"><a href="conditions.html#overview"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="8.1.1" data-path="conditions.html"><a href="conditions.html#prerequisites-2"><i class="fa fa-check"></i><b>8.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="conditions.html"><a href="conditions.html#signalling-conditions"><i class="fa fa-check"></i><b>8.2</b> Signalling conditions</a><ul>
<li class="chapter" data-level="8.2.1" data-path="conditions.html"><a href="conditions.html#errors-1"><i class="fa fa-check"></i><b>8.2.1</b> Errors</a></li>
<li class="chapter" data-level="8.2.2" data-path="conditions.html"><a href="conditions.html#warnings"><i class="fa fa-check"></i><b>8.2.2</b> Warnings</a></li>
<li class="chapter" data-level="8.2.3" data-path="conditions.html"><a href="conditions.html#messages"><i class="fa fa-check"></i><b>8.2.3</b> Messages</a></li>
<li class="chapter" data-level="8.2.4" data-path="conditions.html"><a href="conditions.html#exercises-23"><i class="fa fa-check"></i><b>8.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="conditions.html"><a href="conditions.html#ignoring-conditions"><i class="fa fa-check"></i><b>8.3</b> Ignoring conditions</a></li>
<li class="chapter" data-level="8.4" data-path="conditions.html"><a href="conditions.html#handling-conditions"><i class="fa fa-check"></i><b>8.4</b> Handling conditions</a><ul>
<li class="chapter" data-level="8.4.1" data-path="conditions.html"><a href="conditions.html#condition-objects"><i class="fa fa-check"></i><b>8.4.1</b> Condition objects</a></li>
<li class="chapter" data-level="8.4.2" data-path="conditions.html"><a href="conditions.html#exiting-handlers"><i class="fa fa-check"></i><b>8.4.2</b> Exiting handlers</a></li>
<li class="chapter" data-level="8.4.3" data-path="conditions.html"><a href="conditions.html#calling-handlers"><i class="fa fa-check"></i><b>8.4.3</b> Calling handlers</a></li>
<li class="chapter" data-level="8.4.4" data-path="conditions.html"><a href="conditions.html#call-stacks"><i class="fa fa-check"></i><b>8.4.4</b> Call stacks</a></li>
<li class="chapter" data-level="8.4.5" data-path="conditions.html"><a href="conditions.html#exercises-24"><i class="fa fa-check"></i><b>8.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="conditions.html"><a href="conditions.html#custom-conditions"><i class="fa fa-check"></i><b>8.5</b> Custom conditions</a><ul>
<li class="chapter" data-level="8.5.1" data-path="conditions.html"><a href="conditions.html#motivation"><i class="fa fa-check"></i><b>8.5.1</b> Motivation</a></li>
<li class="chapter" data-level="8.5.2" data-path="conditions.html"><a href="conditions.html#signalling"><i class="fa fa-check"></i><b>8.5.2</b> Signalling</a></li>
<li class="chapter" data-level="8.5.3" data-path="conditions.html"><a href="conditions.html#handling"><i class="fa fa-check"></i><b>8.5.3</b> Handling</a></li>
<li class="chapter" data-level="8.5.4" data-path="conditions.html"><a href="conditions.html#exercises-25"><i class="fa fa-check"></i><b>8.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="conditions.html"><a href="conditions.html#condition-applications"><i class="fa fa-check"></i><b>8.6</b> Applications</a><ul>
<li class="chapter" data-level="8.6.1" data-path="conditions.html"><a href="conditions.html#failure-value"><i class="fa fa-check"></i><b>8.6.1</b> Failure value</a></li>
<li class="chapter" data-level="8.6.2" data-path="conditions.html"><a href="conditions.html#success-and-failure-values"><i class="fa fa-check"></i><b>8.6.2</b> Success and failure values</a></li>
<li class="chapter" data-level="8.6.3" data-path="conditions.html"><a href="conditions.html#resignal"><i class="fa fa-check"></i><b>8.6.3</b> Resignal</a></li>
<li class="chapter" data-level="8.6.4" data-path="conditions.html"><a href="conditions.html#record"><i class="fa fa-check"></i><b>8.6.4</b> Record</a></li>
<li class="chapter" data-level="8.6.5" data-path="conditions.html"><a href="conditions.html#no-default-behaviour"><i class="fa fa-check"></i><b>8.6.5</b> No default behaviour</a></li>
<li class="chapter" data-level="8.6.6" data-path="conditions.html"><a href="conditions.html#exercises-26"><i class="fa fa-check"></i><b>8.6.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="conditions.html"><a href="conditions.html#conditions-answers"><i class="fa fa-check"></i><b>8.7</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="connections.html"><a href="connections.html"><i class="fa fa-check"></i><b>9</b> Connections</a><ul>
<li class="chapter" data-level="9.1" data-path="connections.html"><a href="connections.html#basics-1"><i class="fa fa-check"></i><b>9.1</b> Basics</a></li>
<li class="chapter" data-level="9.2" data-path="connections.html"><a href="connections.html#reading-and-writing-binary-data"><i class="fa fa-check"></i><b>9.2</b> Reading and writing binary data</a></li>
<li class="chapter" data-level="9.3" data-path="connections.html"><a href="connections.html#reading-and-writing-text-data"><i class="fa fa-check"></i><b>9.3</b> Reading and writing text data</a></li>
</ul></li>
<li class="part"><span><b>II Functional programming</b></span></li>
<li class="chapter" data-level="" data-path="fp.html"><a href="fp.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="10" data-path="functionals.html"><a href="functionals.html"><i class="fa fa-check"></i><b>10</b> Functionals</a><ul>
<li class="chapter" data-level="10.1" data-path="functionals.html"><a href="functionals.html#introduction-7"><i class="fa fa-check"></i><b>10.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#outline-5"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#prerequisites-3"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="functionals.html"><a href="functionals.html#map"><i class="fa fa-check"></i><b>10.2</b> My first functional: <code>map()</code></a><ul>
<li class="chapter" data-level="10.2.1" data-path="functionals.html"><a href="functionals.html#producing-atomic-vectors"><i class="fa fa-check"></i><b>10.2.1</b> Producing atomic vectors</a></li>
<li class="chapter" data-level="10.2.2" data-path="functionals.html"><a href="functionals.html#anonymous-functions-and-helpers"><i class="fa fa-check"></i><b>10.2.2</b> Anonymous functions and helpers</a></li>
<li class="chapter" data-level="10.2.3" data-path="functionals.html"><a href="functionals.html#passing-arguments"><i class="fa fa-check"></i><b>10.2.3</b> Passing arguments with <code>...</code></a></li>
<li class="chapter" data-level="10.2.4" data-path="functionals.html"><a href="functionals.html#argument-names"><i class="fa fa-check"></i><b>10.2.4</b> Argument names</a></li>
<li class="chapter" data-level="10.2.5" data-path="functionals.html"><a href="functionals.html#change-argument"><i class="fa fa-check"></i><b>10.2.5</b> Varying another argument</a></li>
<li class="chapter" data-level="10.2.6" data-path="functionals.html"><a href="functionals.html#exercises-27"><i class="fa fa-check"></i><b>10.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="functionals.html"><a href="functionals.html#functionals-loop"><i class="fa fa-check"></i><b>10.3</b> Map variants</a><ul>
<li class="chapter" data-level="10.3.1" data-path="functionals.html"><a href="functionals.html#modify"><i class="fa fa-check"></i><b>10.3.1</b> Same type of output as input: <code>modify()</code></a></li>
<li class="chapter" data-level="10.3.2" data-path="functionals.html"><a href="functionals.html#map2"><i class="fa fa-check"></i><b>10.3.2</b> Two inputs: <code>map2()</code> and friends</a></li>
<li class="chapter" data-level="10.3.3" data-path="functionals.html"><a href="functionals.html#no-outputs-walk-and-friends"><i class="fa fa-check"></i><b>10.3.3</b> No outputs: <code>walk()</code> and friends</a></li>
<li class="chapter" data-level="10.3.4" data-path="functionals.html"><a href="functionals.html#iterating-over-values-and-indices"><i class="fa fa-check"></i><b>10.3.4</b> Iterating over values and indices</a></li>
<li class="chapter" data-level="10.3.5" data-path="functionals.html"><a href="functionals.html#pmap"><i class="fa fa-check"></i><b>10.3.5</b> Any number of inputs: <code>pmap()</code> and friends</a></li>
<li class="chapter" data-level="10.3.6" data-path="functionals.html"><a href="functionals.html#exercises-28"><i class="fa fa-check"></i><b>10.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="functionals.html"><a href="functionals.html#reduce"><i class="fa fa-check"></i><b>10.4</b> Reduce</a><ul>
<li class="chapter" data-level="10.4.1" data-path="functionals.html"><a href="functionals.html#basics-2"><i class="fa fa-check"></i><b>10.4.1</b> Basics</a></li>
<li class="chapter" data-level="10.4.2" data-path="functionals.html"><a href="functionals.html#algebra"><i class="fa fa-check"></i><b>10.4.2</b> Algebra</a></li>
<li class="chapter" data-level="10.4.3" data-path="functionals.html"><a href="functionals.html#initialise"><i class="fa fa-check"></i><b>10.4.3</b> Initialise</a></li>
<li class="chapter" data-level="10.4.4" data-path="functionals.html"><a href="functionals.html#reduce2"><i class="fa fa-check"></i><b>10.4.4</b> reduce2</a></li>
<li class="chapter" data-level="10.4.5" data-path="functionals.html"><a href="functionals.html#accumulate"><i class="fa fa-check"></i><b>10.4.5</b> Accumulate</a></li>
<li class="chapter" data-level="10.4.6" data-path="functionals.html"><a href="functionals.html#map-reduce"><i class="fa fa-check"></i><b>10.4.6</b> Map-reduce</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="functionals.html"><a href="functionals.html#predicate-functionals"><i class="fa fa-check"></i><b>10.5</b> Predicate functionals</a><ul>
<li class="chapter" data-level="10.5.1" data-path="functionals.html"><a href="functionals.html#basics-3"><i class="fa fa-check"></i><b>10.5.1</b> Basics</a></li>
<li class="chapter" data-level="10.5.2" data-path="functionals.html"><a href="functionals.html#predicate-map"><i class="fa fa-check"></i><b>10.5.2</b> Map variants</a></li>
<li class="chapter" data-level="10.5.3" data-path="functionals.html"><a href="functionals.html#exercises-29"><i class="fa fa-check"></i><b>10.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="functionals.html"><a href="functionals.html#functionals-math"><i class="fa fa-check"></i><b>10.6</b> Base functionals</a><ul>
<li class="chapter" data-level="10.6.1" data-path="functionals.html"><a href="functionals.html#matrices-and-array-operations"><i class="fa fa-check"></i><b>10.6.1</b> Matrices and array operations</a></li>
<li class="chapter" data-level="10.6.2" data-path="functionals.html"><a href="functionals.html#tapply"><i class="fa fa-check"></i><b>10.6.2</b> <code>tapply()</code></a></li>
<li class="chapter" data-level="10.6.3" data-path="functionals.html"><a href="functionals.html#mathmatical"><i class="fa fa-check"></i><b>10.6.3</b> Mathmatical</a></li>
<li class="chapter" data-level="10.6.4" data-path="functionals.html"><a href="functionals.html#exercises-30"><i class="fa fa-check"></i><b>10.6.4</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="function-factories.html"><a href="function-factories.html"><i class="fa fa-check"></i><b>11</b> Function factories</a><ul>
<li class="chapter" data-level="11.1" data-path="function-factories.html"><a href="function-factories.html#introduction-8"><i class="fa fa-check"></i><b>11.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="function-factories.html"><a href="function-factories.html#outline-6"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="function-factories.html"><a href="function-factories.html#prerequisites-4"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="function-factories.html"><a href="function-factories.html#factory-fundamentals"><i class="fa fa-check"></i><b>11.2</b> Factory fundamentals</a><ul>
<li class="chapter" data-level="11.2.1" data-path="function-factories.html"><a href="function-factories.html#environments-1"><i class="fa fa-check"></i><b>11.2.1</b> Environments</a></li>
<li class="chapter" data-level="11.2.2" data-path="function-factories.html"><a href="function-factories.html#diagram-conventions"><i class="fa fa-check"></i><b>11.2.2</b> Diagram conventions</a></li>
<li class="chapter" data-level="11.2.3" data-path="function-factories.html"><a href="function-factories.html#stateful-funs"><i class="fa fa-check"></i><b>11.2.3</b> Stateful functions</a></li>
<li class="chapter" data-level="11.2.4" data-path="function-factories.html"><a href="function-factories.html#potential-pitfalls"><i class="fa fa-check"></i><b>11.2.4</b> Potential pitfalls</a></li>
<li class="chapter" data-level="11.2.5" data-path="function-factories.html"><a href="function-factories.html#exercises-31"><i class="fa fa-check"></i><b>11.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="function-factories.html"><a href="function-factories.html#graph-fact"><i class="fa fa-check"></i><b>11.3</b> Graphical factories</a><ul>
<li class="chapter" data-level="11.3.1" data-path="function-factories.html"><a href="function-factories.html#labelling"><i class="fa fa-check"></i><b>11.3.1</b> Labelling</a></li>
<li class="chapter" data-level="11.3.2" data-path="function-factories.html"><a href="function-factories.html#histogram-bins"><i class="fa fa-check"></i><b>11.3.2</b> Histogram bins</a></li>
<li class="chapter" data-level="11.3.3" data-path="function-factories.html"><a href="function-factories.html#ggsave"><i class="fa fa-check"></i><b>11.3.3</b> ggsave</a></li>
<li class="chapter" data-level="11.3.4" data-path="function-factories.html"><a href="function-factories.html#exercises-32"><i class="fa fa-check"></i><b>11.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="function-factories.html"><a href="function-factories.html#stat-fact"><i class="fa fa-check"></i><b>11.4</b> Statistical factories</a><ul>
<li class="chapter" data-level="11.4.1" data-path="function-factories.html"><a href="function-factories.html#box-cox-transformation"><i class="fa fa-check"></i><b>11.4.1</b> Box-Cox transformation</a></li>
<li class="chapter" data-level="11.4.2" data-path="function-factories.html"><a href="function-factories.html#bootstrap-generators"><i class="fa fa-check"></i><b>11.4.2</b> Bootstrap generators</a></li>
<li class="chapter" data-level="11.4.3" data-path="function-factories.html"><a href="function-factories.html#MLE"><i class="fa fa-check"></i><b>11.4.3</b> Maximum likelihood estimation</a></li>
<li class="chapter" data-level="11.4.4" data-path="function-factories.html"><a href="function-factories.html#exercises-33"><i class="fa fa-check"></i><b>11.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="function-factories.html"><a href="function-factories.html#functional-factories"><i class="fa fa-check"></i><b>11.5</b> Function factories + functionals</a><ul>
<li class="chapter" data-level="11.5.1" data-path="function-factories.html"><a href="function-factories.html#moving-a-lists-to-the-global-environment"><i class="fa fa-check"></i><b>11.5.1</b> Moving a lists to the global environment</a></li>
<li class="chapter" data-level="11.5.2" data-path="function-factories.html"><a href="function-factories.html#another-approach"><i class="fa fa-check"></i><b>11.5.2</b> Another approach</a></li>
<li class="chapter" data-level="11.5.3" data-path="function-factories.html"><a href="function-factories.html#exercises-34"><i class="fa fa-check"></i><b>11.5.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="function-operators.html"><a href="function-operators.html"><i class="fa fa-check"></i><b>12</b> Function operators</a><ul>
<li class="chapter" data-level="12.1" data-path="function-operators.html"><a href="function-operators.html#introduction-9"><i class="fa fa-check"></i><b>12.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="function-operators.html"><a href="function-operators.html#outline-7"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="function-operators.html"><a href="function-operators.html#prerequisites-5"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="function-operators.html"><a href="function-operators.html#behavioural-fos"><i class="fa fa-check"></i><b>12.2</b> Behavioural FOs</a><ul>
<li class="chapter" data-level="12.2.1" data-path="function-operators.html"><a href="function-operators.html#memoisation"><i class="fa fa-check"></i><b>12.2.1</b> Memoisation</a></li>
<li class="chapter" data-level="12.2.2" data-path="function-operators.html"><a href="function-operators.html#tee"><i class="fa fa-check"></i><b>12.2.2</b> Capturing function invocations</a></li>
<li class="chapter" data-level="12.2.3" data-path="function-operators.html"><a href="function-operators.html#laziness"><i class="fa fa-check"></i><b>12.2.3</b> Laziness</a></li>
<li class="chapter" data-level="12.2.4" data-path="function-operators.html"><a href="function-operators.html#exercises-35"><i class="fa fa-check"></i><b>12.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="function-operators.html"><a href="function-operators.html#output-fos"><i class="fa fa-check"></i><b>12.3</b> Output FOs</a><ul>
<li class="chapter" data-level="12.3.1" data-path="function-operators.html"><a href="function-operators.html#minor-modifications"><i class="fa fa-check"></i><b>12.3.1</b> Minor modifications</a></li>
<li class="chapter" data-level="12.3.2" data-path="function-operators.html"><a href="function-operators.html#changing-what-a-function-does"><i class="fa fa-check"></i><b>12.3.2</b> Changing what a function does</a></li>
<li class="chapter" data-level="12.3.3" data-path="function-operators.html"><a href="function-operators.html#exercises-36"><i class="fa fa-check"></i><b>12.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="function-operators.html"><a href="function-operators.html#input-fos"><i class="fa fa-check"></i><b>12.4</b> Input FOs</a><ul>
<li class="chapter" data-level="12.4.1" data-path="function-operators.html"><a href="function-operators.html#prefilling-function-arguments-partial-function-application"><i class="fa fa-check"></i><b>12.4.1</b> Prefilling function arguments: partial function application</a></li>
<li class="chapter" data-level="12.4.2" data-path="function-operators.html"><a href="function-operators.html#changing-input-types"><i class="fa fa-check"></i><b>12.4.2</b> Changing input types</a></li>
<li class="chapter" data-level="12.4.3" data-path="function-operators.html"><a href="function-operators.html#exercises-37"><i class="fa fa-check"></i><b>12.4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="function-operators.html"><a href="function-operators.html#combining-fos"><i class="fa fa-check"></i><b>12.5</b> Combining FOs</a><ul>
<li class="chapter" data-level="12.5.1" data-path="function-operators.html"><a href="function-operators.html#function-composition"><i class="fa fa-check"></i><b>12.5.1</b> Function composition</a></li>
<li class="chapter" data-level="12.5.2" data-path="function-operators.html"><a href="function-operators.html#logical-predicates-and-boolean-algebra"><i class="fa fa-check"></i><b>12.5.2</b> Logical predicates and boolean algebra</a></li>
<li class="chapter" data-level="12.5.3" data-path="function-operators.html"><a href="function-operators.html#exercises-38"><i class="fa fa-check"></i><b>12.5.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Object oriented programming</b></span></li>
<li class="chapter" data-level="" data-path="oo.html"><a href="oo.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="12.6" data-path="oo.html"><a href="oo.html#oop-systems"><i class="fa fa-check"></i><b>12.6</b> OOP Systems</a></li>
<li class="chapter" data-level="12.7" data-path="oo.html"><a href="oo.html#oop-in-r"><i class="fa fa-check"></i><b>12.7</b> OOP in R</a></li>
<li class="chapter" data-level="12.8" data-path="oo.html"><a href="oo.html#field-guide"><i class="fa fa-check"></i><b>12.8</b> Field guide</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="base-types.html"><a href="base-types.html"><i class="fa fa-check"></i><b>13</b> Base types</a><ul>
<li class="chapter" data-level="13.1" data-path="base-types.html"><a href="base-types.html#introduction-10"><i class="fa fa-check"></i><b>13.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="base-types.html"><a href="base-types.html#outline-8"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="base-types.html"><a href="base-types.html#base-objects-vs-oo-objects"><i class="fa fa-check"></i><b>13.2</b> Base objects vs OO objects</a></li>
<li class="chapter" data-level="13.3" data-path="base-types.html"><a href="base-types.html#base-types-2"><i class="fa fa-check"></i><b>13.3</b> Base types</a></li>
<li class="chapter" data-level="13.4" data-path="base-types.html"><a href="base-types.html#is-functions"><i class="fa fa-check"></i><b>13.4</b> The is functions</a><ul>
<li class="chapter" data-level="13.4.1" data-path="base-types.html"><a href="base-types.html#numeric-type"><i class="fa fa-check"></i><b>13.4.1</b> Numeric type</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="s3.html"><a href="s3.html"><i class="fa fa-check"></i><b>14</b> S3</a><ul>
<li class="chapter" data-level="14.1" data-path="s3.html"><a href="s3.html#introduction-11"><i class="fa fa-check"></i><b>14.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="s3.html"><a href="s3.html#outline-9"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="s3.html"><a href="s3.html#prerequisites-6"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="s3.html"><a href="s3.html#s3-basics"><i class="fa fa-check"></i><b>14.2</b> Basics</a><ul>
<li class="chapter" data-level="14.2.1" data-path="s3.html"><a href="s3.html#exercises-39"><i class="fa fa-check"></i><b>14.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="s3.html"><a href="s3.html#classes"><i class="fa fa-check"></i><b>14.3</b> Classes</a><ul>
<li class="chapter" data-level="14.3.1" data-path="s3.html"><a href="s3.html#constructors"><i class="fa fa-check"></i><b>14.3.1</b> Constructors</a></li>
<li class="chapter" data-level="14.3.2" data-path="s3.html"><a href="s3.html#validators"><i class="fa fa-check"></i><b>14.3.2</b> Validators</a></li>
<li class="chapter" data-level="14.3.3" data-path="s3.html"><a href="s3.html#helpers"><i class="fa fa-check"></i><b>14.3.3</b> Helpers</a></li>
<li class="chapter" data-level="14.3.4" data-path="s3.html"><a href="s3.html#object-styles"><i class="fa fa-check"></i><b>14.3.4</b> Object styles</a></li>
<li class="chapter" data-level="14.3.5" data-path="s3.html"><a href="s3.html#exercises-40"><i class="fa fa-check"></i><b>14.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="s3.html"><a href="s3.html#generics-and-methods"><i class="fa fa-check"></i><b>14.4</b> Generics and methods</a><ul>
<li class="chapter" data-level="14.4.1" data-path="s3.html"><a href="s3.html#coercion"><i class="fa fa-check"></i><b>14.4.1</b> Coercion</a></li>
<li class="chapter" data-level="14.4.2" data-path="s3.html"><a href="s3.html#s3-arguments"><i class="fa fa-check"></i><b>14.4.2</b> Arguments</a></li>
<li class="chapter" data-level="14.4.3" data-path="s3.html"><a href="s3.html#exercises-41"><i class="fa fa-check"></i><b>14.4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="s3.html"><a href="s3.html#method-dispatch"><i class="fa fa-check"></i><b>14.5</b> Method dispatch</a><ul>
<li class="chapter" data-level="14.5.1" data-path="s3.html"><a href="s3.html#usemethod"><i class="fa fa-check"></i><b>14.5.1</b> <code>UseMethod()</code></a></li>
<li class="chapter" data-level="14.5.2" data-path="s3.html"><a href="s3.html#nextmethod"><i class="fa fa-check"></i><b>14.5.2</b> <code>NextMethod()</code></a></li>
<li class="chapter" data-level="14.5.3" data-path="s3.html"><a href="s3.html#exercises-42"><i class="fa fa-check"></i><b>14.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="s3.html"><a href="s3.html#inheritance"><i class="fa fa-check"></i><b>14.6</b> Inheritance</a><ul>
<li class="chapter" data-level="14.6.1" data-path="s3.html"><a href="s3.html#constructors-1"><i class="fa fa-check"></i><b>14.6.1</b> Constructors</a></li>
<li class="chapter" data-level="14.6.2" data-path="s3.html"><a href="s3.html#coercion-1"><i class="fa fa-check"></i><b>14.6.2</b> Coercion</a></li>
<li class="chapter" data-level="14.6.3" data-path="s3.html"><a href="s3.html#methods"><i class="fa fa-check"></i><b>14.6.3</b> Methods</a></li>
<li class="chapter" data-level="14.6.4" data-path="s3.html"><a href="s3.html#exercises-43"><i class="fa fa-check"></i><b>14.6.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="s3.html"><a href="s3.html#dispatch-details"><i class="fa fa-check"></i><b>14.7</b> Dispatch details</a><ul>
<li class="chapter" data-level="14.7.1" data-path="s3.html"><a href="s3.html#environments-and-namespaces"><i class="fa fa-check"></i><b>14.7.1</b> Environments and namespaces</a></li>
<li class="chapter" data-level="14.7.2" data-path="s3.html"><a href="s3.html#s3-and-base-types"><i class="fa fa-check"></i><b>14.7.2</b> S3 and base types</a></li>
<li class="chapter" data-level="14.7.3" data-path="s3.html"><a href="s3.html#internal-generics"><i class="fa fa-check"></i><b>14.7.3</b> Internal generics</a></li>
<li class="chapter" data-level="14.7.4" data-path="s3.html"><a href="s3.html#group-generics"><i class="fa fa-check"></i><b>14.7.4</b> Group generics</a></li>
<li class="chapter" data-level="14.7.5" data-path="s3.html"><a href="s3.html#double-dispatch"><i class="fa fa-check"></i><b>14.7.5</b> Double dispatch</a></li>
<li class="chapter" data-level="14.7.6" data-path="s3.html"><a href="s3.html#exercises-44"><i class="fa fa-check"></i><b>14.7.6</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="s4.html"><a href="s4.html"><i class="fa fa-check"></i><b>15</b> S4</a><ul>
<li class="chapter" data-level="15.1" data-path="s4.html"><a href="s4.html#introduction-12"><i class="fa fa-check"></i><b>15.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="s4.html"><a href="s4.html#outline-10"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="s4.html"><a href="s4.html#prerequisites-7"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="s4.html"><a href="s4.html#classes-1"><i class="fa fa-check"></i><b>15.2</b> Classes</a><ul>
<li class="chapter" data-level="15.2.1" data-path="s4.html"><a href="s4.html#slots"><i class="fa fa-check"></i><b>15.2.1</b> Slots</a></li>
<li class="chapter" data-level="15.2.2" data-path="s4.html"><a href="s4.html#helper"><i class="fa fa-check"></i><b>15.2.2</b> Helper</a></li>
<li class="chapter" data-level="15.2.3" data-path="s4.html"><a href="s4.html#introspection"><i class="fa fa-check"></i><b>15.2.3</b> Introspection</a></li>
<li class="chapter" data-level="15.2.4" data-path="s4.html"><a href="s4.html#exercises-45"><i class="fa fa-check"></i><b>15.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="s4.html"><a href="s4.html#generics-and-methods-1"><i class="fa fa-check"></i><b>15.3</b> Generics and methods</a><ul>
<li class="chapter" data-level="15.3.1" data-path="s4.html"><a href="s4.html#show-method"><i class="fa fa-check"></i><b>15.3.1</b> Show method</a></li>
<li class="chapter" data-level="15.3.2" data-path="s4.html"><a href="s4.html#accessor-methods"><i class="fa fa-check"></i><b>15.3.2</b> Accessor methods</a></li>
<li class="chapter" data-level="15.3.3" data-path="s4.html"><a href="s4.html#coercion-methods"><i class="fa fa-check"></i><b>15.3.3</b> Coercion methods</a></li>
<li class="chapter" data-level="15.3.4" data-path="s4.html"><a href="s4.html#introspection-1"><i class="fa fa-check"></i><b>15.3.4</b> Introspection</a></li>
<li class="chapter" data-level="15.3.5" data-path="s4.html"><a href="s4.html#exercises-46"><i class="fa fa-check"></i><b>15.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="s4.html"><a href="s4.html#method-dispatch-1"><i class="fa fa-check"></i><b>15.4</b> Method dispatch</a><ul>
<li class="chapter" data-level="15.4.1" data-path="s4.html"><a href="s4.html#single-dispatch"><i class="fa fa-check"></i><b>15.4.1</b> Single dispatch</a></li>
<li class="chapter" data-level="15.4.2" data-path="s4.html"><a href="s4.html#multiple-inheritance"><i class="fa fa-check"></i><b>15.4.2</b> Multiple inheritance</a></li>
<li class="chapter" data-level="15.4.3" data-path="s4.html"><a href="s4.html#multiple-dispatch"><i class="fa fa-check"></i><b>15.4.3</b> Multiple dispatch</a></li>
<li class="chapter" data-level="15.4.4" data-path="s4.html"><a href="s4.html#multiple-dispatch-and-multiple-inheritance"><i class="fa fa-check"></i><b>15.4.4</b> Multiple dispatch and multiple inheritance</a></li>
<li class="chapter" data-level="15.4.5" data-path="s4.html"><a href="s4.html#exercises-47"><i class="fa fa-check"></i><b>15.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="s4.html"><a href="s4.html#s4-and-existing-code"><i class="fa fa-check"></i><b>15.5</b> S4 and existing code</a><ul>
<li class="chapter" data-level="15.5.1" data-path="s4.html"><a href="s4.html#classes-2"><i class="fa fa-check"></i><b>15.5.1</b> Classes</a></li>
<li class="chapter" data-level="15.5.2" data-path="s4.html"><a href="s4.html#generics"><i class="fa fa-check"></i><b>15.5.2</b> Generics</a></li>
<li class="chapter" data-level="15.5.3" data-path="s4.html"><a href="s4.html#exercises-48"><i class="fa fa-check"></i><b>15.5.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="R6.html"><a href="R6.html"><i class="fa fa-check"></i><b>16</b> R6</a><ul>
<li class="chapter" data-level="16.1" data-path="R6.html"><a href="R6.html#introduction-13"><i class="fa fa-check"></i><b>16.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="R6.html"><a href="R6.html#outline-11"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="R6.html"><a href="R6.html#prequisites"><i class="fa fa-check"></i>Prequisites</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="R6.html"><a href="R6.html#classes-and-methods"><i class="fa fa-check"></i><b>16.2</b> Classes and methods</a><ul>
<li class="chapter" data-level="16.2.1" data-path="R6.html"><a href="R6.html#method-chaining"><i class="fa fa-check"></i><b>16.2.1</b> Method chaining</a></li>
<li class="chapter" data-level="16.2.2" data-path="R6.html"><a href="R6.html#important-methods"><i class="fa fa-check"></i><b>16.2.2</b> Important methods</a></li>
<li class="chapter" data-level="16.2.3" data-path="R6.html"><a href="R6.html#adding-methods-after-creation"><i class="fa fa-check"></i><b>16.2.3</b> Adding methods after creation</a></li>
<li class="chapter" data-level="16.2.4" data-path="R6.html"><a href="R6.html#inheritance-1"><i class="fa fa-check"></i><b>16.2.4</b> Inheritance</a></li>
<li class="chapter" data-level="16.2.5" data-path="R6.html"><a href="R6.html#introspection-2"><i class="fa fa-check"></i><b>16.2.5</b> Introspection</a></li>
<li class="chapter" data-level="16.2.6" data-path="R6.html"><a href="R6.html#exercises-49"><i class="fa fa-check"></i><b>16.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="R6.html"><a href="R6.html#controlling-access"><i class="fa fa-check"></i><b>16.3</b> Controlling access</a><ul>
<li class="chapter" data-level="16.3.1" data-path="R6.html"><a href="R6.html#privacy"><i class="fa fa-check"></i><b>16.3.1</b> Privacy</a></li>
<li class="chapter" data-level="16.3.2" data-path="R6.html"><a href="R6.html#active-fields"><i class="fa fa-check"></i><b>16.3.2</b> Active fields</a></li>
<li class="chapter" data-level="16.3.3" data-path="R6.html"><a href="R6.html#exercises-50"><i class="fa fa-check"></i><b>16.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="R6.html"><a href="R6.html#reference-semantics"><i class="fa fa-check"></i><b>16.4</b> Reference semantics</a><ul>
<li class="chapter" data-level="16.4.1" data-path="R6.html"><a href="R6.html#reasoning"><i class="fa fa-check"></i><b>16.4.1</b> Reasoning</a></li>
<li class="chapter" data-level="16.4.2" data-path="R6.html"><a href="R6.html#finalizer"><i class="fa fa-check"></i><b>16.4.2</b> Finalizer</a></li>
<li class="chapter" data-level="16.4.3" data-path="R6.html"><a href="R6.html#r6-fields"><i class="fa fa-check"></i><b>16.4.3</b> R6 fields</a></li>
<li class="chapter" data-level="16.4.4" data-path="R6.html"><a href="R6.html#exercises-51"><i class="fa fa-check"></i><b>16.4.4</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html"><i class="fa fa-check"></i><b>17</b> Trade-offs</a><ul>
<li class="chapter" data-level="17.1" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#introduction-14"><i class="fa fa-check"></i><b>17.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#outline-12"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#s3-s4"><i class="fa fa-check"></i><b>17.2</b> S4 vs S3</a></li>
<li class="chapter" data-level="17.3" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#s3-r6"><i class="fa fa-check"></i><b>17.3</b> R6 vs S3</a><ul>
<li class="chapter" data-level="17.3.1" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#namespacing"><i class="fa fa-check"></i><b>17.3.1</b> Namespacing</a></li>
<li class="chapter" data-level="17.3.2" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#threading-state"><i class="fa fa-check"></i><b>17.3.2</b> Threading state</a></li>
<li class="chapter" data-level="17.3.3" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#tradeoffs-pipe"><i class="fa fa-check"></i><b>17.3.3</b> Method chaining</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Metaprogramming</b></span></li>
<li class="chapter" data-level="" data-path="meta.html"><a href="meta.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="17.3.4" data-path="meta.html"><a href="meta.html#trading-precision-for-concision"><i class="fa fa-check"></i><b>17.3.4</b> Trading precision for concision</a></li>
<li class="chapter" data-level="17.4" data-path="meta.html"><a href="meta.html#domain-specific-languages"><i class="fa fa-check"></i><b>17.4</b> Domain specific languages</a></li>
<li class="chapter" data-level="17.5" data-path="meta.html"><a href="meta.html#overview-1"><i class="fa fa-check"></i><b>17.5</b> Overview</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="expressions.html"><a href="expressions.html"><i class="fa fa-check"></i><b>18</b> Expressions</a><ul>
<li class="chapter" data-level="18.1" data-path="expressions.html"><a href="expressions.html#introduction-15"><i class="fa fa-check"></i><b>18.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="expressions.html"><a href="expressions.html#outline-13"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="expressions.html"><a href="expressions.html#prerequisites-8"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="expressions.html"><a href="expressions.html#abstract-syntax-trees"><i class="fa fa-check"></i><b>18.2</b> Abstract syntax trees</a><ul>
<li class="chapter" data-level="18.2.1" data-path="expressions.html"><a href="expressions.html#infix-vs.prefix-calls"><i class="fa fa-check"></i><b>18.2.1</b> Infix vs. prefix calls</a></li>
<li class="chapter" data-level="18.2.2" data-path="expressions.html"><a href="expressions.html#special-forms-1"><i class="fa fa-check"></i><b>18.2.2</b> Special forms</a></li>
<li class="chapter" data-level="18.2.3" data-path="expressions.html"><a href="expressions.html#function-factories-1"><i class="fa fa-check"></i><b>18.2.3</b> Function factories</a></li>
<li class="chapter" data-level="18.2.4" data-path="expressions.html"><a href="expressions.html#argument-names-1"><i class="fa fa-check"></i><b>18.2.4</b> Argument names</a></li>
<li class="chapter" data-level="18.2.5" data-path="expressions.html"><a href="expressions.html#exercises-52"><i class="fa fa-check"></i><b>18.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="expressions.html"><a href="expressions.html#rs-grammar"><i class="fa fa-check"></i><b>18.3</b> R’s grammar</a><ul>
<li class="chapter" data-level="18.3.1" data-path="expressions.html"><a href="expressions.html#operator-precedence"><i class="fa fa-check"></i><b>18.3.1</b> Operator precedence</a></li>
<li class="chapter" data-level="18.3.2" data-path="expressions.html"><a href="expressions.html#associativity"><i class="fa fa-check"></i><b>18.3.2</b> Associativity</a></li>
<li class="chapter" data-level="18.3.3" data-path="expressions.html"><a href="expressions.html#whitespace"><i class="fa fa-check"></i><b>18.3.3</b> Whitespace</a></li>
<li class="chapter" data-level="18.3.4" data-path="expressions.html"><a href="expressions.html#exercises-53"><i class="fa fa-check"></i><b>18.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="expressions.html"><a href="expressions.html#data-structures"><i class="fa fa-check"></i><b>18.4</b> Data structures</a><ul>
<li class="chapter" data-level="18.4.1" data-path="expressions.html"><a href="expressions.html#naming-conventions"><i class="fa fa-check"></i><b>18.4.1</b> Naming conventions</a></li>
<li class="chapter" data-level="18.4.2" data-path="expressions.html"><a href="expressions.html#constants"><i class="fa fa-check"></i><b>18.4.2</b> Constants</a></li>
<li class="chapter" data-level="18.4.3" data-path="expressions.html"><a href="expressions.html#symbols"><i class="fa fa-check"></i><b>18.4.3</b> Symbols</a></li>
<li class="chapter" data-level="18.4.4" data-path="expressions.html"><a href="expressions.html#calls"><i class="fa fa-check"></i><b>18.4.4</b> Calls</a></li>
<li class="chapter" data-level="18.4.5" data-path="expressions.html"><a href="expressions.html#pairlists"><i class="fa fa-check"></i><b>18.4.5</b> Pairlists</a></li>
<li class="chapter" data-level="18.4.6" data-path="expressions.html"><a href="expressions.html#expression-objects"><i class="fa fa-check"></i><b>18.4.6</b> Expression objects</a></li>
<li class="chapter" data-level="18.4.7" data-path="expressions.html"><a href="expressions.html#exercises-54"><i class="fa fa-check"></i><b>18.4.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="expressions.html"><a href="expressions.html#parsing-and-deparsing"><i class="fa fa-check"></i><b>18.5</b> Parsing and deparsing</a><ul>
<li class="chapter" data-level="18.5.1" data-path="expressions.html"><a href="expressions.html#exercises-55"><i class="fa fa-check"></i><b>18.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="expressions.html"><a href="expressions.html#ast-funs"><i class="fa fa-check"></i><b>18.6</b> Case study: Walking the AST with recursive functions</a><ul>
<li class="chapter" data-level="18.6.1" data-path="expressions.html"><a href="expressions.html#finding-f-and-t"><i class="fa fa-check"></i><b>18.6.1</b> Finding F and T</a></li>
<li class="chapter" data-level="18.6.2" data-path="expressions.html"><a href="expressions.html#finding-all-variables-created-by-assignment"><i class="fa fa-check"></i><b>18.6.2</b> Finding all variables created by assignment</a></li>
<li class="chapter" data-level="18.6.3" data-path="expressions.html"><a href="expressions.html#exercises-56"><i class="fa fa-check"></i><b>18.6.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="quasiquotation.html"><a href="quasiquotation.html"><i class="fa fa-check"></i><b>19</b> Quasiquotation</a><ul>
<li class="chapter" data-level="19.1" data-path="quasiquotation.html"><a href="quasiquotation.html#introduction-16"><i class="fa fa-check"></i><b>19.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="quasiquotation.html"><a href="quasiquotation.html#outline-14"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="quasiquotation.html"><a href="quasiquotation.html#prerequisites-9"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="quasiquotation.html"><a href="quasiquotation.html#motivation-1"><i class="fa fa-check"></i><b>19.2</b> Motivation</a><ul>
<li class="chapter" data-level="19.2.1" data-path="quasiquotation.html"><a href="quasiquotation.html#vocabulary"><i class="fa fa-check"></i><b>19.2.1</b> Vocabulary</a></li>
<li class="chapter" data-level="19.2.2" data-path="quasiquotation.html"><a href="quasiquotation.html#theory"><i class="fa fa-check"></i><b>19.2.2</b> Theory</a></li>
<li class="chapter" data-level="19.2.3" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-57"><i class="fa fa-check"></i><b>19.2.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="quasiquotation.html"><a href="quasiquotation.html#quotation"><i class="fa fa-check"></i><b>19.3</b> Quotation</a><ul>
<li class="chapter" data-level="19.3.1" data-path="quasiquotation.html"><a href="quasiquotation.html#with-rlang"><i class="fa fa-check"></i><b>19.3.1</b> With rlang</a></li>
<li class="chapter" data-level="19.3.2" data-path="quasiquotation.html"><a href="quasiquotation.html#with-base-r"><i class="fa fa-check"></i><b>19.3.2</b> With base R</a></li>
<li class="chapter" data-level="19.3.3" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-58"><i class="fa fa-check"></i><b>19.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="quasiquotation.html"><a href="quasiquotation.html#eval-basics"><i class="fa fa-check"></i><b>19.4</b> Evaluation</a></li>
<li class="chapter" data-level="19.5" data-path="quasiquotation.html"><a href="quasiquotation.html#unquotation"><i class="fa fa-check"></i><b>19.5</b> Unquotation</a><ul>
<li class="chapter" data-level="19.5.1" data-path="quasiquotation.html"><a href="quasiquotation.html#with-rlang-1"><i class="fa fa-check"></i><b>19.5.1</b> With rlang</a></li>
<li class="chapter" data-level="19.5.2" data-path="quasiquotation.html"><a href="quasiquotation.html#the-polite-fiction-of"><i class="fa fa-check"></i><b>19.5.2</b> The polite fiction of <code>!!</code></a></li>
<li class="chapter" data-level="19.5.3" data-path="quasiquotation.html"><a href="quasiquotation.html#unquote-base"><i class="fa fa-check"></i><b>19.5.3</b> With base R</a></li>
<li class="chapter" data-level="19.5.4" data-path="quasiquotation.html"><a href="quasiquotation.html#non-standard-asts"><i class="fa fa-check"></i><b>19.5.4</b> Non-standard ASTs</a></li>
<li class="chapter" data-level="19.5.5" data-path="quasiquotation.html"><a href="quasiquotation.html#missing-arguments-1"><i class="fa fa-check"></i><b>19.5.5</b> Missing arguments</a></li>
<li class="chapter" data-level="19.5.6" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-59"><i class="fa fa-check"></i><b>19.5.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="quasiquotation.html"><a href="quasiquotation.html#quasi-case-studies"><i class="fa fa-check"></i><b>19.6</b> Case studies</a><ul>
<li class="chapter" data-level="19.6.1" data-path="quasiquotation.html"><a href="quasiquotation.html#map-reduce-to-generate-code"><i class="fa fa-check"></i><b>19.6.1</b> Map-reduce to generate code</a></li>
<li class="chapter" data-level="19.6.2" data-path="quasiquotation.html"><a href="quasiquotation.html#partition"><i class="fa fa-check"></i><b>19.6.2</b> Partition</a></li>
<li class="chapter" data-level="19.6.3" data-path="quasiquotation.html"><a href="quasiquotation.html#slicing-an-array"><i class="fa fa-check"></i><b>19.6.3</b> Slicing an array</a></li>
<li class="chapter" data-level="19.6.4" data-path="quasiquotation.html"><a href="quasiquotation.html#quasi-function"><i class="fa fa-check"></i><b>19.6.4</b> Creating functions</a></li>
<li class="chapter" data-level="19.6.5" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-60"><i class="fa fa-check"></i><b>19.6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="quasiquotation.html"><a href="quasiquotation.html#dot-dot-dot-..."><i class="fa fa-check"></i><b>19.7</b> Dot-dot-dot (<code>...</code>)</a><ul>
<li class="chapter" data-level="19.7.1" data-path="quasiquotation.html"><a href="quasiquotation.html#do.call"><i class="fa fa-check"></i><b>19.7.1</b> <code>do.call()</code></a></li>
<li class="chapter" data-level="19.7.2" data-path="quasiquotation.html"><a href="quasiquotation.html#the-tidyverse-approach"><i class="fa fa-check"></i><b>19.7.2</b> The tidyverse approach</a></li>
<li class="chapter" data-level="19.7.3" data-path="quasiquotation.html"><a href="quasiquotation.html#list2"><i class="fa fa-check"></i><b>19.7.3</b> <code>list2()</code></a></li>
<li class="chapter" data-level="19.7.4" data-path="quasiquotation.html"><a href="quasiquotation.html#application-invoke-and-lang"><i class="fa fa-check"></i><b>19.7.4</b> Application: <code>invoke()</code> and <code>lang()</code></a></li>
<li class="chapter" data-level="19.7.5" data-path="quasiquotation.html"><a href="quasiquotation.html#other-approaches"><i class="fa fa-check"></i><b>19.7.5</b> Other approaches</a></li>
<li class="chapter" data-level="19.7.6" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-61"><i class="fa fa-check"></i><b>19.7.6</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="evaluation.html"><a href="evaluation.html"><i class="fa fa-check"></i><b>20</b> Evaluation</a><ul>
<li class="chapter" data-level="20.1" data-path="evaluation.html"><a href="evaluation.html#introduction-17"><i class="fa fa-check"></i><b>20.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="evaluation.html"><a href="evaluation.html#outline-15"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="evaluation.html"><a href="evaluation.html#prerequisites-10"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="evaluation.html"><a href="evaluation.html#evaluation-basics"><i class="fa fa-check"></i><b>20.2</b> Evaluation basics</a><ul>
<li class="chapter" data-level="20.2.1" data-path="evaluation.html"><a href="evaluation.html#application-local"><i class="fa fa-check"></i><b>20.2.1</b> Application: <code>local()</code></a></li>
<li class="chapter" data-level="20.2.2" data-path="evaluation.html"><a href="evaluation.html#application-source"><i class="fa fa-check"></i><b>20.2.2</b> Application: <code>source()</code></a></li>
<li class="chapter" data-level="20.2.3" data-path="evaluation.html"><a href="evaluation.html#gotcha-function"><i class="fa fa-check"></i><b>20.2.3</b> Gotcha: <code>function()</code></a></li>
<li class="chapter" data-level="20.2.4" data-path="evaluation.html"><a href="evaluation.html#eval-frame"><i class="fa fa-check"></i><b>20.2.4</b> Advanced: environments vs. frames</a></li>
<li class="chapter" data-level="20.2.5" data-path="evaluation.html"><a href="evaluation.html#base-r"><i class="fa fa-check"></i><b>20.2.5</b> Base R</a></li>
<li class="chapter" data-level="20.2.6" data-path="evaluation.html"><a href="evaluation.html#exercises-62"><i class="fa fa-check"></i><b>20.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="evaluation.html"><a href="evaluation.html#quosures"><i class="fa fa-check"></i><b>20.3</b> Quosures</a><ul>
<li class="chapter" data-level="20.3.1" data-path="evaluation.html"><a href="evaluation.html#motivation-2"><i class="fa fa-check"></i><b>20.3.1</b> Motivation</a></li>
<li class="chapter" data-level="20.3.2" data-path="evaluation.html"><a href="evaluation.html#creating-and-manipulating"><i class="fa fa-check"></i><b>20.3.2</b> Creating and manipulating</a></li>
<li class="chapter" data-level="20.3.3" data-path="evaluation.html"><a href="evaluation.html#evaluating"><i class="fa fa-check"></i><b>20.3.3</b> Evaluating</a></li>
<li class="chapter" data-level="20.3.4" data-path="evaluation.html"><a href="evaluation.html#implementation"><i class="fa fa-check"></i><b>20.3.4</b> Implementation</a></li>
<li class="chapter" data-level="20.3.5" data-path="evaluation.html"><a href="evaluation.html#when-not-to-use-quosures"><i class="fa fa-check"></i><b>20.3.5</b> When not to use quosures</a></li>
<li class="chapter" data-level="20.3.6" data-path="evaluation.html"><a href="evaluation.html#exercises-63"><i class="fa fa-check"></i><b>20.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="evaluation.html"><a href="evaluation.html#tidy-evaluation"><i class="fa fa-check"></i><b>20.4</b> Tidy evaluation</a><ul>
<li class="chapter" data-level="20.4.1" data-path="evaluation.html"><a href="evaluation.html#data-masks"><i class="fa fa-check"></i><b>20.4.1</b> Data masks</a></li>
<li class="chapter" data-level="20.4.2" data-path="evaluation.html"><a href="evaluation.html#subset"><i class="fa fa-check"></i><b>20.4.2</b> Application: <code>subset()</code></a></li>
<li class="chapter" data-level="20.4.3" data-path="evaluation.html"><a href="evaluation.html#application-arrange"><i class="fa fa-check"></i><b>20.4.3</b> Application: <code>arrange()</code></a></li>
<li class="chapter" data-level="20.4.4" data-path="evaluation.html"><a href="evaluation.html#ambiguity-and-pronouns"><i class="fa fa-check"></i><b>20.4.4</b> Ambiguity and pronouns</a></li>
<li class="chapter" data-level="20.4.5" data-path="evaluation.html"><a href="evaluation.html#base-subset"><i class="fa fa-check"></i><b>20.4.5</b> Base <code>subset()</code></a></li>
<li class="chapter" data-level="20.4.6" data-path="evaluation.html"><a href="evaluation.html#tidy-eval-performance"><i class="fa fa-check"></i><b>20.4.6</b> Performance</a></li>
<li class="chapter" data-level="20.4.7" data-path="evaluation.html"><a href="evaluation.html#exercises-64"><i class="fa fa-check"></i><b>20.4.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="evaluation.html"><a href="evaluation.html#wrapping-quoting-functions"><i class="fa fa-check"></i><b>20.5</b> Wrapping quoting functions</a><ul>
<li class="chapter" data-level="20.5.1" data-path="evaluation.html"><a href="evaluation.html#tidy-evaluation-1"><i class="fa fa-check"></i><b>20.5.1</b> Tidy evaluation</a></li>
<li class="chapter" data-level="20.5.2" data-path="evaluation.html"><a href="evaluation.html#base-r-1"><i class="fa fa-check"></i><b>20.5.2</b> Base R</a></li>
<li class="chapter" data-level="20.5.3" data-path="evaluation.html"><a href="evaluation.html#the-evaluation-environment"><i class="fa fa-check"></i><b>20.5.3</b> The evaluation environment</a></li>
<li class="chapter" data-level="20.5.4" data-path="evaluation.html"><a href="evaluation.html#making-formulas"><i class="fa fa-check"></i><b>20.5.4</b> Making formulas</a></li>
<li class="chapter" data-level="20.5.5" data-path="evaluation.html"><a href="evaluation.html#exercises-65"><i class="fa fa-check"></i><b>20.5.5</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="translation.html"><a href="translation.html"><i class="fa fa-check"></i><b>21</b> Translating R code</a><ul>
<li class="chapter" data-level="21.1" data-path="translation.html"><a href="translation.html#introduction-18"><i class="fa fa-check"></i><b>21.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="translation.html"><a href="translation.html#outline-16"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="translation.html"><a href="translation.html#prequisites-1"><i class="fa fa-check"></i>Prequisites</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="translation.html"><a href="translation.html#html"><i class="fa fa-check"></i><b>21.2</b> HTML</a><ul>
<li class="chapter" data-level="21.2.1" data-path="translation.html"><a href="translation.html#goal"><i class="fa fa-check"></i><b>21.2.1</b> Goal</a></li>
<li class="chapter" data-level="21.2.2" data-path="translation.html"><a href="translation.html#escaping"><i class="fa fa-check"></i><b>21.2.2</b> Escaping</a></li>
<li class="chapter" data-level="21.2.3" data-path="translation.html"><a href="translation.html#basic-tag-functions"><i class="fa fa-check"></i><b>21.2.3</b> Basic tag functions</a></li>
<li class="chapter" data-level="21.2.4" data-path="translation.html"><a href="translation.html#tag-functions"><i class="fa fa-check"></i><b>21.2.4</b> Tag functions</a></li>
<li class="chapter" data-level="21.2.5" data-path="translation.html"><a href="translation.html#processing-all-tags"><i class="fa fa-check"></i><b>21.2.5</b> Processing all tags</a></li>
<li class="chapter" data-level="21.2.6" data-path="translation.html"><a href="translation.html#exercises-66"><i class="fa fa-check"></i><b>21.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="translation.html"><a href="translation.html#latex"><i class="fa fa-check"></i><b>21.3</b> LaTeX</a><ul>
<li class="chapter" data-level="21.3.1" data-path="translation.html"><a href="translation.html#latex-mathematics"><i class="fa fa-check"></i><b>21.3.1</b> LaTeX mathematics</a></li>
<li class="chapter" data-level="21.3.2" data-path="translation.html"><a href="translation.html#goal-1"><i class="fa fa-check"></i><b>21.3.2</b> Goal</a></li>
<li class="chapter" data-level="21.3.3" data-path="translation.html"><a href="translation.html#to_math"><i class="fa fa-check"></i><b>21.3.3</b> <code>to_math</code></a></li>
<li class="chapter" data-level="21.3.4" data-path="translation.html"><a href="translation.html#known-symbols"><i class="fa fa-check"></i><b>21.3.4</b> Known symbols</a></li>
<li class="chapter" data-level="21.3.5" data-path="translation.html"><a href="translation.html#unknown-symbols"><i class="fa fa-check"></i><b>21.3.5</b> Unknown symbols</a></li>
<li class="chapter" data-level="21.3.6" data-path="translation.html"><a href="translation.html#known-functions"><i class="fa fa-check"></i><b>21.3.6</b> Known functions</a></li>
<li class="chapter" data-level="21.3.7" data-path="translation.html"><a href="translation.html#unknown-functions"><i class="fa fa-check"></i><b>21.3.7</b> Unknown functions</a></li>
<li class="chapter" data-level="21.3.8" data-path="translation.html"><a href="translation.html#exercises-67"><i class="fa fa-check"></i><b>21.3.8</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Techniques</b></span></li>
<li class="chapter" data-level="22" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>22</b> Debugging</a><ul>
<li class="chapter" data-level="22.1" data-path="debugging.html"><a href="debugging.html#introduction-19"><i class="fa fa-check"></i><b>22.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="debugging.html"><a href="debugging.html#outline-17"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="debugging.html"><a href="debugging.html#debugging-techniques"><i class="fa fa-check"></i><b>22.2</b> Techniques</a></li>
<li class="chapter" data-level="22.3" data-path="debugging.html"><a href="debugging.html#debugging-tools"><i class="fa fa-check"></i><b>22.3</b> Tools</a><ul>
<li class="chapter" data-level="22.3.1" data-path="debugging.html"><a href="debugging.html#determining-the-sequence-of-calls"><i class="fa fa-check"></i><b>22.3.1</b> Determining the sequence of calls</a></li>
<li class="chapter" data-level="22.3.2" data-path="debugging.html"><a href="debugging.html#browsing-on-error"><i class="fa fa-check"></i><b>22.3.2</b> Browsing on error</a></li>
<li class="chapter" data-level="22.3.3" data-path="debugging.html"><a href="debugging.html#browsing-arbitrary-code"><i class="fa fa-check"></i><b>22.3.3</b> Browsing arbitrary code</a></li>
<li class="chapter" data-level="22.3.4" data-path="debugging.html"><a href="debugging.html#the-call-stack-traceback-where-and-recover"><i class="fa fa-check"></i><b>22.3.4</b> The call stack: <code>traceback()</code>, <code>where</code>, and <code>recover()</code></a></li>
<li class="chapter" data-level="22.3.5" data-path="debugging.html"><a href="debugging.html#other-types-of-failure"><i class="fa fa-check"></i><b>22.3.5</b> Other types of failure</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>23</b> Performance</a><ul>
<li class="chapter" data-level="23.1" data-path="performance.html"><a href="performance.html#why-is-r-slow"><i class="fa fa-check"></i><b>23.1</b> Why is R slow?</a></li>
<li class="chapter" data-level="23.2" data-path="performance.html"><a href="performance.html#microbenchmarking"><i class="fa fa-check"></i><b>23.2</b> Microbenchmarking</a><ul>
<li class="chapter" data-level="23.2.1" data-path="performance.html"><a href="performance.html#exercises-68"><i class="fa fa-check"></i><b>23.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23.3" data-path="performance.html"><a href="performance.html#language-performance"><i class="fa fa-check"></i><b>23.3</b> Language performance</a><ul>
<li class="chapter" data-level="23.3.1" data-path="performance.html"><a href="performance.html#extreme-dynamism"><i class="fa fa-check"></i><b>23.3.1</b> Extreme dynamism</a></li>
<li class="chapter" data-level="23.3.2" data-path="performance.html"><a href="performance.html#name-lookup-with-mutable-environments"><i class="fa fa-check"></i><b>23.3.2</b> Name lookup with mutable environments</a></li>
<li class="chapter" data-level="23.3.3" data-path="performance.html"><a href="performance.html#lazy-evaluation-overhead"><i class="fa fa-check"></i><b>23.3.3</b> Lazy evaluation overhead</a></li>
<li class="chapter" data-level="23.3.4" data-path="performance.html"><a href="performance.html#exercises-69"><i class="fa fa-check"></i><b>23.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23.4" data-path="performance.html"><a href="performance.html#implementation-performance"><i class="fa fa-check"></i><b>23.4</b> Implementation performance</a><ul>
<li class="chapter" data-level="23.4.1" data-path="performance.html"><a href="performance.html#extracting-a-single-value-from-a-data-frame"><i class="fa fa-check"></i><b>23.4.1</b> Extracting a single value from a data frame</a></li>
<li class="chapter" data-level="23.4.2" data-path="performance.html"><a href="performance.html#ifelse-pmin-and-pmax"><i class="fa fa-check"></i><b>23.4.2</b> <code>ifelse()</code>, <code>pmin()</code>, and <code>pmax()</code></a></li>
<li class="chapter" data-level="23.4.3" data-path="performance.html"><a href="performance.html#exercises-70"><i class="fa fa-check"></i><b>23.4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23.5" data-path="performance.html"><a href="performance.html#faster-r"><i class="fa fa-check"></i><b>23.5</b> Alternative R implementations</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="profiling.html"><a href="profiling.html"><i class="fa fa-check"></i><b>24</b> Optimising code</a><ul>
<li class="chapter" data-level="24.1" data-path="profiling.html"><a href="profiling.html#introduction-20"><i class="fa fa-check"></i><b>24.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="profiling.html"><a href="profiling.html#outline-18"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="profiling.html"><a href="profiling.html#prerequisites-11"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="profiling.html"><a href="profiling.html#measure-perf"><i class="fa fa-check"></i><b>24.2</b> Measuring performance</a><ul>
<li class="chapter" data-level="24.2.1" data-path="profiling.html"><a href="profiling.html#limitations"><i class="fa fa-check"></i><b>24.2.1</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="profiling.html"><a href="profiling.html#memory-profiling"><i class="fa fa-check"></i><b>24.3</b> Memory profiling with lineprof</a><ul>
<li class="chapter" data-level="24.3.1" data-path="profiling.html"><a href="profiling.html#exercises-71"><i class="fa fa-check"></i><b>24.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="profiling.html"><a href="profiling.html#improve-perf"><i class="fa fa-check"></i><b>24.4</b> Improving performance</a></li>
<li class="chapter" data-level="24.5" data-path="profiling.html"><a href="profiling.html#code-organisation"><i class="fa fa-check"></i><b>24.5</b> Code organisation</a></li>
<li class="chapter" data-level="24.6" data-path="profiling.html"><a href="profiling.html#already-solved"><i class="fa fa-check"></i><b>24.6</b> Has someone already solved the problem?</a><ul>
<li class="chapter" data-level="24.6.1" data-path="profiling.html"><a href="profiling.html#exercises-72"><i class="fa fa-check"></i><b>24.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.7" data-path="profiling.html"><a href="profiling.html#be-lazy"><i class="fa fa-check"></i><b>24.7</b> Do as little as possible</a><ul>
<li class="chapter" data-level="24.7.1" data-path="profiling.html"><a href="profiling.html#exercises-73"><i class="fa fa-check"></i><b>24.7.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.8" data-path="profiling.html"><a href="profiling.html#vectorise"><i class="fa fa-check"></i><b>24.8</b> Vectorise</a><ul>
<li class="chapter" data-level="24.8.1" data-path="profiling.html"><a href="profiling.html#exercises-74"><i class="fa fa-check"></i><b>24.8.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.9" data-path="profiling.html"><a href="profiling.html#avoid-copies"><i class="fa fa-check"></i><b>24.9</b> Avoid copies</a></li>
<li class="chapter" data-level="24.10" data-path="profiling.html"><a href="profiling.html#byte-code"><i class="fa fa-check"></i><b>24.10</b> Byte code compilation</a></li>
<li class="chapter" data-level="24.11" data-path="profiling.html"><a href="profiling.html#t-test"><i class="fa fa-check"></i><b>24.11</b> Case study: t-test</a></li>
<li class="chapter" data-level="24.12" data-path="profiling.html"><a href="profiling.html#parallelise"><i class="fa fa-check"></i><b>24.12</b> Parallelise</a></li>
<li class="chapter" data-level="24.13" data-path="profiling.html"><a href="profiling.html#more-techniques"><i class="fa fa-check"></i><b>24.13</b> Other techniques</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="rcpp.html"><a href="rcpp.html"><i class="fa fa-check"></i><b>25</b> Rewriting R code in C++</a><ul>
<li class="chapter" data-level="25.1" data-path="rcpp.html"><a href="rcpp.html#introduction-21"><i class="fa fa-check"></i><b>25.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="rcpp.html"><a href="rcpp.html#outline-19"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="rcpp.html"><a href="rcpp.html#prerequistes"><i class="fa fa-check"></i>Prerequistes</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro"><i class="fa fa-check"></i><b>25.2</b> Getting started with C++</a><ul>
<li class="chapter" data-level="25.2.1" data-path="rcpp.html"><a href="rcpp.html#no-inputs-scalar-output"><i class="fa fa-check"></i><b>25.2.1</b> No inputs, scalar output</a></li>
<li class="chapter" data-level="25.2.2" data-path="rcpp.html"><a href="rcpp.html#scalar-input-scalar-output"><i class="fa fa-check"></i><b>25.2.2</b> Scalar input, scalar output</a></li>
<li class="chapter" data-level="25.2.3" data-path="rcpp.html"><a href="rcpp.html#vector-input-scalar-output"><i class="fa fa-check"></i><b>25.2.3</b> Vector input, scalar output</a></li>
<li class="chapter" data-level="25.2.4" data-path="rcpp.html"><a href="rcpp.html#vector-input-vector-output"><i class="fa fa-check"></i><b>25.2.4</b> Vector input, vector output</a></li>
<li class="chapter" data-level="25.2.5" data-path="rcpp.html"><a href="rcpp.html#matrix-input-vector-output"><i class="fa fa-check"></i><b>25.2.5</b> Matrix input, vector output</a></li>
<li class="chapter" data-level="25.2.6" data-path="rcpp.html"><a href="rcpp.html#sourceCpp"><i class="fa fa-check"></i><b>25.2.6</b> Using sourceCpp</a></li>
<li class="chapter" data-level="25.2.7" data-path="rcpp.html"><a href="rcpp.html#exercises-75"><i class="fa fa-check"></i><b>25.2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="rcpp.html"><a href="rcpp.html#rcpp-classes"><i class="fa fa-check"></i><b>25.3</b> Attributes and other classes</a><ul>
<li class="chapter" data-level="25.3.1" data-path="rcpp.html"><a href="rcpp.html#lists-and-data-frames"><i class="fa fa-check"></i><b>25.3.1</b> Lists and data frames</a></li>
<li class="chapter" data-level="25.3.2" data-path="rcpp.html"><a href="rcpp.html#functions-rcpp"><i class="fa fa-check"></i><b>25.3.2</b> Functions</a></li>
<li class="chapter" data-level="25.3.3" data-path="rcpp.html"><a href="rcpp.html#other-types"><i class="fa fa-check"></i><b>25.3.3</b> Other types</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="rcpp.html"><a href="rcpp.html#rcpp-na"><i class="fa fa-check"></i><b>25.4</b> Missing values</a><ul>
<li class="chapter" data-level="25.4.1" data-path="rcpp.html"><a href="rcpp.html#scalars-1"><i class="fa fa-check"></i><b>25.4.1</b> Scalars</a></li>
<li class="chapter" data-level="25.4.2" data-path="rcpp.html"><a href="rcpp.html#strings"><i class="fa fa-check"></i><b>25.4.2</b> Strings</a></li>
<li class="chapter" data-level="25.4.3" data-path="rcpp.html"><a href="rcpp.html#boolean"><i class="fa fa-check"></i><b>25.4.3</b> Boolean</a></li>
<li class="chapter" data-level="25.4.4" data-path="rcpp.html"><a href="rcpp.html#vectors-rcpp"><i class="fa fa-check"></i><b>25.4.4</b> Vectors</a></li>
<li class="chapter" data-level="25.4.5" data-path="rcpp.html"><a href="rcpp.html#exercises-76"><i class="fa fa-check"></i><b>25.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="rcpp.html"><a href="rcpp.html#rcpp-sugar"><i class="fa fa-check"></i><b>25.5</b> Rcpp sugar</a><ul>
<li class="chapter" data-level="25.5.1" data-path="rcpp.html"><a href="rcpp.html#arithmetic-and-logical-operators"><i class="fa fa-check"></i><b>25.5.1</b> Arithmetic and logical operators</a></li>
<li class="chapter" data-level="25.5.2" data-path="rcpp.html"><a href="rcpp.html#logical-summary-functions"><i class="fa fa-check"></i><b>25.5.2</b> Logical summary functions</a></li>
<li class="chapter" data-level="25.5.3" data-path="rcpp.html"><a href="rcpp.html#vector-views"><i class="fa fa-check"></i><b>25.5.3</b> Vector views</a></li>
<li class="chapter" data-level="25.5.4" data-path="rcpp.html"><a href="rcpp.html#other-useful-functions"><i class="fa fa-check"></i><b>25.5.4</b> Other useful functions</a></li>
</ul></li>
<li class="chapter" data-level="25.6" data-path="rcpp.html"><a href="rcpp.html#stl"><i class="fa fa-check"></i><b>25.6</b> The STL</a><ul>
<li class="chapter" data-level="25.6.1" data-path="rcpp.html"><a href="rcpp.html#using-iterators"><i class="fa fa-check"></i><b>25.6.1</b> Using iterators</a></li>
<li class="chapter" data-level="25.6.2" data-path="rcpp.html"><a href="rcpp.html#algorithms"><i class="fa fa-check"></i><b>25.6.2</b> Algorithms</a></li>
<li class="chapter" data-level="25.6.3" data-path="rcpp.html"><a href="rcpp.html#data-structures-rcpp"><i class="fa fa-check"></i><b>25.6.3</b> Data structures</a></li>
<li class="chapter" data-level="25.6.4" data-path="rcpp.html"><a href="rcpp.html#vectors-stl"><i class="fa fa-check"></i><b>25.6.4</b> Vectors</a></li>
<li class="chapter" data-level="25.6.5" data-path="rcpp.html"><a href="rcpp.html#sets"><i class="fa fa-check"></i><b>25.6.5</b> Sets</a></li>
<li class="chapter" data-level="25.6.6" data-path="rcpp.html"><a href="rcpp.html#map-1"><i class="fa fa-check"></i><b>25.6.6</b> Map</a></li>
<li class="chapter" data-level="25.6.7" data-path="rcpp.html"><a href="rcpp.html#exercises-77"><i class="fa fa-check"></i><b>25.6.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.7" data-path="rcpp.html"><a href="rcpp.html#rcpp-case-studies"><i class="fa fa-check"></i><b>25.7</b> Case studies</a><ul>
<li class="chapter" data-level="25.7.1" data-path="rcpp.html"><a href="rcpp.html#gibbs-sampler"><i class="fa fa-check"></i><b>25.7.1</b> Gibbs sampler</a></li>
<li class="chapter" data-level="25.7.2" data-path="rcpp.html"><a href="rcpp.html#r-vectorisation-vs.c-vectorisation"><i class="fa fa-check"></i><b>25.7.2</b> R vectorisation vs. C++ vectorisation</a></li>
</ul></li>
<li class="chapter" data-level="25.8" data-path="rcpp.html"><a href="rcpp.html#rcpp-package"><i class="fa fa-check"></i><b>25.8</b> Using Rcpp in a package</a></li>
<li class="chapter" data-level="25.9" data-path="rcpp.html"><a href="rcpp.html#rcpp-more"><i class="fa fa-check"></i><b>25.9</b> Learning more</a></li>
<li class="chapter" data-level="25.10" data-path="rcpp.html"><a href="rcpp.html#acknowledgments"><i class="fa fa-check"></i><b>25.10</b> Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="names-values" class="section level1">
<h1><span class="header-section-number">3</span> Names and values</h1>
<div id="introduction-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Introduction</h2>
<p>In R, it is important to understand the distinction between an object and its name. A correct mental model is important because it will help you:</p>
<ul>
<li>More accurately predict performance and memory usage of R code.</li>
<li>Write faster code because accidental copies are a major cause of slow code.</li>
<li>Better understand R’s functional programming tools.</li>
</ul>
<p>The goal of this chapter is to help you understand the distinction between names and values, and when R will copy an object.</p>
<div id="quiz" class="section level3 unnumbered">
<h3>Quiz</h3>
<p>Answer the following questions to see if you can safely skip this chapter. You can find the answers at the end of the chapter in Section <a href="names-values.html#names-values-answers">3.7</a>.</p>
<ol style="list-style-type: decimal">
<li><p>Given the following data frame, how do I create a new column called “3”
that contains the sum of <code>1</code> and <code>2</code>? You may only use <code>$</code>, not <code>[[</code>.
What makes <code>1</code>, <code>2</code>, and <code>3</code> challenging as variable names?</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">runif</span>(<span class="dv">3</span>), <span class="kw">runif</span>(<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">names</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</a></code></pre></div></li>
<li><p>In the following code, how much memory does <code>y</code> occupy?</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="fl">1e6</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw">list</span>(x, x, x)</a></code></pre></div></li>
<li><p>On which line does <code>a</code> get copied in the following example?</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">b &lt;-<span class="st"> </span>a</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">b[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">10</span></a></code></pre></div></li>
</ol>
</div>
<div id="outline" class="section level3 unnumbered">
<h3>Outline</h3>
<ul>
<li><p>Section <a href="names-values.html#binding-basics">3.2</a> introduces you to the distinction between
names and values, and discusses how <code>&lt;-</code> creates a binding, or reference,
between a name and a value.</p></li>
<li><p>Section <a href="names-values.html#copy-on-modify">3.3</a> describes when R makes a copy; whenever you
modify vector, you’re almost always actually create a new, modified vector.
You’ll learn how to use <code>tracemem()</code> to figure out when a copy actually
occurs, and then explore the implications as they apply to function calls,
lists, data frames, and character vectors.</p></li>
<li><p>Section <a href="names-values.html#object-size">3.4</a> explores the implications of the previous two
sections on how much memory an object occupies. You’ll learn to use
<code>lobstr::obj_size()</code> as your intuition may be profoundly wrong, and the
base <code>object.size()</code> is unfortunately inaccurate.</p></li>
<li><p>Section <a href="names-values.html#modify-in-place">3.5</a> describes the two important exceptions to
copy-on-modify: values with a single name, and environments. In these two
special cases, objects are actually modified in place.</p></li>
<li><p>Section <a href="names-values.html#gc">3.6</a> closes out the chapter with a discussion of the
garbage collector, which frees up memory used by objects that are no longer
referenced by a name.</p></li>
</ul>
</div>
<div id="prerequisites" class="section level3 unnumbered">
<h3>Prerequisites</h3>
<p>We’ll use the development version of <a href="https://github.com/r-lib/lobstr">lobstr</a> to dig into the internal representation of R objects.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># devtools::install_github(&quot;r-lib/lobstr&quot;)</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">library</span>(lobstr)</a></code></pre></div>
</div>
<div id="sources" class="section level3 unnumbered">
<h3>Sources</h3>
<p>The details of R’s memory management are not documented in a single place. Much of the information in this chapter was gleaned from a close reading of the documentation (particularly <code>?Memory</code> and <code>?gc</code>), the <a href="http://cran.r-project.org/doc/manuals/R-exts.html#Profiling-R-code-for-memory-use">memory profiling</a> section of “Writing R extensions” <span class="citation">(R Core Team <a href="#ref-r-exts">2018</a><a href="#ref-r-exts">b</a>)</span>, and the <a href="http://cran.r-project.org/doc/manuals/R-ints.html#SEXPs">SEXPs</a> section of “R internals” <span class="citation">(R Core Team <a href="#ref-r-ints">2018</a><a href="#ref-r-ints">a</a>)</span>. The rest I figured out by reading the C source code, performing small experiments, and asking questions on R-devel. Any mistakes are entirely mine.</p>
</div>
</div>
<div id="binding-basics" class="section level2">
<h2><span class="header-section-number">3.2</span> Binding basics</h2>
<p> </p>
<p>Take this code:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a></code></pre></div>
<p>It’s easy to read it as: “create an object named ‘x’, containing the values 1, 2, and 3”. Unfortunately, that’s a simplification that will lead to you make inaccurate predictions about what R is actually doing behind the scenes. It’s more accurate to think about this code as doing two things:</p>
<ul>
<li>Creating an object, a vector of values, <code>c(1, 2, 3)</code>.</li>
<li>Binding the object to a name, <code>x</code>.</li>
</ul>
<p>Note that the object, or value, doesn’t have a name; it’s the name that has a value. To make that distinction more clear, I’ll draw diagrams like this:</p>
<p><img src="diagrams/name-value/binding-1.png" style="display: block; margin: auto;" /></p>
<p>The name, <code>x</code>, is drawn with a rounded rectangle, and it has an arrow that points to, binds, or references, the value, the vector <code>1:3</code>. Note that the arrow points in opposite direction to the assignment arrow: <code>&lt;-</code> creates a binding from the name on the left-hand side to the object on the right-hand side.</p>
<p>You can think of a name as a reference to a value. For example, if you run this code, you don’t get another copy of the value <code>1:3</code>, you get another binding to the existing object:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">y &lt;-<span class="st"> </span>x</a></code></pre></div>
<p><img src="diagrams/name-value/binding-2.png" style="display: block; margin: auto;" /></p>
<p>You might have noticed the value <code>1:3</code> has a label: <code>0x74b</code>. While the vector doesn’t have a name, I’ll occasionally need to refer to objects independently of their bindings. To make that possible, I’ll label values with a unique identifier. These unique identifers have a special form that looks like the object’s memory “address”, i.e. the location in memory in which the object is stored. It doesn’t make sense to use the actual memory address because that changes every time the code is run.</p>
<p>You can access the address of an object with <code>lobstr::obj_addr()</code>. This allows us to see that <code>x</code> and <code>y</code> both point to the same location in memory:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">obj_addr</span>(x)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; [1] &quot;0x7ff8453a8b68&quot;</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw">obj_addr</span>(y)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; [1] &quot;0x7ff8453a8b68&quot;</span></a></code></pre></div>
<p>These identifiers are long, and change every time you restart R.</p>
<p>It takes some time to get your head around the distinction between names and values, but it’s really helpful for functional programming when you start to work with functions that have different names in different contexts.</p>
<div id="non-syntactic" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Non-syntactic names</h3>
<p>

</p>
<p>R has strict rules about what constitutes a valid name. A <strong>syntactic</strong> name must consist of letters<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>, digits, <code>.</code> and <code>_</code>, and can’t begin with <code>_</code> or a digit. Additionally, it can not be one of a list of <strong>reserved words</strong> like <code>TRUE</code>, <code>NULL</code>, <code>if</code>, and <code>function</code> (see the complete list in <code>?Reserved</code>). Names that don’t follow these rules are called <strong>non-syntactic</strong> names, and if you try to use them, you’ll get an error:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">_abc &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; Error: unexpected input in &quot;_&quot;</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="cf">if</span> &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; Error: unexpected assignment in &quot;if &lt;-&quot;</span></a></code></pre></div>
<p>It’s possible to override the usual rules and use a name with any sequence of characters by surrounding the name with backticks:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="st">`</span><span class="dt">_abc</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">`</span><span class="dt">_abc</span><span class="st">`</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="st">`</span><span class="dt">if</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="st">`</span><span class="dt">if</span><span class="st">`</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; [1] 10</span></a></code></pre></div>
<p>Typically, you won’t deliberately create such crazy names. Instead, you need to understand them because you’ll be subjected to the crazy names created by others. This happens most commonly when you load data that has been created outside of R.</p>
<div class="sidebar">
<p>You <em>can</em> create non-syntactic bindings using single or double quotes (e.g. <code>&quot;_abc&quot; &lt;- 1</code>) instead of backticks, but you shouldn’t, because you’ll have to use a different syntax to retrieve the values. The ability to use strings on the left hand side of the assignment arrow is a historical artefact, used before R supported backticks.</p>
</div>
</div>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Explain the relationship between <code>a</code>, <code>b</code>, <code>c</code> and <code>d</code> in the following
code:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">b &lt;-<span class="st"> </span>a</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">c &lt;-<span class="st"> </span>b</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">d &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a></code></pre></div></li>
<li><p>The following code accesses the mean function in multiple different ways.
Do they all point to the same underlying function object? Verify with
<code>lobstr::obj_addr()</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">mean</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">base<span class="op">::</span>mean</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw">get</span>(<span class="st">&quot;mean&quot;</span>)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="kw">evalq</span>(mean)</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="kw">match.fun</span>(<span class="st">&quot;mean&quot;</span>)</a></code></pre></div></li>
<li><p>By default, base R data import functions, like <code>read.csv()</code>, will automatically
convert non-syntactic names to syntactic names. Why might this be
problematic? What option allows you to suppress this behaviour?</p></li>
<li><p>What rules does <code>make.names()</code> use to convert non-syntactic names into
syntactic names?</p></li>
<li><p>I slightly simplified the rules that govern syntactic names. Why is <code>.123e1</code>
not a syntactic name? Read <code>?make.names</code> for the full details.</p></li>
</ol>
</div>
</div>
<div id="copy-on-modify" class="section level2">
<h2><span class="header-section-number">3.3</span> Copy-on-modify</h2>
<p>Consider the following code, which binds <code>x</code> and <code>y</code> to the same underlying value, then modifies<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> <code>y</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">y &lt;-<span class="st"> </span>x</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">y[[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5">x</a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; [1] 1 2 3</span></a></code></pre></div>
<p>Modifying <code>y</code> clearly doesn’t modify <code>x</code>, so what happened to the shared binding? While the value associated with <code>y</code> changes, the original object does not. Instead, R creates a new object, <code>0xcd2</code>, a copy of <code>0x74b</code> with one value changed, then rebinds <code>y</code> to that object.</p>
<p><img src="diagrams/name-value/binding-3.png" style="display: block; margin: auto;" /></p>
<p>This behaviour is called <strong>copy-on-modify</strong>, and understanding it makes your intuition for the performance of R code radically better. A related way to describe this phenomenon is to say that R objects are <strong>immutable</strong>, or unchangeable. However, I’ll generally avoid that term because there are a couple of important exceptions to copy-on-modify that you’ll learn about in Section <a href="names-values.html#modify-in-place">3.5</a>.</p>
<div id="tracemem" class="section level3">
<h3><span class="header-section-number">3.3.1</span> <code>tracemem()</code></h3>
<p>You can see when an object gets copied with the help of <code>base::tracemem()</code>. You call it with an object and it returns the current address of the object:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">cat</span>(<span class="kw">tracemem</span>(x), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt; &lt;0x7f80c0e0ffc8&gt; </span></a></code></pre></div>
<p>Whenever that object is copied in the future, <code>tracemem()</code> will print out a message telling you which object was copied, what the new address is, and the sequence of calls that lead to the copy:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">y &lt;-<span class="st"> </span>x</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">y[[<span class="dv">3</span>]] &lt;-<span class="st"> </span>4L</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; tracemem[0x7f80c0e0ffc8 -&gt; 0x7f80c4427f40]: </span></a></code></pre></div>
<p>Note that if you modify <code>y</code> again, it doesn’t get copied. That’s because the new object now only has a single name binding to it, so R can apply a modify-in-place optimisation. We’ll come back to that shortly.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">y[[<span class="dv">3</span>]] &lt;-<span class="st"> </span>5L</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw">untracemem</span>(y)</a></code></pre></div>
<p><code>untracemem()</code> is the opposite of <code>tracemem()</code>; it turns tracing off.</p>
</div>
<div id="function-calls" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Function calls</h3>
<p>The same rules for copying also apply to function calls. Take this code:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(a) {</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">  a</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb17-4" data-line-number="4"></a>
<a class="sourceLine" id="cb17-5" data-line-number="5">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="kw">cat</span>(<span class="kw">tracemem</span>(x), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt; &lt;0x7ff840b48578&gt;</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"></a>
<a class="sourceLine" id="cb17-9" data-line-number="9">z &lt;-<span class="st"> </span><span class="kw">f</span>(x)</a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co"># there&#39;s no copy here!</span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="kw">untracemem</span>(x)</a></code></pre></div>
<p>While <code>f()</code> is running, <code>a</code> inside the function will point to the same value as <code>x</code> does outside of it:</p>
<p><img src="diagrams/name-value/binding-f1.png" style="display: block; margin: auto;" /></p>
<p>(You’ll learn more about the conventions used in this diagram in <a href="environments.html#execution-environments">Execution environments</a>.)</p>
<p>And once complete, <code>x</code> and <code>z</code> will point to the same object. <code>0x74b</code> never gets copied because it never gets modified. If <code>f()</code> did modify <code>x</code>, R would create a new copy, and then <code>z</code> would bind that object.</p>
<p><img src="diagrams/name-value/binding-f2.png" style="display: block; margin: auto;" /></p>
</div>
<div id="list-references" class="section level3">
<h3><span class="header-section-number">3.3.3</span> Lists</h3>
<p>It’s not just names (i.e. variables) that point to values; the elements of lists do too. Take this list, which superficially is very similar to the vector above:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">l1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a></code></pre></div>
<p>The internal representation of the list is actually quite different to that of a vector. A list is really a vector of references:</p>
<p><img src="diagrams/name-value/list.png" style="display: block; margin: auto;" /></p>
<p>This is particularly important when we modify a list:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">l2 &lt;-<span class="st"> </span>l1</a></code></pre></div>
<p><img src="diagrams/name-value/l-modify-1.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">l2[[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">4</span></a></code></pre></div>
<p><img src="diagrams/name-value/l-modify-2.png" style="display: block; margin: auto;" /></p>
<p>Like vectors, lists are copied-on-modify; the original list is left unchanged, and R creates a modified copy. This is a <strong>shallow</strong> copy: the list object and its bindings are copied, but the values pointed to by the bindings are not. The oppposite of a shallow copy is a deep copy, where the contents of every reference are also copied. Prior to R 3.1.0, copies were always deep copies, .</p>
<p>You can use <code>lobstr::ref()</code> to see values that are shared across lists. <code>ref()</code> prints the memory address of each object, along with a local id so that you can easily cross-reference shared components.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">ref</span>(l1, l2)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="co">#&gt; █ [1:0x7ff8454e4a48] &lt;list&gt; </span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="co">#&gt; ├─[2:0x7ff845499d78] &lt;dbl&gt; </span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="co">#&gt; ├─[3:0x7ff845499d40] &lt;dbl&gt; </span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="co">#&gt; └─[4:0x7ff845499d08] &lt;dbl&gt; </span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="co">#&gt;  </span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="co">#&gt; █ [5:0x7ff8471fd3f8] &lt;list&gt; </span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="co">#&gt; ├─[2:0x7ff845499d78] </span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co">#&gt; ├─[3:0x7ff845499d40] </span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="co">#&gt; └─[6:0x7ff8444ffb50] &lt;dbl&gt;</span></a></code></pre></div>
</div>
<div id="df-modify" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Data frames</h3>
<p>Data frames are lists of vectors, so copy-on-modify has important consequences when you modify a data frame. Take this data frame as an example:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">d1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>))</a></code></pre></div>
<p><img src="diagrams/name-value/dataframe.png" style="display: block; margin: auto;" /></p>
<p>If you modify a column, only that column needs to be modified; the others can continue to point to the same place:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">d2 &lt;-<span class="st"> </span>d1</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">d2[, <span class="dv">2</span>] &lt;-<span class="st"> </span>d2[, <span class="dv">2</span>] <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<p><img src="diagrams/name-value/d-modify-c.png" style="display: block; margin: auto;" /></p>
<p>However, if you modify a row, there is no way to share data with the previous version of the data frame, and every column must be copied-and-modified.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">d3 &lt;-<span class="st"> </span>d1</a>
<a class="sourceLine" id="cb24-2" data-line-number="2">d3[<span class="dv">1</span>, ] &lt;-<span class="st"> </span>d3[<span class="dv">1</span>, ] <span class="op">*</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<p><img src="diagrams/name-value/d-modify-r.png" style="display: block; margin: auto;" /></p>
</div>
<div id="character-vectors" class="section level3">
<h3><span class="header-section-number">3.3.5</span> Character vectors</h3>
<p></p>
<p>The final place that R uses references is in character vectors. I usually draw character vectors like this:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;abc&quot;</span>, <span class="st">&quot;d&quot;</span>)</a></code></pre></div>
<p><img src="diagrams/name-value/character.png" style="display: block; margin: auto;" /></p>
<p>But this is a polite fiction, because R has a <strong>global string pool</strong>. Each element of a character vector is actually a pointer to a unique string in that pool:</p>
<p><img src="diagrams/name-value/character-2.png" style="display: block; margin: auto;" /></p>
<p>You can request that <code>ref()</code> show these references:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">ref</span>(x, <span class="dt">character =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="co">#&gt; █ [1:0x7ff840b3e898] &lt;chr&gt; </span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="co">#&gt; ├─[2:0x7ff8411f7b98] &lt;string: &quot;a&quot;&gt; </span></a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="co">#&gt; ├─[2:0x7ff8411f7b98] </span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="co">#&gt; ├─[3:0x7ff84157edc0] &lt;string: &quot;abc&quot;&gt; </span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6"><span class="co">#&gt; └─[4:0x7ff840874200] &lt;string: &quot;d&quot;&gt;</span></a></code></pre></div>
<p>This has a profound impact on the amount of memory a character vector takes but, but is otherwise not generally important, so elsewhere in the book I’ll draw character vectors as if the strings live inside the vector.</p>
</div>
<div id="exercises-1" class="section level3">
<h3><span class="header-section-number">3.3.6</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Why is <code>tracemem(1:10)</code> not useful?</p></li>
<li><p>Explain why <code>tracemem()</code> shows two copies when you run this code.
Hint: carefully look at the difference between this code and the code
shown earlier in the section.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(1L, 2L, 3L)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw">tracemem</span>(x)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"></a>
<a class="sourceLine" id="cb27-4" data-line-number="4">x[[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">4</span></a></code></pre></div></li>
<li><p>Sketch out the relationship between the following objects:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2">b &lt;-<span class="st"> </span><span class="kw">list</span>(a, a)</a>
<a class="sourceLine" id="cb28-3" data-line-number="3">c &lt;-<span class="st"> </span><span class="kw">list</span>(b, a, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div></li>
<li><p>What happens when you run this code?</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">x[[<span class="dv">2</span>]] &lt;-<span class="st"> </span>x</a></code></pre></div>
<p>Draw a picture.</p></li>
</ol>
</div>
</div>
<div id="object-size" class="section level2">
<h2><span class="header-section-number">3.4</span> Object size</h2>

<p>You can find out how much space an object occupies in memory with <code>lobstr::obj_size()</code><a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw">obj_size</span>(letters)</a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="co">#&gt; 1,792 B</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3"><span class="kw">obj_size</span>(ggplot2<span class="op">::</span>diamonds)</a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="co">#&gt; 3,457,104 B</span></a></code></pre></div>
<p>Since the elements of lists are references to values, the size of a list might be much smaller than you expect:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="fl">1e6</span>)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="kw">obj_size</span>(x)</a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="co">#&gt; 8,000,048 B</span></a>
<a class="sourceLine" id="cb31-4" data-line-number="4"></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">y &lt;-<span class="st"> </span><span class="kw">list</span>(x, x, x)</a>
<a class="sourceLine" id="cb31-6" data-line-number="6"><span class="kw">obj_size</span>(y)</a>
<a class="sourceLine" id="cb31-7" data-line-number="7"><span class="co">#&gt; 8,000,128 B</span></a></code></pre></div>
<p><code>y</code> is only 72 bytes<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> bigger than <code>x</code>. That’s the size of an empty list with three elements:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">obj_size</span>(<span class="kw">list</span>(<span class="ot">NULL</span>, <span class="ot">NULL</span>, <span class="ot">NULL</span>))</a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="co">#&gt; 80 B</span></a></code></pre></div>
<p>Similarly, the global string pool means that character vectors take up less memory than you might expect: repeating a string 1000 times does not make it take up 1000 times as much memory.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">banana &lt;-<span class="st"> &quot;bananas bananas bananas&quot;</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="kw">obj_size</span>(banana)</a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="co">#&gt; 272 B</span></a>
<a class="sourceLine" id="cb33-4" data-line-number="4"><span class="kw">obj_size</span>(<span class="kw">rep</span>(banana, <span class="dv">100</span>))</a>
<a class="sourceLine" id="cb33-5" data-line-number="5"><span class="co">#&gt; 1,064 B</span></a></code></pre></div>
<p>References also make it challenging to think about the size of individual objects. <code>obj_size(x) + obj_size(y)</code> will only equal <code>obj_size(x, y)</code> if there are no shared values. Here, the combined size of <code>x</code> and <code>y</code> is the same as the size of <code>y</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw">obj_size</span>(x, y)</a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="co">#&gt; 8,000,128 B</span></a></code></pre></div>
<div id="exercises-2" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>In the following example, why are <code>object.size(y)</code> and <code>obj_size(y)</code>
so radically different? Consult the documentation of <code>object.size()</code>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="kw">list</span>(<span class="kw">runif</span>(<span class="fl">1e4</span>)), <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb35-2" data-line-number="2"></a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="kw">object.size</span>(y)</a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="co">#&gt; 8005648 bytes</span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5"><span class="kw">obj_size</span>(y)</a>
<a class="sourceLine" id="cb35-6" data-line-number="6"><span class="co">#&gt; 80,896 B</span></a></code></pre></div></li>
<li><p>Take the following list. Why is its size somewhat misleading?</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(mean, sd, var)</a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="kw">obj_size</span>(x)</a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="co">#&gt; 17,664 B</span></a></code></pre></div></li>
<li><p>Predict the output of the following code:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="fl">1e6</span>)</a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="kw">obj_size</span>(x)</a>
<a class="sourceLine" id="cb37-3" data-line-number="3"></a>
<a class="sourceLine" id="cb37-4" data-line-number="4">y &lt;-<span class="st"> </span><span class="kw">list</span>(x, x)</a>
<a class="sourceLine" id="cb37-5" data-line-number="5"><span class="kw">obj_size</span>(y)</a>
<a class="sourceLine" id="cb37-6" data-line-number="6"><span class="kw">obj_size</span>(x, y)</a>
<a class="sourceLine" id="cb37-7" data-line-number="7"></a>
<a class="sourceLine" id="cb37-8" data-line-number="8">y[[<span class="dv">1</span>]][[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb37-9" data-line-number="9"><span class="kw">obj_size</span>(y)</a>
<a class="sourceLine" id="cb37-10" data-line-number="10"><span class="kw">obj_size</span>(x, y)</a>
<a class="sourceLine" id="cb37-11" data-line-number="11"></a>
<a class="sourceLine" id="cb37-12" data-line-number="12">y[[<span class="dv">2</span>]][[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb37-13" data-line-number="13"><span class="kw">obj_size</span>(y)</a>
<a class="sourceLine" id="cb37-14" data-line-number="14"><span class="kw">obj_size</span>(x, y)</a></code></pre></div></li>
</ol>
</div>
</div>
<div id="modify-in-place" class="section level2">
<h2><span class="header-section-number">3.5</span> Modify-in-place</h2>
<p>As we’ve seen above, modifying an R object will usually create a copy. There are two exceptions that we’ll explore below:</p>
<ul>
<li><p>Objects with a single binding get a special performance optimisation.</p></li>
<li><p>Environments are a special type of object that is always modified in place.</p></li>
</ul>
<div id="single-binding" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Objects with a single binding</h3>
<p>If an object only has a single name that binds it, R will modify it in place:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a></code></pre></div>
<p><img src="diagrams/name-value/v-inplace-1.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">v[[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">4</span></a></code></pre></div>
<p><img src="diagrams/name-value/v-inplace-2.png" style="display: block; margin: auto;" /></p>
<p>(Carefully note the object ids here: <code>v</code> continues to bind to the same object, <code>0x207</code>.)</p>
<p>It’s challenging to predict exactly when R applies this optimisation because of two complications:</p>
<ul>
<li><p>When it comes to bindings, R can currently<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> only count 0, 1,
and many. That means if an object has two bindings, and one goes away,
the reference count does not go back to 1 (because one less than many is
still many).</p></li>
<li><p>Whenever you call any regular function, it will make a reference to the
object. The only exception are specially written C functions. These occur
mostly in the base package.</p></li>
</ul>
<p>Together, this makes it hard to predict whether or not a copy will occur. Instead, it’s better to determine it empirically with <code>tracemem()</code>. Let’s explore the subtleties with a case study using for loops. For loops have a reputation for being slow in R, but often that slowness is because every iteration of the loop is creating a copy.</p>
<p>Consider the following code. It subtracts the median from each column of a large data frame: </p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">matrix</span>(<span class="kw">runif</span>(<span class="dv">5</span> <span class="op">*</span><span class="st"> </span><span class="fl">1e4</span>), <span class="dt">ncol =</span> <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb40-2" data-line-number="2">medians &lt;-<span class="st"> </span><span class="kw">vapply</span>(x, median, <span class="kw">numeric</span>(<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb40-3" data-line-number="3"></a>
<a class="sourceLine" id="cb40-4" data-line-number="4"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(medians)) {</a>
<a class="sourceLine" id="cb40-5" data-line-number="5">  x[[i]] &lt;-<span class="st"> </span>x[[i]] <span class="op">-</span><span class="st"> </span>medians[[i]]</a>
<a class="sourceLine" id="cb40-6" data-line-number="6">}</a></code></pre></div>
<p>This loop is surprisingly slow because every iteration of the loop copies the data frame, as revealed by using <code>tracemem()</code>:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="kw">cat</span>(<span class="kw">tracemem</span>(x), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="co">#&gt; &lt;0x7f80c429e020&gt; </span></a>
<a class="sourceLine" id="cb41-3" data-line-number="3"></a>
<a class="sourceLine" id="cb41-4" data-line-number="4"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</a>
<a class="sourceLine" id="cb41-5" data-line-number="5">  x[[i]] &lt;-<span class="st"> </span>x[[i]] <span class="op">-</span><span class="st"> </span>medians[[i]]</a>
<a class="sourceLine" id="cb41-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb41-7" data-line-number="7"><span class="co">#&gt; tracemem[0x7f80c429e020 -&gt; 0x7f80c0c144d8]: </span></a>
<a class="sourceLine" id="cb41-8" data-line-number="8"><span class="co">#&gt; tracemem[0x7f80c0c144d8 -&gt; 0x7f80c0c14540]: [[&lt;-.data.frame [[&lt;- </span></a>
<a class="sourceLine" id="cb41-9" data-line-number="9"><span class="co">#&gt; tracemem[0x7f80c0c14540 -&gt; 0x7f80c0c145a8]: [[&lt;-.data.frame [[&lt;- </span></a>
<a class="sourceLine" id="cb41-10" data-line-number="10"><span class="co">#&gt; tracemem[0x7f80c0c145a8 -&gt; 0x7f80c0c14610]: </span></a>
<a class="sourceLine" id="cb41-11" data-line-number="11"><span class="co">#&gt; tracemem[0x7f80c0c14610 -&gt; 0x7f80c0c14678]: [[&lt;-.data.frame [[&lt;- </span></a>
<a class="sourceLine" id="cb41-12" data-line-number="12"><span class="co">#&gt; tracemem[0x7f80c0c14678 -&gt; 0x7f80c0c146e0]: [[&lt;-.data.frame [[&lt;- </span></a>
<a class="sourceLine" id="cb41-13" data-line-number="13"><span class="co">#&gt; tracemem[0x7f80c0c146e0 -&gt; 0x7f80c0c14748]: </span></a>
<a class="sourceLine" id="cb41-14" data-line-number="14"><span class="co">#&gt; tracemem[0x7f80c0c14748 -&gt; 0x7f80c0c147b0]: [[&lt;-.data.frame [[&lt;- </span></a>
<a class="sourceLine" id="cb41-15" data-line-number="15"><span class="co">#&gt; tracemem[0x7f80c0c147b0 -&gt; 0x7f80c0c14818]: [[&lt;-.data.frame [[&lt;- </span></a>
<a class="sourceLine" id="cb41-16" data-line-number="16"><span class="co">#&gt; tracemem[0x7f80c0c14818 -&gt; 0x7f80c0c14880]: </span></a>
<a class="sourceLine" id="cb41-17" data-line-number="17"><span class="co">#&gt; tracemem[0x7f80c0c14880 -&gt; 0x7f80c0c148e8]: [[&lt;-.data.frame [[&lt;- </span></a>
<a class="sourceLine" id="cb41-18" data-line-number="18"><span class="co">#&gt; tracemem[0x7f80c0c148e8 -&gt; 0x7f80c0c14950]: [[&lt;-.data.frame [[&lt;- </span></a>
<a class="sourceLine" id="cb41-19" data-line-number="19"><span class="co">#&gt; tracemem[0x7f80c0c14950 -&gt; 0x7f80c0c149b8]: </span></a>
<a class="sourceLine" id="cb41-20" data-line-number="20"><span class="co">#&gt; tracemem[0x7f80c0c149b8 -&gt; 0x7f80c0c14a20]: [[&lt;-.data.frame [[&lt;- </span></a>
<a class="sourceLine" id="cb41-21" data-line-number="21"><span class="co">#&gt; tracemem[0x7f80c0c14a20 -&gt; 0x7f80c0c14a88]: [[&lt;-.data.frame [[&lt;- </span></a>
<a class="sourceLine" id="cb41-22" data-line-number="22"></a>
<a class="sourceLine" id="cb41-23" data-line-number="23"><span class="kw">untracemem</span>(x)</a></code></pre></div>
<p>In fact, each iteration copies the data frame not once, not twice, but three times! Two copies are made by <code>[[.data.frame</code>, and a further copy<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> it made because <code>[[.data.frame</code> is a regular function and hence increments the reference count of <code>x</code>.</p>
<p>We can reduce the number of copies by using a list instead of a data frame. Modifying a list uses internal C code, so the refs are not incremented and only a single copy is made:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="kw">as.list</span>(x)</a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="kw">cat</span>(<span class="kw">tracemem</span>(y), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb42-3" data-line-number="3"><span class="co">#&gt; &lt;0x7f80c5c3de20&gt;</span></a>
<a class="sourceLine" id="cb42-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb42-5" data-line-number="5"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</a>
<a class="sourceLine" id="cb42-6" data-line-number="6">  y[[i]] &lt;-<span class="st"> </span>y[[i]] <span class="op">-</span><span class="st"> </span>medians[[i]]</a>
<a class="sourceLine" id="cb42-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb42-8" data-line-number="8"><span class="co">#&gt; tracemem[0x7f80c5c3de20 -&gt; 0x7f80c48de210]: </span></a></code></pre></div>
<p>While it’s not hard to determine when copies are made, it is hard to prevent them. If you find yourself resorting to exotic tricks to avoid copies, it may be time to rewrite your function in C++, as described in Chapter <a href="rcpp.html#rcpp">25</a>.</p>
</div>
<div id="env-modify" class="section level3">
<h3><span class="header-section-number">3.5.2</span> Environments</h3>
<p>You’ll learn more about environments in Chapter <a href="environments.html#environments">7</a>, but it’s important to mention them here because they behave differently to other objects: environments are always modified in place. This property is sometimes described as <strong>reference semantics</strong> because when you modify an environment all existing bindings to the environment continue to have the same reference.</p>
<p>Take this environment, which we bind to <code>e1</code> and <code>e2</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">e1 &lt;-<span class="st"> </span>rlang<span class="op">::</span><span class="kw">env</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">2</span>, <span class="dt">c =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb43-2" data-line-number="2">e2 &lt;-<span class="st"> </span>e1</a></code></pre></div>
<p><img src="diagrams/name-value/e-modify-1.png" style="display: block; margin: auto;" /></p>
<p>If we change a binding, the environment is modified in place:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">e1<span class="op">$</span>c &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2">e2<span class="op">$</span>c</a>
<a class="sourceLine" id="cb44-3" data-line-number="3"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
<p><img src="diagrams/name-value/e-modify-2.png" style="display: block; margin: auto;" /></p>
<p>This basic idea can be used to create functions that “remember” their previous state. See Section <a href="function-factories.html#stateful-funs">11.2.3</a> for more details.</p>
<p>One consequence of this is that environments can contain themselves:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">e &lt;-<span class="st"> </span>rlang<span class="op">::</span><span class="kw">env</span>()</a>
<a class="sourceLine" id="cb45-2" data-line-number="2">e<span class="op">$</span>self &lt;-<span class="st"> </span>e</a>
<a class="sourceLine" id="cb45-3" data-line-number="3"></a>
<a class="sourceLine" id="cb45-4" data-line-number="4"><span class="kw">ref</span>(e)</a>
<a class="sourceLine" id="cb45-5" data-line-number="5"><span class="co">#&gt; █ [1:0x7ff84845cd98] &lt;env&gt; </span></a>
<a class="sourceLine" id="cb45-6" data-line-number="6"><span class="co">#&gt; └─self = [1:0x7ff84845cd98]</span></a></code></pre></div>
<p><img src="diagrams/name-value/e-self.png" style="display: block; margin: auto;" /></p>
<p>This is a unique property of environments!</p>
</div>
<div id="exercises-3" class="section level3">
<h3><span class="header-section-number">3.5.3</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Wrap the two methods for subtracting medians into two functions, then
use the bench <span class="citation">(Hester <a href="#ref-bench">2018</a>)</span> package to carefully compare their speeds. How does
performance change as the number of columns increase?</p></li>
<li><p>What happens if you attempt to use <code>tracemem()</code> on an environment?</p></li>
</ol>
</div>
</div>
<div id="gc" class="section level2">
<h2><span class="header-section-number">3.6</span> Unbinding and the garbage collector</h2>
<p>

</p>
<p>Consider this code:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span></a></code></pre></div>
<p><img src="diagrams/name-value/unbinding-1.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">4</span></a></code></pre></div>
<p><img src="diagrams/name-value/unbinding-2.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="kw">rm</span>(x)</a></code></pre></div>
<p><img src="diagrams/name-value/unbinding-3.png" style="display: block; margin: auto;" /></p>
<p>We create two objects, but by the end of code neither object is bound to a name. How do these objects get deleted? That’s the job of the <strong>garbage collector</strong>, or GC, for short. The GC creates more memory by deleting R objects that are no longer used, and if needed, requesting more memory from the operating system.</p>
<p>R uses a <strong>tracing</strong> GC. That means it traces every object reachable from the global<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> environment, and all the objects reachable from those objects (i.e. the references in lists and environments are searched recursively). The garbage collector does not use the reference count used for the modify-in-place optimisation described above. The two ideas are closely related but the internal data structures have been optimised for different use cases.</p>
<p>The garbage collector (GC) is run automatically whenever R needs more memory to create a new object. From the outside, it’s basically impossible to predict when the GC will run, and indeed, you shouldn’t try. Instead, if you want to find out when the GC runs, call <code>gcinfo(TRUE)</code>: the the GC will print a message to the console every time it runs.</p>
<p>You can force the garbage collector to run by calling <code>gc()</code>. Despite what you might have read elsewhere, there’s never any <em>need</em> to call <code>gc()</code> yourself. You may <em>want</em> to call <code>gc()</code> to ask R to return memory to your operating system, or for its side-effect of telling you how much memory is currently being used:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="kw">gc</span>() </a>
<a class="sourceLine" id="cb49-2" data-line-number="2"><span class="co">#&gt;           used (Mb) gc trigger  (Mb) limit (Mb) max used  (Mb)</span></a>
<a class="sourceLine" id="cb49-3" data-line-number="3"><span class="co">#&gt; Ncells  676622 36.2    1242004  66.4         NA  1242004  66.4</span></a>
<a class="sourceLine" id="cb49-4" data-line-number="4"><span class="co">#&gt; Vcells 3681258 28.1   17080385 130.4      16384 17076540 130.3</span></a></code></pre></div>
<p><code>lobstr::mem_used()</code> is a wrapper around <code>gc()</code> that just prints the total number of bytes used:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="kw">mem_used</span>()</a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="co">#&gt; 67,339,984 B</span></a></code></pre></div>
<p>This number won’t agree with the amount of memory reported by your operating system for three reasons:</p>
<ol style="list-style-type: decimal">
<li><p>It only includes objects created by R, not the R interpreter itself.</p></li>
<li><p>Both R and the operating system are lazy: they won’t reclaim memory
until it’s actually needed. R might be holding on to memory because
the OS hasn’t yet asked for it back.</p></li>
<li><p>R counts the memory occupied by objects but there may be gaps due to
deleted objects. This problem is known as memory fragmentation.</p></li>
</ol>
</div>
<div id="names-values-answers" class="section level2">
<h2><span class="header-section-number">3.7</span> Answers</h2>
<ol style="list-style-type: decimal">
<li><p>You must surround non-syntactic names in <code>`</code>. The variables <code>1</code>, <code>2</code>,
and <code>3</code> have non-syntactic names, so must always be quoted with backticks.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">runif</span>(<span class="dv">3</span>), <span class="kw">runif</span>(<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="kw">names</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb51-3" data-line-number="3"></a>
<a class="sourceLine" id="cb51-4" data-line-number="4">df<span class="op">$</span><span class="st">`</span><span class="dt">3</span><span class="st">`</span> &lt;-<span class="st"> </span>df<span class="op">$</span><span class="st">`</span><span class="dt">1</span><span class="st">`</span> <span class="op">+</span><span class="st"> </span>df<span class="op">$</span><span class="st">`</span><span class="dt">2</span><span class="st">`</span></a></code></pre></div></li>
<li><p>It occupies about 4 MB.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="fl">1e6</span>)</a>
<a class="sourceLine" id="cb52-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw">list</span>(x, x, x)</a>
<a class="sourceLine" id="cb52-3" data-line-number="3"><span class="kw">obj_size</span>(y)</a>
<a class="sourceLine" id="cb52-4" data-line-number="4"><span class="co">#&gt; 8,000,128 B</span></a></code></pre></div></li>
<li><p><code>a</code> is copied when <code>b</code> is modified, <code>b[[1]] &lt;- 10</code>.</p></li>
</ol>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-r-exts">
<p>R Core Team. 2018b. “Writing R Extensions.” <em>R Foundation for Statistical Computing</em>. <a href="https://cran.r-project.org/doc/manuals/r-devel/R-ints.html" class="uri">https://cran.r-project.org/doc/manuals/r-devel/R-ints.html</a>.</p>
</div>
<div id="ref-r-ints">
<p>R Core Team. 2018a. “R Internals.” <em>R Foundation for Statistical Computing</em>. <a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html" class="uri">https://cran.r-project.org/doc/manuals/r-devel/R-exts.html</a>.</p>
</div>
<div id="ref-bench">
<p>Hester, Jim. 2018. <em>Bench: High Precision Timing of R Expressions</em>. <a href="http://bench.r-lib.org/" class="uri">http://bench.r-lib.org/</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Surprisingly, what constitutes a letter is determined by your current locale. That means that the syntax of R code actually differs from computer to computer, and it’s possible for a file that works on one computer to not even parse on another!<a href="names-values.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>You may be surprised to see <code>[[</code> used with a numeric vector. We’ll come back to this in Section <a href="subsetting.html#subset-single">5.3</a>, but in brief, I think you should use <code>[[</code> whenever you are getting or setting a single element.<a href="names-values.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>Beware of the base <code>utils::object.size()</code> function. It does not correctly account for shared references and will return sizes that are too large.<a href="names-values.html#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>If you’re running 32-bit R you’ll see slightly different sizes.<a href="names-values.html#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>By the time you read this, that may have changed, as plans are afoot to improve reference counting: <a href="https://developer.r-project.org/Refcnt.html" class="uri">https://developer.r-project.org/Refcnt.html</a><a href="names-values.html#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>Note that these copies are shallow, and only copy the reference to each individual column, not the contents. This means the performance isn’t terrible, but it’s obviously not as good as it could be.<a href="names-values.html#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>And every environment on the current call stack.<a href="names-values.html#fnref7" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="foundations-intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="vectors-chap.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/hadley/adv-r/edit/master/Names-values.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
